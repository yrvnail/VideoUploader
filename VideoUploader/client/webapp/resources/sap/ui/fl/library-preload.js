//@ui5-bundle sap/ui/fl/library-preload.js
/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/fl/ControlPersonalizationAPI',["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/FlexControllerFactory","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Element","sap/ui/base/ManagedObject","sap/base/util/includes","sap/ui/fl/variants/VariantManagement","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/core/Component","sap/base/Log","sap/ui/thirdparty/jquery"],function(F,L,U,a,C,b,J,E,M,i,V,c,d,e,q){"use strict";var f={_determineParameters:function(o,I,u){var A=U.getAppComponentForControl(o);var g=b.createForControl(A);var r=A.getRootControl();var p={rootControl:r,flexController:g};if(!I){var v;var h;var j;p.variantModel=A.getModel(U.VARIANT_MODEL_NAME);p.variantManagement={};if(!u){v=q.makeArray(p.rootControl.$().find(".sapUiFlVarMngmt"));}if(u||v.length===0){v=q.makeArray(q(sap.ui.getCore().getStaticAreaRef()).find(".sapUiFlVarMngmt"));}v.map(function(k){h=sap.ui.getCore().byId(k.id);if(h.getMetadata().getName()==="sap.ui.fl.variants.VariantManagement"){j=h.getFor();j.forEach(function(s){p.variantManagement[s]=p.variantModel.getLocalId(k.id,A);});}});}return p;},_getVariantManagement:function(o,p){p=p||this._determineParameters(o);var g=function(o){if(!p.variantManagement[o.getId()]&&o.getParent()&&o.getId()!==p.rootControl.getId()){return g(o.getParent());}else if(!o.getParent()||o.getId()===p.rootControl.getId()){return p.variantManagement[o.getId()]||"";}return p.variantManagement[o.getId()];};return g(o);},clearVariantParameterInURL:function(o){var u;var A=U.getAppComponentForControl(o);var v=A instanceof d?A.getModel(U.VARIANT_MODEL_NAME):undefined;if(!v){e.warning("Variant model could not be found on the provided control");}if(o instanceof V){var s=v.getLocalId(o.getId(),A);var m=c.removeURLParameterForVariantManagement({model:v,vmReference:s});u=m.parameters;}c.update({parameters:u||[],updateURL:true,updateHashEntry:!!v,model:v||{},silent:!v});},activateVariant:function(v,s){return Promise.resolve().then(function(){var o;if(typeof v==='string'||v instanceof String){o=d.get(v);if(!(o instanceof d)){o=sap.ui.getCore().byId(v);if(!(o instanceof E)){throw new Error("No valid component or control found for the provided ID");}}}else if(v instanceof d||v instanceof E){o=v;}var A=U.getAppComponentForControl(o);if(!A){throw new Error("A valid variant management control or component (instance or ID) should be passed as parameter");}var g=A.getModel(U.VARIANT_MODEL_NAME);if(!g){throw new Error("No variant management model found for the passed control or application component");}var h=g.getVariantManagementReference(s).variantManagementReference;if(!h){throw new Error("A valid control or component, and a valid variant/ID combination are required");}return g.waitForVMControlInit(h).then(function(){return g.updateCurrentVariant({variantManagementReference:h,newVariantReference:s,appComponent:A});});})["catch"](function(o){e.error(o);return Promise.reject(o);});},_checkChangeSpecificData:function(o,l){if(!o.changeSpecificData){return Promise.reject(new Error("No changeSpecificData available"));}if(!o.changeSpecificData.changeType){return Promise.reject(new Error("No valid changeType"));}if(!(o.selectorControl instanceof E)){return Promise.reject(new Error("No valid selectorControl"));}var s=o.selectorControl.getMetadata().getName();var g=C.getInstance();return g.getChangeHandler(o.changeSpecificData.changeType,s,o.selectorControl,J,l);},addPersonalizationChanges:function(p){var A=[];var s=[];var l=L.USER;var P=[];function g(o,m){return f._checkChangeSpecificData(o,l).then(function(){p.params=f._determineParameters(o.selectorControl,p.ignoreVariantManagement,p.useStaticArea);if(!p.ignoreVariantManagement){if(!o.changeSpecificData.variantReference){var v=f._getVariantManagement(o.selectorControl,p.params);if(v){var j=p.params.variantModel.oData[v].currentVariant;o.changeSpecificData.variantReference=j;}}}else{delete o.changeSpecificData.variantReference;}return p.params.flexController.addChange(Object.assign(m,o.changeSpecificData),o.selectorControl);}).then(function(j){o.changeInstance=j;A.push(o);}).catch(function(j){return Promise.reject({change:o,message:j.message});});}function h(o){return p.params.flexController.applyChange(o.changeInstance,o.selectorControl).then(function(){s.push(o.changeInstance);}).catch(function(j){return Promise.reject({change:o,message:j.message});});}p.controlChanges.forEach(function(o){var m={};Object.assign(m,{developerMode:false,layer:l});P.push(g.bind(undefined,o,m));});return U.execPromiseQueueSequentially(P).then(function(){P=[];A.forEach(function(o){P.push(h.bind(undefined,o));});return U.execPromiseQueueSequentially(P);}).then(function(){return s;});},isPersonalized:function(g,h){if(!g||g.length===0){return this._reject("At least one control ID has to be provided as a parameter");}var A=g[0].appComponent||U.getAppComponentForControl(g[0]);if(!A){return this._reject("App Component could not be determined");}var I=g.map(function(j){return j.id||j.getId();});var o=b.createForControl(A);return o.getComponentChanges({currentLayer:L.USER,includeCtrlVariants:true}).then(function(j){return j.filter(this._filterBySelectors.bind(this,A,I)).filter(this._filterByChangeType.bind(this,h)).some(this._ifValidFileType);}.bind(this));},_reject:function(m){e.error(m);return Promise.reject(m);},_filterBySelectors:function(A,I,o){var s=o.getSelector();var g=J.getControlIdBySelector(s,A);return i(I,g);},_filterByChangeType:function(g,o){return(Array.isArray(g)&&g.length>0)?i(g,o.getChangeType()):true;},_ifValidFileType:function(o){return o.getFileType()==="change";},resetChanges:function(g,h){if(!g||g.length===0){return this._reject("At least one control ID has to be provided as a parameter");}var A=g[0].appComponent||U.getAppComponentForControl(g[0]);if(!A){return this._reject("App Component could not be determined");}var s=g.map(function(v){var j=v.id||v.getId();var l=A.getLocalId(j);return l||j;});var o=b.createForControl(A);return o.resetChanges(L.USER,undefined,A,s,h);},saveChanges:function(g,m){if(!(m instanceof M)){var s="A valid sap.ui.base.ManagedObject instance is required as a parameter";e.error(s);return Promise.reject(s);}var p=f._determineParameters(m);var A=U.getAppComponentForControl(m);var v=Object.keys(p.variantManagement).reduce(function(r,h){return r.concat([p.variantManagement[h]]);},[]);return p.flexController.saveSequenceOfDirtyChanges(g,A).then(function(r){p.variantModel.checkDirtyStateForControlModels(v);return r;});},hasVariantManagement:function(o){try{return!!this._getVariantManagement(o);}catch(g){e.error(g.message);return false;}}};return f;},true);
sap.ui.predefine('sap/ui/fl/FakeLrepConnectorLocalStorage',["sap/ui/fl/FakeLrepConnector","sap/ui/fl/write/_internal/connectors/LocalStorageConnector"],function(F,L){"use strict";return{enableFakeConnector:function(p){var j=p?p.sInitialComponentJsonPath:undefined;F.setFlexibilityServicesAndClearCache("LocalStorageConnector",j);},disableFakeConnector:function(){F.disableFakeConnector();},forTesting:{spyWrite:function(s,a){return F.forTesting.spyMethod(s,a,L,"write");},getNumberOfChanges:function(r){return F.forTesting.getNumberOfChanges(L,r);},synchronous:{clearAll:function(){F.forTesting.synchronous.clearAll(window.localStorage);},store:function(k,i){F.forTesting.synchronous.store(window.localStorage,k,i);}}}};},true);
sap.ui.predefine('sap/ui/fl/FakeLrepConnectorSessionStorage',["sap/ui/fl/FakeLrepConnector","sap/ui/fl/write/_internal/connectors/SessionStorageConnector"],function(F,S){"use strict";return{enableFakeConnector:function(p){var j=p?p.sInitialComponentJsonPath:undefined;F.setFlexibilityServicesAndClearCache("SessionStorageConnector",j);},disableFakeConnector:function(){F.disableFakeConnector();},forTesting:{spyWrite:function(s,a){return F.forTesting.spyMethod(s,a,S,"write");},getNumberOfChanges:function(r){return F.forTesting.getNumberOfChanges(S,r);},clear:function(p){return F.forTesting.clear(S,p);},setStorage:function(n){F.forTesting.setStorage(S,n);},synchronous:{clearAll:function(){F.forTesting.synchronous.clearAll(window.sessionStorage);},getNumberOfChanges:function(r){return F.forTesting.synchronous.getNumberOfChanges(S.storage,r);}}}};},true);
sap.ui.predefine('sap/ui/fl/FakeLrepLocalStorage',["sap/ui/fl/FakeLrepConnectorLocalStorage"],function(F){"use strict";return{deleteChanges:function(){return F.forTesting.synchronous.clearAll();}};},true);
sap.ui.predefine('sap/ui/fl/Layer',[],function(){"use strict";return{USER:"USER",PUBLIC:"PUBLIC",CUSTOMER:"CUSTOMER",CUSTOMER_BASE:"CUSTOMER_BASE",PARTNER:"PARTNER",VENDOR:"VENDOR",BASE:"BASE"};});
sap.ui.predefine('sap/ui/fl/apply/_internal/ChangesController',["sap/ui/fl/FlexControllerFactory","sap/ui/fl/Utils"],function(O,F){"use strict";var C={getFlexControllerInstance:function(s){if(typeof s==="string"){return O.create(s);}var m=s.appComponent||s;return O.createForControl(m);},getDescriptorFlexControllerInstance:function(s){if(typeof s.appId==="string"){return O.create(s.appId);}var a=s.appComponent||s;var A=F.getAppDescriptorComponentObjectForControl(a);return O.create(A.name);},getAppComponentForSelector:function(s){if(typeof s.appId==="string"){return s;}return s.appComponent||F.getAppComponentForControl(s);}};return C;});
sap.ui.predefine('sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes',[],function(){"use strict";return{getChangeTypes:function(){return["appdescr_ovp_addNewCard","appdescr_ovp_removeCard","appdescr_ovp_changeCard","appdescr_app_addNewInbound","appdescr_app_changeInbound","appdescr_app_removeInbound","appdescr_app_removeAllInboundsExceptOne","appdescr_app_addNewOutbound","appdescr_app_changeOutbound","appdescr_app_removeOutbound","appdescr_app_addNewDataSource","appdescr_app_changeDataSource","appdescr_app_removeDataSource","appdescr_app_addAnnotationsToOData","appdescr_app_addTechnicalAttributes","appdescr_app_removeTechnicalAttributes","appdescr_app_setTitle","appdescr_app_setSubTitle","appdescr_app_setShortTitle","appdescr_app_setDescription","appdescr_app_setInfo","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_app_addCdsViews","appdescr_app_removeCdsViews","appdescr_flp_setConfig","appdescr_ui5_addNewModelEnhanceWith","appdescr_ui5_removeModel","appdescr_ui5_replaceComponentUsage","appdescr_ui5_setMinUI5Version","appdescr_smb_addNamespace","appdescr_smb_changeNamespace","appdescr_ui_generic_app_setMainPage","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui5_addLibraries","appdescr_ui5_addNewModel","appdescr_app_addAnnotationsToOData","appdescr_ui5_addComponentUsages","appdescr_ui5_setFlexExtensionPointEnabled","appdescr_url_setUri","appdescr_fiori_setRegistrationIds","appdescr_card","appdescr_card_designtime"];},getCondensableChangeTypes:function(){return["appdescr_app_setTitle","appdescr_app_setInfo","appdescr_app_setShortTitle","appdescr_app_setSubTitle","appdescr_app_setDescription","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_fiori_setRegistrationIds","appdescr_smb_changeNamespace"];}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Applier',["sap/base/Log","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Utils"],function(L,E,J,F,U,D,a){"use strict";var l=new a.FakePromise();
function _(C,p){var s=C.getSelector&&C.getSelector();if(!s||(!s.id&&!s.name)){throw Error("No selector in change found or no selector ID.");}var o=p.modifier.bySelector(s,p.appComponent,p.view);if(!o){throw Error("A flexibility change tries to change a nonexistent control.");}var i=C.getDependentControlSelectorList();i.forEach(function(j){var k=p.modifier.bySelector(j,p.appComponent,p.view);if(!k){throw Error("A dependent selector control of the flexibility change is not available.");}});return o;}
function b(C,o,m,i,p){var x=f(p);var j=U.getControlIfTemplateAffected(o,C,p);var I=F.hasChangeApplyFinishedCustomData(j.control,o,p.modifier);var k=o.isApplyProcessFinished();if(k&&!I){if(!x){var n=U.checkIfDependencyIsStillValid.bind(null,p.appComponent,p.modifier,m);i._oChangePersistence.copyDependenciesFromInitialChangesMap(o,n,p.appComponent);}o.setInitialApplyState();}else if(!k&&I){o.markFinished();}}
function c(C,p){var s;if(f(p)&&C.getDefinition().jsOnly){s="Change cannot be applied in XML. Retrying in JS.";}if(s){C.setInitialApplyState();throw Error(s);}}
function d(C,m,i,p){if(i instanceof E){m.control=i;}if(m.control){p.modifier.updateAggregation(m.originalControl,C.getContent().boundAggregation);}F.addAppliedCustomData(m.control,C,p,f(p));var r={success:true};C.markFinished(r);return r;}
function e(o,C,m,p){var x=f(p);var r={success:false,error:o};var s=C.getId();var i="Change ''{0}'' could not be applied.";var j=o instanceof Error;var k=F.getCustomDataIdentifier(false,j,x);switch(k){case F.notApplicableChangesCustomDataKey:a.formatAndLogMessage("info",[i,o.message],[s]);break;case F.failedChangesCustomDataKeyXml:a.formatAndLogMessage("warning",[i,"Merge error detected while processing the XML tree."],[s],o.stack);break;case F.failedChangesCustomDataKeyJs:a.formatAndLogMessage("error",[i,"Merge error detected while processing the JS control tree."],[s],o.stack);break;}F.addFailedCustomData(m.control,C,p,k);if(x){C.setInitialApplyState();}else{C.markFinished(r);}return r;}
function f(p){return p.modifier.targets==="xmlTree";}
function g(o,C){var i=C.getDefinition();var s=i.changeType;var t=i.selector.id;var j=i.namespace+i.fileName+"."+i.fileType;var w="A flexibility change could not be applied.";w+="\nThe displayed UI might not be displayed as intedend.";if(o.message){w+="\n   occurred error message: '"+o.message+"'";}w+="\n   type of change: '"+s+"'";w+="\n   LRep location of the change: "+j;w+="\n   id of targeted control: '"+t+"'.";L.warning(w,undefined,"sap.ui.fl.apply._internal.changes.Applier");}
function h(C,o,i){var p={appComponent:i,modifier:J};var j=J.bySelector(C.originalSelectorToBeAdjusted,i);var k=o.getBindingInfo(C.getContent().boundAggregation).template;if(j.getParent()){var s=[];var t=j;do{s.push({aggregation:t.sParentAggregationName,index:t.getParent().getAggregation(t.sParentAggregationName).indexOf(t)});t=t.getParent();}while(t.getParent());s.reverse();s.forEach(function(I){k=k.getAggregation(I.aggregation)[I.index];});}C.addDependentControl(k,"originalSelector",p);}
var A={addPreConditionForInitialChangeApplying:function(p){l=l.then(function(){return p;});},applyChangeOnControl:function(C,o,p){var m=U.getControlIfTemplateAffected(C,o,p);return U.getChangeHandler(C,m,p).then(function(i){c(C,p);return i;}).then(function(i){if(C.hasApplyProcessStarted()){return C.addPromiseForApplyProcessing().then(function(r){C.markFinished();return r;});}else if(!C.isApplyProcessFinished()){return new a.FakePromise().then(function(){C.startApplying();return i.applyChange(C,m.control,p);}).then(function(I){return d(C,m,I,p);}).catch(function(j){return e(j,C,m,p);});}var r={success:true};C.markFinished(r);return r;}).catch(function(i){return{success:false,error:i};});},applyAllChangesForControl:function(G,o,i,C){var m=G();var s=C.getId();var j=m.mChanges[s]||[];var p={modifier:J,appComponent:o,view:a.getViewForControl(C)};j.forEach(function(k){b(C,k,m,i,p);if(!k.isApplyProcessFinished()&&!k._ignoreOnce){k.setQueuedForApply();}});l=l.then(function(C,p){var P=[];var s=C.getId();var j=m.mChanges[s]||[];var k;if(m.mControlsWithDependencies[s]){D.removeControlsDependencies(m,s);k=true;}j.forEach(function(n){if(n.originalSelectorToBeAdjusted){h(n,C,o);delete n.originalSelectorToBeAdjusted;}if(n._ignoreOnce){delete n._ignoreOnce;}else if(n.isApplyProcessFinished()){D.resolveDependenciesForChange(m,n.getId(),s);}else if(!m.mDependencies[n.getId()]){P.push(function(){return A.applyChangeOnControl(n,C,p).then(function(){D.resolveDependenciesForChange(m,n.getId(),s);});});}else{var q=A.applyChangeOnControl.bind(A,n,C,p);D.addChangeApplyCallbackToDependency(m,n.getId(),q);}});if(j.length||k){return a.execPromiseQueueSequentially(P).then(function(){return D.processDependentQueue(m,o,s);});}}.bind(null,C,p));return l;},applyAllChangesForXMLView:function(p,C){if(!Array.isArray(C)){var s="No list of changes was passed for processing the flexibility on view: "+p.view+".";L.error(s,undefined,"sap.ui.fl.apply._internal.changes.Applier");C=[];}return C.reduce(function(P,o){return P.then(function(){var i=_(o,p);o.setQueuedForApply();b(i,o,undefined,undefined,p);if(!o.isApplyProcessFinished()){return A.applyChangeOnControl(o,i,p);}return{success:true};}).then(function(r){if(!r.success){throw Error(r.error);}}).catch(function(i){g(i,o);});},new a.FakePromise()).then(function(){return p.view;});}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Reverter',["sap/base/Log","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/Utils"],function(L,F,U,a){"use strict";
function _(c){if(!c.isApplyProcessFinished()&&c.hasApplyProcessStarted()){return c.addPromiseForApplyProcessing().then(function(r){if(r&&r.error){c.markRevertFinished(r.error);throw Error(r.error);}});}}
var R={revertChangeOnControl:function(c,C,p){var m=U.getControlIfTemplateAffected(c,C,p);var o;return U.getChangeHandler(c,m,p).then(function(r){o=r;}).then(_.bind(null,c)).then(function(){if(c.isApplyProcessFinished()){if(!c.hasRevertData()){c.setRevertData(F.getParsedRevertDataFromCustomData(C,c,p.modifier));}c.startReverting();return o.revertChange(c,m.control,p);}throw Error("Change was never applied");}).then(function(){m.control=p.modifier.bySelector(c.getSelector(),p.appComponent,p.view);if(m.bTemplateAffected){p.modifier.updateAggregation(m.control,c.getContent().boundAggregation);}c.markRevertFinished();return m.control;}).catch(function(e){var E="Change could not be reverted: "+e.message;L.error(E);c.markRevertFinished(E);return false;});},revertMultipleChanges:function(c,p){var P=[];c.forEach(function(C){C.setQueuedForRevert();P.push(function(){var s=C.getSelector&&C.getSelector();var o=p.modifier.bySelector(s,p.appComponent);if(!o){L.warning("A flexibility change tries to revert changes on a nonexistent control with id "+s.id);return new a.FakePromise();}var r={modifier:p.modifier,appComponent:p.appComponent,view:a.getViewForControl(o)};return R.revertChangeOnControl(C,o,r).then(function(v){F.destroyAppliedCustomData(v||o,C,p.modifier);return!!v;}).then(function(S){if(S){p.flexController._oChangePersistence._deleteChangeInMap(C);}});});});return a.execPromiseQueueSequentially(P);}};return R;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Utils',["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/Utils"],function(F,C,a){"use strict";var U={getControlIfTemplateAffected:function(c,o,p){var m=p.modifier;var b=c.getDefinition();var d={originalControl:o};var O=b.dependentSelector&&b.dependentSelector.originalSelector;if(c.getContent().boundAggregation&&O){d.control=m.bySelector(O,p.appComponent,p.view);d.controlType=m.getControlType(d.control);d.bTemplateAffected=true;}else{d.control=o;d.controlType=m.getControlType(o);d.bTemplateAffected=false;}return d;},getChangeHandler:function(c,m,p){var l=p.modifier.getLibraryName(m.control);return C.waitForChangeHandlerRegistration(l).then(function(){var s=c.getChangeType();var L=c.getLayer();var o=C.getInstance();return o.getChangeHandler(s,m.controlType,m.control,p.modifier,L);});},checkIfDependencyIsStillValid:function(A,m,c,s){var o=a.getChangeFromChangesMap(c.mChanges,s);var b=m.bySelector(o.getSelector(),A);if(F.hasChangeApplyFinishedCustomData(b,o,m)||o.hasApplyProcessStarted()){return false;}return true;}};return U;});
sap.ui.predefine('sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector',["sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/fl/initial/_internal/StorageUtils"],function(O,S){"use strict";
function l(p){var f=[];return O.forEachObjectInStorage(p,function(F){f.push(F.changeDefinition);}).then(function(){return f;});}
var a={oStorage:undefined,layers:["ALL"],loadFlexData:function(p){return l({storage:this.oStorage,reference:p.reference}).then(function(f){var g=S.getGroupedFlexObjects(f);return S.filterAndSortResponses(g);});}};a.storage=a.oStorage;return a;});
sap.ui.predefine('sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils',[],function(){"use strict";var F="sap.ui.fl";return{forEachObjectInStorage:function(p,P){var r=p.storage.getItems&&p.storage.getItems()||p.storage;return Promise.resolve(r).then(function(r){var a=Object.keys(r).map(function(k){var i=k.includes(F);if(!i){return;}var s=r[k];var f=p.storage._itemsStoredAsObjects?s:JSON.parse(s);var S=true;if(p.reference){S=f.reference===p.reference||f.reference+".Component"===p.reference;}var b=true;if(p.layer){b=f.layer===p.layer;}if(!S||!b){return;}return P({changeDefinition:f,key:k});});return Promise.all(a);});},getAllFlexObjects:function(p){var f=[];return this.forEachObjectInStorage(p,function(m){f.push(m);}).then(function(){return f;});},createFlexKey:function(i){if(i){return F+"."+i;}},createFlexObjectKey:function(f){return this.createFlexKey(f.fileName);}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/URLHandler',["sap/ui/core/Component","sap/ui/fl/Utils","sap/base/Log","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/ui/base/ManagedObjectObserver","sap/ui/thirdparty/hasher","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState"],function(C,U,L,m,O,i,M,h,a,V,b){"use strict";var _={};
function c(n,o){var A=[];return n.reduce(function(r,v){var l=o.getVariantManagementReference(v).variantManagementReference;if(l){if(a(A,l)){r.updateRequired=true;return r;}A.push(l);}if(l&&o.oData[l].currentVariant!==v){r.updateRequired=true;if(o.oData[l].currentVariant!==o.oData[l].defaultVariant){r.parameters.push(o.oData[l].currentVariant);}}else{r.parameters.push(v);}return r;},{updateRequired:false,parameters:[]});}
function d(p,o){var r=O.get(["params",V.VARIANT_TECHNICAL_PARAMETER],p);if(r){var u=c(r,o);if(u.updateRequired){k.update({updateURL:!o._bDesignTimeMode,parameters:u.parameters,updateHashEntry:true,model:o});}}}
function e(o,S,n){try{var N=S[1].parseShellHash(n);d(N,o);}catch(E){L.error(E.message);}return S[0].NavigationFilterStatus.Continue;}
function f(o){U.ifUShellContainerThen(function(S){if(!_[o.sFlexReference]){_[o.sFlexReference]=e.bind(null,o,S);S[0].registerNavigationFilter(_[o.sFlexReference]);}},["ShellNavigation","URLParsing"]);}
function g(o){U.ifUShellContainerThen(function(S){if(_[o.sFlexReference]){S[0].unregisterNavigationFilter(_[o.sFlexReference]);delete _[o.sFlexReference];}},["ShellNavigation"]);}
function s(p){var P=U.getParsedURLHash(V.VARIANT_TECHNICAL_PARAMETER);if(P.params){var t=U.getTechnicalParametersForComponent(p.model.oAppComponent);if(!t){L.warning("Component instance not provided, so technical parameters in component data and browser history remain unchanged");}if(p.parameters.length===0){delete P.params[V.VARIANT_TECHNICAL_PARAMETER];t&&delete t[V.VARIANT_TECHNICAL_PARAMETER];}else{P.params[V.VARIANT_TECHNICAL_PARAMETER]=p.parameters;t&&(t[V.VARIANT_TECHNICAL_PARAMETER]=p.parameters);}var u=U.getUshellContainer();if(p.silent){h.changed.active=false;h.replaceHash(u.getService("URLParsing").constructShellHash(P));h.changed.active=true;}else{var o=u.getService("CrossApplicationNavigation");o.toExternal({target:{semanticObject:P.semanticObject,action:P.action,context:P.contextRaw},params:P.params,appSpecificRoute:P.appSpecificRoute,writeHistory:false});}}}
function j(p){var r={index:-1};var u=U.getParsedURLHash().params;if(u){r.parameters=[];if(p.model._bDesignTimeMode){u[V.VARIANT_TECHNICAL_PARAMETER]=k.getStoredHashParams(p);}if(Array.isArray(u[V.VARIANT_TECHNICAL_PARAMETER])){u[V.VARIANT_TECHNICAL_PARAMETER]=u[V.VARIANT_TECHNICAL_PARAMETER].map(decodeURIComponent);u[V.VARIANT_TECHNICAL_PARAMETER].some(function(P,I){var v=b.getVariant({vmReference:p.vmReference,vReference:P,reference:p.model.oChangePersistence.getComponentName()});if(v){r.index=I;return true;}});}}return m(r,u&&u[V.VARIANT_TECHNICAL_PARAMETER]&&{parameters:u[V.VARIANT_TECHNICAL_PARAMETER]});}
var k={variantTechnicalParameterName:"sap-ui-fl-control-variant-id",initialize:function(p){var P=U.getParsedURLHash();var l=P.params&&P.params[V.VARIANT_TECHNICAL_PARAMETER];k.attachHandlers(p);k.update({model:p.model,parameters:l,updateHashEntry:Array.isArray(l)&&l.length>0});d(P,p.model);},updateVariantInURL:function(p){var u=k.removeURLParameterForVariantManagement(p);if(!u.parameters){return;}var P=u.parameters||[];var I=u.index;var l=p.newVReference===p.model.oData[p.vmReference].defaultVariant;if(!l){if(I===-1){P=P.concat([p.newVReference]);}else{P=P.slice(0,I).concat([p.newVReference],P.slice(I));}}if(!l||I>-1){k.update({parameters:P,updateURL:!p.model._bDesignTimeMode,updateHashEntry:true,model:p.model});}},removeURLParameterForVariantManagement:function(p){var v=j(p);if(v.index>-1){v.parameters.splice(v.index,1);}return v;},attachHandlers:function(p){function o(){return p.model._oVariantSwitchPromise.then(function(){p.model._oHashData.controlPropertyObservers.forEach(function(l){l.destroy();});g(p.model);p.model.resetMap(true).then(p.model.destroy.bind(p.model));p.model.oComponentDestroyObserver.unobserve(p.model.oAppComponent,{destroy:true});p.model.oComponentDestroyObserver.destroy();});}f(p.model);if(!p.model.oComponentDestroyObserver&&p.model.oAppComponent instanceof C){p.model.oComponentDestroyObserver=new M(o.bind(null));p.model.oComponentDestroyObserver.observe(p.model.oAppComponent,{destroy:true});}},registerControl:function(p){if(p.updateURL){p.model._oHashData.variantControlIds.push(p.vmReference);}},update:function(p){if(!p.model._oHashData){p.model._oHashData={hashParams:[],controlPropertyObservers:[],variantControlIds:[]};}if(!p||!Array.isArray(p.parameters)){L.info("Variant URL parameters could not be updated since invalid parameters were received");return;}if(p.updateURL){s(p);}if(p.updateHashEntry&&!i(p.model)){p.model._oHashData.hashParams=p.parameters;}},getStoredHashParams:function(p){return Array.prototype.slice.call(p.model._oHashData.hashParams);},handleModelContextChange:function(p){var l="modelContextChange";function n(E,P){var v=P.model.getVariantManagementReferenceForControl(E.getSource());var q=P.model._oHashData.variantControlIds;var I=q.indexOf(v);if(I>-1){q.slice(I).forEach(function(r){if(j({vmReference:r,model:p.model}).index===-1){P.model.switchToDefaultForVariantManagement(r);}});}}var o=new M(function(E){if(E.current===true&&E.old===false){E.object.attachEvent(l,{model:p.model},n);}else if(E.current===false&&E.old===true){E.object.detachEvent(l,n);}});o.observe(p.vmControl,{properties:["resetOnContextChange"]});p.model._oHashData.controlPropertyObservers.push(o);if(p.vmControl.getResetOnContextChange()!==false){p.vmControl.attachEvent(l,{model:p.model},n);}},clearAllVariantURLParameters:function(p){k.update({updateURL:true,parameters:[],updateHashEntry:false,model:p.model});}};return k;});
sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/Utils',["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Variant"],function(i,J,V){"use strict";
function g(A,c){if(!c){return undefined;}if(A.indexOf(c.getId())>-1){return c.getId();}return g(A,c.getParent());}
var a={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(v,o){if(v.content.content.title.toLowerCase()<o.content.content.title.toLowerCase()){return-1;}else if(v.content.content.title.toLowerCase()>o.content.content.title.toLowerCase()){return 1;}return 0;},getIndexToSortVariant:function(v,o){var s=v.length;v.some(function(e,b){if(a.compareVariants(o,e)<0){s=b;return true;}});return s;},createVariant:function(p){var v;var o;var s=p.variantSpecificData.content.variantManagementReference;if(s){var b=J.checkControlId(s,p.model.oAppComponent);if(!b){throw new Error("Generated ID attribute found - to offer flexibility a stable VariantManagement ID is needed to assign the changes to, but for this VariantManagement control the ID was generated by SAPUI5 "+s);}}p.variantSpecificData.content.reference=p.model.sFlexReference;p.variantSpecificData.content.packageName="$TMP";o=V.createInitialFileContent(p.variantSpecificData);v=new V(o);return v;},getRelevantVariantManagementControlId:function(c,v){var A={};var b=v.reduce(function(C,d){var o=sap.ui.getCore().byId(d);var f=o.getFor();f.forEach(function(e){A[e]=d;});return C.concat(f);},[]);var s=g(b,c);return A[s];}};return a;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/FlexState',["sap/base/util/each","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap","sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap","sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap","sap/ui/fl/apply/_internal/flexState/controlVariants/prepareVariantsMap","sap/ui/fl/apply/_internal/flexState/Loader","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,m,O,L,C,p,a,b,c,d,M,S,f,U){"use strict";var F={};var _={};var g={};var h={};var i={appDescriptorChanges:{prepareFunction:p,pathInResponse:[]},changes:{prepareFunction:a,pathInResponse:["changes"]},variants:{prepareFunction:c,pathInResponse:["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"]},compVariants:{prepareFunction:b,pathInResponse:["comp.variants","comp.standardVariants","comp.defaultVariants","comp.changes"]}};
function u(P){var B=C.get(P.componentId);_[P.reference].componentData=B?B.getComponentData():P.componentData;}
function j(P){var B=C.get(P.componentId);P.componentData=P.componentData||B.getComponentData()||{};P.manifest=P.manifest||P.rawManifest||B.getManifestObject();P.reference=P.reference||M.getFlexReference(P);}
function k(R,B){if(!_[R]){throw new Error("State is not yet initialized");}if(!_[R].preparedMaps[B]){var P={unfilteredStorageResponse:_[R].unfilteredStorageResponse,storageResponse:_[R].storageResponse,componentId:_[R].componentId,componentData:_[R].componentData};_[R].preparedMaps[B]=F.callPrepareFunction(B,P);}return _[R].preparedMaps[B];}
function l(R){return k(R,"appDescriptorChanges");}
function n(R){return k(R,"changes");}
function o(R){return k(R,"variants");}
function q(R){return k(R,"compVariants");}
function r(P){if(P.reference.endsWith(".Component")){var B=P.reference.split(".");B.pop();var R=B.join(".");_[R]=m({},{storageResponse:{changes:S.getEmptyFlexDataResponse()},unfilteredStorageResponse:{changes:S.getEmptyFlexDataResponse()},preparedMaps:{},componentId:P.componentId,partialFlexState:P.partialFlexState});h[R]=h[P.reference];}}
function s(R){var B=m({},R);var D=B.changes;if(f.isLayerFilteringRequired()){e(i,function(I,E){E.pathInResponse.forEach(function(P){O.set(P,f.filterChangeDefinitionsByMaxLayer(O.get(P,D)),D);});});}return B;}
function t(P){h[P.reference]=d.loadFlexData(P).then(function(R){_[P.reference]=m({},{unfilteredStorageResponse:R,preparedMaps:{},componentId:P.componentId,componentData:P.componentData,partialFlexState:P.partialFlexState});r(P);v(P.reference);return R;});return h[P.reference];}
function v(R){U.ifUShellContainerThen(function(B){g[R]=x.bind(null,R);B[0].registerNavigationFilter(g[R]);},["ShellNavigation"]);}
function w(R){U.ifUShellContainerThen(function(B){if(g[R]){B[0].unregisterNavigationFilter(g[R]);delete g[R];}},["ShellNavigation"]);}
function x(R,N,B){return U.ifUShellContainerThen(function(D){try{var E=f.getMaxLayerTechnicalParameter(N);var P=f.getMaxLayerTechnicalParameter(B);if(E!==P){F.clearFilteredResponse(R);}}catch(G){L.error(G.message);}return D[0].NavigationFilterStatus.Continue;},["ShellNavigation"]);}
function y(R){_[R].preparedMaps={};}
function z(I){var B=_[I.reference];if(B.partialFlexState===true&&I.partialFlexState!==true){B.partialFlexState=false;I.partialFlexData=m({},B.unfilteredStorageResponse.changes);I.reInitialize=true;}return I;}
function A(I){var B=_[I.reference].componentId;if(!I.reInitialize&&B!==I.componentId){I.reInitialize=true;}return I;}
F.initialize=function(P){return Promise.resolve(P).then(function(I){j(I);var B=I.reference;if(h[B]){return h[B].then(z.bind(null,I)).then(A).then(function(E){return E.reInitialize?t(E):_[B].unfilteredStorageResponse;});}return t(I);}).then(function(P,R){if(!_[P.reference].storageResponse){_[P.reference].storageResponse=s(R);u(P);}}.bind(null,P));};
F.clearAndInitialize=function(P){j(P);F.clearState(P.reference);F.clearState(U.normalizeReference(P.reference));return F.initialize(P);};
F.clearState=function(R){if(R){w(R);delete _[R];delete h[R];}else{Object.keys(_).forEach(function(R){w(R);});_={};h={};}};
F.clearFilteredResponse=function(R){if(_[R]){y(R);delete _[R].storageResponse;}};
F.getUIChanges=function(R){return n(R).changes;};
F.getAppDescriptorChanges=function(R){return l(R).appDescriptorChanges;};
F.getVariantsState=function(R){return o(R);};
F.getUI2Personalization=function(R){return _[R].unfilteredStorageResponse.changes.ui2personalization;};
F.getCompVariantsMap=function(R){return q(R);};
F.callPrepareFunction=function(B,P){return i[B].prepareFunction(P);};
F.getStorageResponse=function(R){if(h[R]){return h[R].then(function(){return _[R].unfilteredStorageResponse;});}};
F.getFlexObjectsFromStorageResponse=function(R){return _[R]&&_[R].unfilteredStorageResponse.changes;};
return F;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/Loader',["sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/Utils"],function(M,A,U){"use strict";
function _(f){return{changes:f,cacheKey:f.cacheKey};}
return{loadFlexData:function(p){var c=M.getBaseComponentNameFromManifest(p.manifest);if(p.partialFlexData){return A.completeFlexData({reference:p.reference,componentName:c,partialFlexData:p.partialFlexData}).then(_);}var C=p.reInitialize?undefined:M.getCacheKeyFromAsyncHints(p.reference,p.asyncHints);return A.loadFlexData({reference:p.reference,componentName:c,cacheKey:C,siteId:U.getSiteIdByComponentData(p.componentData),appDescriptor:p.manifest.getRawJson?p.manifest.getRawJson():p.manifest,version:p.version,allContexts:p.allContexts}).then(_);}};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState',["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/connectors/LrepConnector"],function(F,L){"use strict";var U={};
U.getPersonalization=function(r,c,i){var u=F.getUI2Personalization(r);if(!u||!u[c]){return i?undefined:[];}if(!i){return u[c];}return u[c].filter(function(e){return e.itemName===i;})[0];};
U.setPersonalization=function(p){if(!p||!p.reference||!p.containerKey||!p.itemName||!p.content){return Promise.reject("not all mandatory properties were provided for the storage of the personalization");}return L.ui2Personalization.create({flexObjects:p}).then(function(P){var o=F.getUI2Personalization(P.response.reference);o[P.response.containerKey]=o[P.response.containerKey]||[];o[P.response.containerKey].push(P.response);});};
U.deletePersonalization=function(r,c,i){if(!r||!c||!i){return Promise.reject("not all mandatory properties were provided for the storage of the personalization");}return L.ui2Personalization.remove({reference:r,containerKey:c,itemName:i}).then(function(){var I=U.getPersonalization(r,c);var t=U.getPersonalization(r,c,i);var n=I.indexOf(t);I.splice(n,1);});};
return U;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/appDescriptorChanges/prepareAppDescriptorMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.appDescriptorChanges||[];var a=c.map(function(o){return new C(o);});return{appDescriptorChanges:a};};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler',["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(i,J,U){"use strict";var P="sap.ui.fl:PendingChange";var D={};
function g(s,A){return J.getControlIdBySelector(s,A);}
function c(C){return{changeObject:C,dependencies:[],controlsDependencies:[],dependentIds:[]};}
function a(s,C,o){d(o,C,s);b(o,C);}
function b(C,o){if(!i(C.aChanges,o)){C.aChanges.push(o);}}
function d(C,o,s){if(!C.mChanges[s]){C.mChanges[s]=[];}if(!i(C.mChanges[s],o)){C.mChanges[s].push(o);}}
function e(C,A,o){var s=C.getSelector();if(s){if(s.id){a(g(s,A),C,o);}else{b(o,C);}}return o.aChanges;}
function f(E,o){return E.some(function(p){return(p.id===o.id&&p.idIsLocal===o.idIsLocal);});}
function h(t,o,E,C,A,p,q){var r=E.getDependentSelectorList();o.some(function(s){if(f(r,s)){var u=g(s,A);var I=C&&p.indexOf(t)<p.indexOf(E);if(I){l(E,t,u,q,true);}else{l(t,E,u,q);}return true;}});}
function j(t,A,C,o){if(t.isValidForDependencyMap()){var p=t.getDependentSelectorList();k(t,p,A,o);var I=C.indexOf(t);var q=I<(C.length-1);var O=C.slice();O.splice(I,1);O.reverse().forEach(function(E){if(E.isValidForDependencyMap()){h(t,p,E,q,A,C,o);}});}}
function k(o,p,A,C){if(p.length){var q=p.map(function(s){return g(s,A);});if(!C.mDependencies[o.getId()]){C.mDependencies[o.getId()]=c(o);}C.mDependencies[o.getId()].controlsDependencies=q;q.forEach(function(I){C.mControlsWithDependencies[I]=C.mControlsWithDependencies[I]||[];C.mControlsWithDependencies[I].push(o.getId());});}}
function l(o,C,s,p,I){if(m(o,C,s,p,I)){p.mDependencies[o.getId()].dependencies.push(C.getId());if(!i(p.mDependencies[o.getId()].dependentIds,s)){p.mDependencies[o.getId()].dependentIds.push(s);}if(!p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()]=[];}p.mDependentChangesOnMe[C.getId()].push(o.getId());}}
function m(o,C,s,p,I){var S=!I&&i(p.mDependencies[o.getId()].dependentIds,s);var q=false;if(p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()].some(function(r){q=i(p.mDependencies[o.getId()].dependencies,r);return q;});}return!S&&!q;}
function n(C,s){var o=[];var p=[];var q=[];if(C.dependencyRemovedInLastBatch[s]){C.dependencyRemovedInLastBatch[s].forEach(function(r){var t=C.mDependencies[r];if(t&&t.dependencies.length===0&&!(t.controlsDependencies&&t.controlsDependencies.length)){p.push(r);o.push(t.changeObject.getId());if(t[P]){q.push(function(){return t[P]();});}}});}return U.execPromiseQueueSequentially(q).then(function(o,p,s){delete C.dependencyRemovedInLastBatch[s];p.forEach(function(r){delete C.mDependencies[r];});o.forEach(function(r){D.resolveDependenciesForChange(C,r,s);});return!!o.length;}.bind(undefined,o,p,s));}
D.createEmptyDependencyMap=function(){return{aChanges:[],mChanges:{},mDependencies:{},mDependentChangesOnMe:{},mControlsWithDependencies:{},dependencyRemovedInLastBatch:{}};};
D.addChangeAndUpdateDependencies=function(C,A,o){var p=e(C,A,o);j(C,A,p,o);};
D.insertChange=function(C,o,r){var I=o&&o.aChanges&&o.aChanges.indexOf(r);if(I>-1){o.aChanges.splice(I+1,0,C);}};
D.addRuntimeChangeAndUpdateDependencies=function(C,A,o,I){var p=e(C,A,o);j(C,A,p,I);};
D.processDependentQueue=function(C,A,s){return n(C,s).then(function(s,o){if(o){return D.processDependentQueue(C,A,s);}}.bind(undefined,s));};
D.addChangeApplyCallbackToDependency=function(C,s,o){C.mDependencies[s][P]=o;};
D.removeControlsDependencies=function(C,s){var o=C.mControlsWithDependencies[s];if(o){o.forEach(function(p){var q=C.mDependencies[p];if(q&&q.controlsDependencies&&q.controlsDependencies.length){var I=q.controlsDependencies.indexOf(s);if(I>-1){q.controlsDependencies.splice(I,1);delete C.mControlsWithDependencies[s];C.dependencyRemovedInLastBatch[s]=C.dependencyRemovedInLastBatch[s]||[];if(!i(C.dependencyRemovedInLastBatch[s],p)){C.dependencyRemovedInLastBatch[s].push(p);}}}});delete C.mControlsWithDependencies[s];}};
D.resolveDependenciesForChange=function(C,s,o){var p=C.mDependentChangesOnMe[s];if(p){p.forEach(function(K){var q=C.mDependencies[K];var I=q?q.dependencies.indexOf(s):-1;if(I>-1){q.dependencies.splice(I,1);C.dependencyRemovedInLastBatch[o]=C.dependencyRemovedInLastBatch[o]||[];if(!i(C.dependencyRemovedInLastBatch[o],K)){C.dependencyRemovedInLastBatch[o].push(K);}}});delete C.mDependentChangesOnMe[s];}};
D.removeChangeFromMap=function(C,s){Object.keys(C.mChanges).some(function(o){var p=C.mChanges[o];var q=p.map(function(E){return E.getId();}).indexOf(s);if(q!==-1){p.splice(q,1);return true;}});var I=C.aChanges.map(function(E){return E.getId();}).indexOf(s);if(I!==-1){C.aChanges.splice(I,1);}};
D.removeChangeFromDependencies=function(C,s,o){D.resolveDependenciesForChange(C,s,o);delete C.mDependencies[s];};
D.checkForOpenDependenciesForControl=function(C,s,A){return Object.keys(C.mDependencies).some(function(K){return C.mDependencies[K].changeObject.getDependentSelectorList().some(function(o){return J.getControlIdBySelector(o,A)===s;});});};
return D;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState',["sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/ChangePersistenceFactory","sap/base/util/restricted/_omit","sap/base/util/merge","sap/base/Log"],function(C,a,_,m,L){"use strict";var E={};
function i(c,p,o){if(o.getSelector().name!==p.extensionPointName){return false;}return c.changesHavingCorrectViewPrefix(p,o);}
function b(c,e){if(e.fragmentId){var o=c.getExtensionPointInfo&&c.getExtensionPointInfo();if(o){return e.fragmentId!==o.fragmentId;}return true;}return false;}
function r(c,e,o){var s=c.getSelector();if(e.closestAggregationBindingCarrier&&e.closestAggregationBinding){s=m(s,{id:e.closestAggregationBindingCarrier,idIsLocal:false});var d=c.getDefinition();var O={id:e.targetControl.getId(),idIsLocal:false};if(!d.dependentSelector){d.dependentSelector={};}if(o){c.originalSelectorToBeAdjusted=O;}else{d.dependentSelector.originalSelector=O;}d.content.boundAggregation=e.closestAggregationBinding;}else{s=m(s,{id:e.targetControl.getId(),idIsLocal:false});}c.setSelector(s);}
E.getChangesForExtensionPoint=function(c,p){if(!p.extensionPointName){L.error("Missing name from extension point info!");return Promise.resolve([]);}return c.getChangesForComponent().then(function(d){return d.filter(i.bind(this,c,p));});};
E.enhanceExtensionPointChanges=function(p,e){p.extensionPointName=e.name;var c=a.getChangePersistenceForControl(e.targetControl);return E.getChangesForExtensionPoint(c,p).then(function(d){var P=[];d.forEach(function(o){if(o.isInInitialState()&&!(o.getExtensionPointInfo&&o.getExtensionPointInfo())){o.setExtensionPointInfo(e);r(o,e,false);if(c.isChangeMapCreated()){c.addChangeAndUpdateDependencies(p.appComponent,o);}}else if(b(o,e)){var f=o.getDefinition();var g=_(f,["dependentSelector","fileName","selector","content"]);Object.keys(f.content).forEach(function(k){g[k]=f.content[k];});g.support.sourceChangeFileName=f.fileName||"";P.push(C.create({changeSpecificData:g,selector:{view:e.view,name:e.name}}).then(function(R){r(R,e,true);R.setExtensionPointInfo(e);R.setModuleName(f.moduleName);R.getDefinition().creation=f.creation;c.addChangeAndUpdateDependencies(p.appComponent,R,o);}));}});return Promise.all(P).then(function(){return d;});});};
return E;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/prepareChangesMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.changes;var a=c.map(function(o){return new C(o);});return{changes:a};};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger',["sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/base/Log"],function(C,L){"use strict";var c={addFavorite:function(v){v.setFavorite(true);},removeFavorite:function(v){v.setFavorite(false);},updateVariant:function(v,o){var e=o.getContent();if(e.executeOnSelection!==undefined){v.setExecuteOnSelection(e.executeOnSelection);}if(e.favorite!==undefined){v.setFavorite(e.favorite);}if(e.contexts){v.setContexts(e.contexts);}if(e.variantContent){v.setContent(e.variantContent);}var V=o.getText("variantName");if(V){v.setName(V);}}};
function g(m){var e={};m.changes.forEach(function(o){var v=o.getSelector().variantId||o.getContent().key;if(!e[v]){e[v]=[];}e[v].push(o);});return e;}
function l(v,o){L.error("No change handler for change with the ID '"+o.getId()+"' and type '"+o.getChangeType()+"' defined.\n"+"The variant '"+v.getId()+"'was not modified'");}
function a(p,v){var V={fileName:v.id||C.STANDARD_VARIANT_ID,persisted:v.persisted,content:v.content||{},texts:{variantName:{value:v.name||""}},selector:{persistencyKey:p}};if(v.favorite!==undefined){V.favorite=v.favorite;}if(v.executeOnSelection!==undefined){V.executeOnSelection=v.executeOnSelection;}return new C(V);}
function b(v,o){var e=c[o.getChangeType()]||l;e(v,o);v.addChange(o);}
function d(m,v){var V=v.getId();if(m[V]){m[V].forEach(function(o){b(v,o);});}}
return{merge:function(p,m,s){var v=m.nonPersistedVariants.concat(m.variants);var e=g(m);v.forEach(d.bind(undefined,e));var S;v.forEach(function(V){if(V.getContent()&&V.getContent().standardvariant){S=V;}});if(!S){S=a(p,s);}else{v=v.filter(function(V){return!V.getContent()||!V.getContent().standardvariant;});}d(e,S);S.setFavorite(true);S.setStandardVariant(true);m.byId[S.getId()]=S;var o=m.standardVariantChange;if(o){var E=o.getContent().executeOnSelect;S.addChange(o);S.setExecuteOnSelection(E);S.getContent().executeOnSelect=E;}m.standardVariant=S;return{standardVariant:S,variants:v};},createVariant:function(p,v){return a(p,v);},applyChangeOnVariant:b};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/compVariants/Utils',[],function(){"use strict";var U={};
U.getPersistencyKey=function(c){if(c){var v=c.getVariantManagement&&c.getVariantManagement()||c;if(v.getPersonalizableControlPersistencyKey){return v.getPersonalizableControlPersistencyKey();}return v.getPersistencyKey&&v.getPersistencyKey();}};
return U;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/compVariants/prepareCompVariantsMap',["sap/ui/fl/Change","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger"],function(C,U,a,b){"use strict";
function g(m,p){m[p]=m[p]||{byId:{},variants:[],nonPersistedVariants:[],changes:[],defaultVariants:[],standardVariantChange:undefined,standardVariant:undefined};return m[p];}
function i(m,p,v){v=v||[];var M=g(m,p);M.nonPersistedVariants.forEach(function(V){delete M.byId[V.getId()];});M.nonPersistedVariants=v.map(function(V){var o=Object.assign({id:V.id,persisted:false},V);o=b.createVariant(p,o);M.byId[V.id]=o;return o;});return M;}
function c(m,s,d){var o=s==="variants"?a:U;var f=m[s].map(function(e){var F=new o(e);F.setState(C.states.PERSISTED);return F;});f.forEach(function(F){var p=F.getSelector().persistencyKey;g(d,p).byId[F.getId()]=F;switch(s){case"standardVariants":g(d,p).standardVariantChange=F;break;default:g(d,p)[s].push(F);}});}
return function(p){var m={};m._getOrCreate=g.bind(undefined,m);m._initialize=i.bind(undefined,m);if(p.storageResponse.changes.comp){["variants","changes","defaultVariants","standardVariants"].forEach(function(s){c(p.storageResponse.changes.comp,s,m);});}return m;};});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher',["sap/base/util/includes","sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/changes/Reverter"],function(i,_,V,R){"use strict";
function a(p){var c=V.getControlChangesForVariant(Object.assign(_(p,["vmReference","variantsMap","reference"]),{changeInstance:true,vReference:p.currentVReference}));var n=V.getControlChangesForVariant(Object.assign(_(p,["vmReference","variantsMap","reference"]),{changeInstance:true,vReference:p.newVReference}));var m=Object.keys(p.changesMap).reduce(function(b,d){return b.concat(p.changesMap[d]);},[]);var C=m.map(function(o){return o.getId();});var f=c.reduce(function(F,o){var M=C.indexOf(o.getId());if(M>-1){F=F.concat(m[M]);}return F;},[]);var r=[];if(n.length>0){r=f.slice();f.some(function(o){if(n[0]&&o.getId()===n[0].getId()){n.shift();r.shift();}else{return true;}});}else{r=f;}var s={changesToBeReverted:r.reverse(),changesToBeApplied:n};return s;}
var S={switchVariant:function(p){return Promise.resolve().then(function(){p.changesMap=p.flexController._oChangePersistence.getChangesMapForComponent().mChanges;p.variantsMap=V.getContent(p.reference);var c=a(p);return R.revertMultipleChanges(c.changesToBeReverted,p).then(p.flexController.applyVariantChanges.bind(p.flexController,c.changesToBeApplied,p.appComponent)).then(V.setCurrentVariant.bind(null,p));});}};return S;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState',["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/includes","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/util/each","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/Change","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/Variant"],function(_,a,i,b,m,O,e,L,J,V,F,C,c,U,d){"use strict";var f={};var g={};
function h(p){var r=[];if(p.variantData.content.variantReference){r=f.getControlChangesForVariant(Object.assign(p,{vReference:p.variantData.content.variantReference,changeInstance:true}));return r.filter(function(R){return c.compareAgainstCurrentLayer(R.getDefinition().layer,p.variantData.content.layer)===-1;});}return r;}
function j(p){var v=f.getContent(p.reference);var q=O.get([p.vmReference,"variants"],v);return q||[];}
function k(v,p,A){var s=p.changeType;if(!v){v={};}if(!v[s]){v[s]=[];}if(A){v[s].push(p);return true;}return v[s].some(function(E,I){if(E.fileName===p.fileName){v[s].splice(I,1);return true;}});}
function l(p,q){var s=o(p);q[s].push(p);}
function n(p,q){var s=o(p);var r=-1;q[s].some(function(E,I){if(E.fileName===p.fileName){r=I;return true;}});if(r>-1){q[s].splice(r,1);}}
function o(p){switch(p.fileType){case"change":return"variantDependentControlChanges";case"ctrl_variant":return"variants";case"ctrl_variant_change":return"variantChanges";case"ctrl_variant_management_change":return"variantManagementChanges";default:}}
f.getContent=function(r){var v=F.getVariantsState(r);e(g[r],function(s,p){if(!v[s]){v[s]=p;}});return v;};
f.addFakeStandardVariant=function(r,s){var v=f.getContent(r);if(!v[Object.keys(s)[0]]){m(v,s);g[r]=g[r]||{};m(g[r],s);}else{L.error("Error in VariantManagementState.addFakeStandardVariant: Variant already in map");}};
f.clearFakedStandardVariants=function(r){delete g[r];};
f.resetContent=function(r){F.clearFilteredResponse(r);};
f.getControlChangesForVariant=function(p){var r=[];var v=f.getVariant(p);if(v){r=v.controlChanges;if(!p.changeInstance){r=r.map(function(q){return q.getDefinition();});}}return r;};
f.getVariantChangesForVariant=function(p){var v=f.getVariant(p);return v&&v.variantChanges||{};};
f.getVariant=function(p){var v;var q=f.getContent(p.reference);p.vReference=p.vReference||q[p.vmReference].defaultVariant;var r=j(p);r.some(function(s){if(s.content.fileName===p.vReference){v=s;return true;}});return v;};
f.getCurrentVariantReference=function(p){var v=f.getContent(p.reference);var q=v[p.vmReference];return q.currentVariant||q.defaultVariant;};
f.getVariantManagementReferences=function(r){var v=f.getContent(r);return Object.keys(v);};
f.addVariantToVariantManagement=function(p){var v=f.getContent(p.reference);var q=v[p.vmReference].variants.slice().splice(1);var I=V.getIndexToSortVariant(q,p.variantData);if(p.variantData.content.variantReference){var r=h(p);p.variantData.controlChanges=r.concat(p.variantData.controlChanges);}v[p.vmReference].variants.splice(I+1,0,p.variantData);return I+1;};
f.removeVariantFromVariantManagement=function(p){var I;var v=f.getContent(p.reference);var q=v[p.vmReference].variants.some(function(r,s){var t=new d(r);if(t.getId()===p.variant.getId()){I=s;return true;}});if(q){v[p.vmReference].variants.splice(I,1);}return I;};
f.setVariantData=function(p){var v=f.getContent(p.reference);var q=v[p.vmReference].variants;var r=q[p.previousIndex];Object.keys(p.variantData).forEach(function(P){if(r.content.content[P]){r.content.content[P]=p.variantData[P];}});if(r.content.fileName!==p.vmReference){q.splice(p.previousIndex,1);var s=V.getIndexToSortVariant(q.slice(1),r);q.splice(s+1,0,r);return s+1;}q.splice(p.previousIndex,1,r);return p.previousIndex;};
f.addChangeToVariant=function(p){var E=f.getControlChangesForVariant(Object.assign(p,{changeInstance:true}));var q=E.map(function(r){return r.getDefinition().fileName;});if(!i(q,p.change.getDefinition().fileName)){var v=f.getVariant(p);v.controlChanges=E.concat([p.change]);return true;}return false;};
f.removeChangeFromVariant=function(p){var q=f.getControlChangesForVariant(Object.assign(p,{changeInstance:true}));var v=f.getVariant(p);var r=false;if(v){v.controlChanges=q.filter(function(s){if(!r&&s.getId()===p.change.getId()){r=true;return false;}return true;});}return r;};
f.getInitialChanges=function(p){var v=f.getContent(p.reference);return Object.keys(v).reduce(function(I,s){if((p.vmReference&&p.vmReference===s)||!p.vmReference){var q=v[s].currentVariant?"currentVariant":"defaultVariant";var A={vmReference:s,vReference:v[s][q],reference:p.reference,changeInstance:p.changeInstance};return I.concat(f.getControlChangesForVariant(Object.assign({},p,A)));}return I;},[]);};
f.fillVariantModel=function(p){var v=f.getContent(p.reference);return Object.keys(v).reduce(function(q,s){q[s]={defaultVariant:v[s].defaultVariant,variants:[]};if(v[s].currentVariant){q[s].currentVariant=v[s].currentVariant;}j(Object.assign(p,{vmReference:s})).forEach(function(r,t){q[s].variants[t]=JSON.parse(JSON.stringify({key:r.content.fileName,title:r.content.content.title,layer:r.content.layer,favorite:r.content.content.favorite,executeOnSelect:r.content.content.executeOnSelect,visible:r.content.content.visible,author:O.get("content.support.user",r)}));});return q;},{});};
f.updateChangesForVariantManagementInMap=function(p){var v=f.getContent(p.reference);var q=v[p.vmReference];if(p.changeContent.fileType==="ctrl_variant_change"){q.variants.some(function(r){if(r.content.fileName===p.changeContent.selector.id){k(r.variantChanges,p.changeContent,p.add);}});}else if(p.changeContent.fileType==="ctrl_variant_management_change"){k(q.variantManagementChanges,p.changeContent,p.add);}};
f.setCurrentVariant=function(p){var v=f.getContent(p.reference);if(O.get([p.vmReference],v)){v[p.vmReference].currentVariant=p.newVReference;}};
f.updateVariantsState=function(p){var v=f.getContent(p.reference);if(b(v)){L.error("Variant state is not initialized yet");return;}var q=F.getFlexObjectsFromStorageResponse(p.reference);if(p.changeToBeAddedOrDeleted){switch(p.changeToBeAddedOrDeleted.getPendingAction()){case"NEW":l(p.changeToBeAddedOrDeleted.getDefinition(),q);break;case"DELETE":n(p.changeToBeAddedOrDeleted.getDefinition(),q);break;default:}}};
f.waitForInitialVariantChanges=function(p){var q=f.getInitialChanges({vmReference:p.vmReference,reference:p.reference,changeInstance:true});var s=q.reduce(function(t,u){if(U.indexOfObject(t,u.getSelector())===-1){t.push(u.getSelector());}return t;},[]);var r=[];s.map(function(S){var t=J.bySelector(S,p.appComponent);if(t){r.push(t);}});return p.flexController.waitForChangesToBeApplied(r);};
return f;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/prepareVariantsMap',["sap/base/util/ObjectPath","sap/base/Log","sap/ui/fl/Change","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/base/util/isEmptyObject","sap/base/util/each","sap/base/util/values","sap/base/util/merge","sap/ui/fl/LayerUtils"],function(O,L,C,i,V,a,e,v,m,b){"use strict";
function c(z,A){var B=m({},z);A.forEach(function(D){B[D.fileName]={content:D,controlChanges:[],variantChanges:{}};});return B;}
function d(z,A){var B=m({},z);A.forEach(function(D){var E=new C(D);E.setState(C.states.PERSISTED);B[D.variantReference]=B[D.variantReference]||s(D.variantReference);B[D.variantReference].controlChanges.push(E);});return B;}
function f(z,A){var B=m({},z);A.forEach(function(D){B[D.selector.id]=B[D.selector.id]||s(D.selector.id);var E=B[D.selector.id].variantChanges[D.changeType]||[];E.push(D);B[D.selector.id].variantChanges[D.changeType]=E;});return B;}
function g(z){var A=m({},z);v(z).forEach(function(B){var S=O.get("variantChanges.setVisible",B);if(S&&S.length>0){var D=w(S);if(!D.getContent().visible&&D.getContent().createdByReset){delete A[B.content.fileName];}}});return A;}
function r(z){var A=m({},z);v(A).forEach(function(B){var D=B.content.variantReference;var R;if(D){R=j(A,D,B.content.variantManagementReference);}B.controlChanges=h(R,B.content.layer).concat(B.controlChanges);});return A;}
function h(R,z){if(!R){return[];}return v(m({},R.controlChanges)).filter(function(A){return b.compareAgainstCurrentLayer(A.getLayer(),z)===-1;});}
function j(z,A,B){var R=z[A];if(!R&&A===B){R=s(A);z[A]=R;}return R;}
function k(S){var z={};z=c(z,S.variants);z=d(z,S.variantDependentControlChanges);z=f(z,S.variantChanges);z=g(z);z=r(z);return z;}
function l(){return{variantManagementChanges:{},variants:[]};}
function n(R,z,T){var A=m({},R);v(z).forEach(function(B){var D=B.content.variantManagementReference;if(!A[D]){A[D]=l();}B=y(B);B=u(B);if(!A[D].currentVariant&&B.content.content.visible&&i(T,B.content.fileName)){A[D].currentVariant=B.content.fileName;}A[D].defaultVariant=D;var S=V.getIndexToSortVariant(A[D].variants,B);A[D].variants.splice(S,0,B);});return A;}
function o(R,z){var A=m({},R);z.forEach(function(B){var D=B.selector.id;if(!A[D]){A[D]=l();}var E=B.changeType;if(!A[D].variantManagementChanges[E]){A[D].variantManagementChanges[E]=[];}A[D].variantManagementChanges[E].push(B);A[D]=t(A[D]);});return A;}
function p(R){var z=m({},R);e(z,function(A,B){var S=B.variants.findIndex(function(E){return E.content.fileName===A;});var D;if(S===-1){D=s(A);}else{D=B.variants[S];B.variants.splice(S,1);}B.variants.unshift(D);});return z;}
function q(z,A,T){var R={};R=n(R,z,T);R=o(R,A);R=p(R);return R;}
function s(z){var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");return{content:{fileName:z,variantManagementReference:z,variantReference:"",content:{title:R.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true},support:{user:V.DEFAULT_AUTHOR}},variantChanges:{},controlChanges:[]};}
function t(z){var A=m({},z);var B=A.variantManagementChanges;var D;if(!a(B)){D=w(B["setDefault"]);if(D){A.defaultVariant=D.getContent().defaultVariant;}}return A;}
function u(z){var A=m({},z);var B=A.variantChanges;var D;e(B,function(E,F){switch(E){case"setTitle":D=w(F);if(D){A.content.content.title=D.getText("title");}break;case"setFavorite":D=w(F);if(D){A.content.content.favorite=D.getContent().favorite;}break;case"setExecuteOnSelect":D=w(F);if(D){A.content.content.executeOnSelect=D.getContent().executeOnSelect;}break;case"setVisible":D=w(F);if(D){A.content.content.visible=D.getContent().visible;}break;default:L.error("No valid changes on variant "+A.content.content.title+" available");}});return A;}
function w(z){if(z.length>0){return new C(z[z.length-1]);}return false;}
function x(T){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(T);}
function y(z){var A=m({},z);if(A.content.fileName===A.content.variantManagementReference){if(!O.get("content.support.user",A)){var S={support:{user:V.DEFAULT_AUTHOR}};m(A.content,S);}}if(!A.content.content.favorite){A.content.content.favorite=true;}if(!A.content.content.visible){A.content.content.visible=true;}if(!A.content.content.executeOnSelect){A.content.content.executeOnSelect=false;}var T=A.content.content.title.match(/.i18n>(\w+)./);if(T){A.content.content.title=x(T[1]);}return A;}
return function(P){if(a(P)||!O.get("storageResponse.changes.variants",P)){return{};}var T=O.get(["technicalParameters",V.VARIANT_TECHNICAL_PARAMETER],P.componentData)||[];var z=k(P.storageResponse.changes);z=q(z,P.storageResponse.changes.variantManagementChanges,T);return z;};});
sap.ui.predefine('sap/ui/fl/apply/api/ControlVariantApplyAPI',["sap/base/Log","sap/ui/fl/ControlPersonalizationAPI","sap/ui/fl/Utils"],function(L,O,U){"use strict";var C={clearVariantParameterInURL:function(p){O.clearVariantParameterInURL(p.control);},activateVariant:function(p){return O.activateVariant(p.element,p.variantReference);},attachVariantApplied:function(p){var c=p.selector.id&&sap.ui.getCore().byId(p.selector.id)||p.selector;var a=U.getAppComponentForControl(c);var v=a.getModel(U.VARIANT_MODEL_NAME);v.attachVariantApplied({vmControlId:p.vmControlId,control:c,callback:p.callback,callAfterInitialVariant:p.callAfterInitialVariant});},detachVariantApplied:function(p){var c=p.selector.id&&sap.ui.getCore().byId(p.selector.id)||p.selector;var a=U.getAppComponentForControl(c);var v=a.getModel(U.VARIANT_MODEL_NAME);v.detachVariantApplied(p.vmControlId,c.getId());}};return C;});
sap.ui.predefine('sap/ui/fl/apply/api/DelegateMediatorAPI',["sap/ui/fl/apply/_internal/DelegateMediator"],function(D){"use strict";var a={registerDefaultDelegate:function(p){D.registerDefaultDelegate(p);},getDelegateForControl:function(p){return D.getDelegateForControl(p.control,p.modifier,p.modelType,p.supportsDefault);},getKnownDefaultDelegateLibraries:function(){return D.getKnownDefaultDelegateLibraries();},getRequiredLibrariesForDefaultDelegate:function(p){return D.getRequiredLibrariesForDefaultDelegate(p.delegateName,p.control,p.modelType);}};return a;},false);
sap.ui.predefine('sap/ui/fl/apply/api/FlexRuntimeInfoAPI',["sap/ui/fl/ControlPersonalizationAPI","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/ChangesController"],function(O,U,C){"use strict";var F={isPersonalized:function(p){return O.isPersonalized(p.selectors,p.changeTypes);},waitForChanges:function(p){var f=p.element||p.selectors[0];var w=p.element||p.selectors;return C.getFlexControllerInstance(f).waitForChangesToBeApplied(w);},isFlexSupported:function(p){return!!U.getAppComponentForControl(p.element);},hasVariantManagement:function(p){return O.hasVariantManagement(p.element);}};return F;});
sap.ui.predefine('sap/ui/fl/apply/api/SmartVariantManagementApplyAPI',["sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/Utils","sap/ui/fl/LayerUtils"],function(C,a,F,M,U,L){"use strict";
function g(c){var r=M.getFlexReferenceForControl(c);var p=a.getPersistencyKey(c);var m=F.getCompVariantsMap(r);return m._getOrCreate(p);}
function b(p){var c=p.control;var r=M.getFlexReferenceForControl(c);return F.initialize({reference:r,componentData:{},manifest:U.getAppDescriptor(c),componentId:U.getAppComponentForControl(c).getId()}).then(function(){var P=a.getPersistencyKey(c);var m=F.getCompVariantsMap(r);return m._initialize(P,p.variants);});}
var S={loadVariants:function(p){return b(p).then(function(c){var P=a.getPersistencyKey(p.control);return C.merge(P,c,p.standardVariant);});},isApplicationVariant:function(p){var c=p.control;if(U.isApplicationVariant(c)){return true;}var o=U.getComponentForControl(c);if(o&&o.getAppComponent){o=o.getAppComponent();if(o){return true;}}return false;},isVendorLayer:function(){return L.isVendorLayer();},isVariantDownport:function(){return S.isVendorLayer()&&U.isHotfixMode();},getDefaultVariantId:function(p){var d=g(p.control).defaultVariants;var c=d[d.length-1];return c?c.getContent().defaultVariantName:"";}};return S;});
sap.ui.predefine('sap/ui/fl/apply/api/UI2PersonalizationApplyAPI',["sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/ChangesController"],function(U,F,C){"use strict";var a={load:function(p){var f=C.getFlexControllerInstance(p.selector);p.reference=f.getComponentName();if(!p.reference||!p.containerKey){return Promise.reject(new Error("not all mandatory properties were provided for the loading of the personalization"));}return F.initialize({componentId:p.selector.getId()}).then(function(){return U.getPersonalization(p.reference,p.containerKey,p.itemName);});}};return a;});
sap.ui.predefine('sap/ui/fl/initial/_internal/Storage',["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/Utils","sap/ui/fl/initial/_internal/StorageResultMerger","sap/ui/fl/initial/_internal/storageResultDisassemble"],function(S,F,a,s){"use strict";
function _(C,o,p){if(!o.layers||(o.layers[0]!=="ALL"&&o.layers.indexOf("CUSTOMER")===-1)){delete C.version;return C;}if(p.version!==undefined){C.version=p.version;return C;}var v=F.getUrlParameter(sap.ui.fl.Versions.UrlParameter);if(v===null){delete C.version;}else{C.version=parseInt(v);}return C;}
function b(p,C){var h=C.map(function(o){var i=Object.assign({},p,{url:o.url,path:o.path});i=_(i,o,p);return o.loadConnectorModule.loadFlexData(i).then(function(r){return r||S.getEmptyFlexDataResponse();}).catch(S.logAndResolveDefault.bind(undefined,S.getEmptyFlexDataResponse(),o,"loadFlexData"));});return Promise.all(h);}
function c(r){var h=[];r.forEach(function(R){if(Array.isArray(R)){h=h.concat(R);}else{h.push(R);}});return h;}
function d(r){return r.map(function(R){return s(R);});}
function e(r){return Promise.resolve(r).then(c).then(d).then(c).then(a.merge);}
function f(p){return S.getStaticFileConnector().then(b.bind(this,p));}
var g={};
g.completeFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return Promise.all([f(p),p.partialFlexData]).then(e);};
g.loadFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return S.getLoadConnectors().then(b.bind(this,p)).then(e);};
return g;});
sap.ui.predefine('sap/ui/fl/initial/_internal/StorageResultMerger',["sap/base/util/merge","sap/base/util/ObjectPath"],function(m,O){"use strict";var s={};
function c(r,p){var f=r.reduce(function(f,R){if(O.get(p,R)){return f.concat(O.get(p,R));}return f;},[]);var F=[];return f.filter(function(o){var b=o.fileName;var d=F.indexOf(b)!==-1;if(d){return false;}F.push(b);return true;});}
function a(r){return r.reduce(function(u,R){return m({},u,R.ui2personalization);},{});}
function _(r){return r.reduce(function(C,R){return R.cacheKey?C+=R.cacheKey:C;},"")||null;}
s.merge=function(r){return{appDescriptorChanges:c(r,"appDescriptorChanges"),changes:c(r,"changes"),ui2personalization:a(r),comp:{variants:c(r,"comp.variants"),changes:c(r,"comp.changes"),defaultVariants:c(r,"comp.defaultVariants"),standardVariants:c(r,"comp.standardVariants")},variants:c(r,"variants"),variantChanges:c(r,"variantChanges"),variantDependentControlChanges:c(r,"variantDependentControlChanges"),variantManagementChanges:c(r,"variantManagementChanges"),cacheKey:_(r)};};
return s;});
sap.ui.predefine('sap/ui/fl/initial/_internal/StorageUtils',["sap/base/security/encodeURLParameters","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/base/util/isEmptyObject"],function(e,L,c,d,i){"use strict";var C={load:{LrepConnector:"sap/ui/fl/initial/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/initial/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/initial/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/initial/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/initial/_internal/connectors/StaticFileConnector",ObjectStorageConnector:"sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"},write:{LrepConnector:"sap/ui/fl/write/_internal/connectors/LrepConnector",NeoLrepConnector:"sap/ui/fl/write/_internal/connectors/NeoLrepConnector",PersonalizationConnector:"sap/ui/fl/write/_internal/connectors/PersonalizationConnector",KeyUserConnector:"sap/ui/fl/write/_internal/connectors/KeyUserConnector",StaticFileConnector:"sap/ui/fl/write/_internal/connectors/StaticFileConnector",JsObjectConnector:"sap/ui/fl/write/_internal/connectors/JsObjectConnector",ObjectPathConnector:"sap/ui/fl/write/_internal/connectors/ObjectPathConnector",LocalStorageConnector:"sap/ui/fl/write/_internal/connectors/LocalStorageConnector",SessionStorageConnector:"sap/ui/fl/write/_internal/connectors/SessionStorageConnector"}};var I="sap/ui/fl/initial/_internal/connectors/";var S={connector:"StaticFileConnector"};
function _(l,v){return l.filter(function(a){return v.indexOf(a)!==-1||v[0]==="ALL";});}
function s(r){function b(o,a){return new Date(o.creation)-new Date(a.creation);}["changes","variantChanges","variants","variantDependentControlChanges","variantManagementChanges"].forEach(function(a){r[a]=r[a].sort(b);});if(r.comp){["changes","defaultVariants","standardVariants"].forEach(function(a){r.comp[a]=r.comp[a].sort(b);});}return r;}
function f(n,l,m){return m.map(function(a){var b=a.connector;var h;if(!a.loadConnector&&!a.applyConnector&&!a.loadConnector){h=l?C.load[b]:C.write[b];}else if(l){h=a.loadConnector||a.applyConnector;}else{h=a.writeConnector||"sap/ui/fl/write/connectors/BaseConnector";}return h;});}
function g(n,l,m){var a=f(n,l,m);return new Promise(function(r){sap.ui.require(a,function(){Array.from(arguments).forEach(function(o,b){if(!m[b].layers){m[b].layers=o.layers;}else{m[b].layers=_(m[b].layers,o.layers);}if(l){m[b].loadConnectorModule=o;}else{m[b].writeConnectorModule=o;}});r(m);});});}
return{getConnectors:function(n,l){var a=sap.ui.getCore().getConfiguration().getFlexibilityServices();var m=[];if(l){m=[S];}m=m.concat(a);return g(n,l,m);},getLoadConnectors:function(){return this.getConnectors(I,true);},getStaticFileConnector:function(){return g(I,true,[S]);},logAndResolveDefault:function(r,o,F,E){L.error("Connector ("+o.connector+") failed call '"+F+"': "+E+"\nApplication startup continues without data from this storage.");return r;},filterAndSortResponses:function(G){var r=[];Object.keys(G).forEach(function(l){r.push(G[l]);});r=r.filter(function(R){return R.changes.length>0||R.variants.length>0||R.variantChanges.length>0||R.variantManagementChanges.length>0||R.variantDependentControlChanges.length>0||R.comp.variants.length>0||R.comp.changes.length>0||R.comp.defaultVariants.length>0||R.comp.standardVariants.length>0;});r.sort(function(a,b){return a.index-b.index;});return r;},getGroupedFlexObjects:function(F){var G={};Object.keys(c).forEach(function(l){G[l]=this.getEmptyFlexDataResponse();G[l].index=d.getLayerIndex(l);}.bind(this));F.forEach(function(o){var l=o.layer;if(o.fileType==="ctrl_variant"&&o.variantManagementReference){G[l].variants.push(o);}else if(o.fileType==="ctrl_variant_change"){G[l].variantChanges.push(o);}else if(o.fileType==="ctrl_variant_management_change"){G[l].variantManagementChanges.push(o);}else if(o.fileType==="variant"){G[l].comp.variants.push(o);}else if(o.fileType==="change"){if(o.variantReference){G[l].variantDependentControlChanges.push(o);}else{switch(o.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":G[l].comp.changes.push(o);break;case"defaultVariant":G[l].comp.defaultVariants.push(o);break;case"standardVariant":G[l].comp.standardVariants.push(o);break;default:G[l].changes.push(o);}}}});Object.keys(G).forEach(function(l){s(G[l]);});return G;},getEmptyFlexDataResponse:function(){return Object.assign({},{appDescriptorChanges:[],changes:[],comp:{variants:[],changes:[],defaultVariants:[],standardVariants:[]},variants:[],variantChanges:[],variantDependentControlChanges:[],variantManagementChanges:[],ui2personalization:{}});},isStorageResponseFilled:function(r){return Object.keys(r||{}).some(function(k){if(Array.isArray(r[k])){return r[k].length!==0;}return!i(r[k]);});},addLanguageInfo:function(p){if(!p){p={};}p["sap-language"]=sap.ui.getCore().getConfiguration().getLanguage();}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/BackendConnector',["sap/ui/fl/initial/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(I,_){"use strict";return{xsrfToken:undefined,settings:undefined,loadFlexData:function(p){var P=_(p,["version"]);if(this.isLanguageInfoRequired){I.addLanguageInfo(P);}var d=I.getUrl(this.ROUTES.DATA,p,P);return I.sendRequest(d,"GET",{xsrfToken:this.xsrfToken}).then(function(r){var R=r.response;if(r.xsrfToken){this.xsrfToken=r.xsrfToken;}if(r.etag){R.cacheKey=r.etag;}R.changes=R.changes.concat(R.compVariants||[]);if(R.settings){this.settings=R.settings;}return R;}.bind(this));}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/KeyUserConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(m,B,L){"use strict";var P="/flex/keyuser";var A="/v1";var K=m({},B,{layers:[L.CUSTOMER],ROUTES:{DATA:P+A+"/data/"},isLanguageInfoRequired:true});return K;});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/LrepConnector',["sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Utils","sap/ui/dom/includeScript"],function(U,F,i){"use strict";var R={DATA:"/flex/data/",MODULES:"/flex/modules/"};return{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules:function(f){return new Promise(function(r,a){i(f,undefined,r,a);});},_addClientInfo:function(p){var c=F.getUrlParameter("sap-client");if(!p&&c){p={};}if(c){p["sap-client"]=c;}},loadFlexData:function(p){if(p.cacheKey==="<NO CHANGES>"){return Promise.resolve();}var P={};if(p.allContexts){P["allContexts"]=p.allContexts;}this._addClientInfo(P);U.addLanguageInfo(P);var a;if(p.appDescriptor&&p.appDescriptor["sap.app"]){a=p.appDescriptor["sap.app"].id;}var d=U.getUrl(R.DATA,p,P);return U.sendRequest(d,"GET",{xsrfToken:this.xsrfToken,siteId:p.siteId,sAppDescriptorId:a}).then(function(r){var o=r.response;if(r.xsrfToken){this.xsrfToken=r.xsrfToken;}if(r.etag){o.cacheKey=r.etag;}else if(p.cacheKey){o.cacheKey=p.cacheKey;}o.changes=o.changes.concat(o.compVariants||[]);if(o.settings){this.settings=o.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable;}if(!o.loadModules){return o;}var m=U.getUrl(R.MODULES,p,P);return this._loadModules(m).then(function(){return o;});}.bind(this));}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/NeoLrepConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/LrepConnector"],function(m,L){"use strict";return m({},L,{});});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/PersonalizationConnector',["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(m,B,L){"use strict";var P="/flex/personalization";var A="/v1";var a=m({},B,{layers:[L.USER],ROUTES:{DATA:P+A+"/data/"}});return a;});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/StaticFileConnector',["sap/base/Log","sap/base/util/LoaderExtensions"],function(L,a){"use strict";
function _(r,b){var B=r.replace(/\./g,"/")+"/changes/"+b+".json";var c=!!sap.ui.loader._.getModuleState(B);var C=sap.ui.getCore().getConfiguration();if(c||C.getDebug()||C.getComponentPreload()==="off"){try{return a.loadResource(B);}catch(e){if(e.name.includes("SyntaxError")){L.error(e);}L.warning("flexibility did not find a "+b+".json for the application: "+r);}}}
return{loadFlexData:function(p){var c=p.componentName;if(!c){c=p.reference.replace(/.Component/g,"");}var f=_(c,"flexibility-bundle");if(f){f.changes=f.changes.concat(f.compVariants);delete f.compVariants;return Promise.resolve(f);}var C=_(c,"changes-bundle");if(C){return Promise.resolve({changes:C});}return Promise.resolve();}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/connectors/Utils',["sap/base/security/encodeURLParameters"],function(a){"use strict";var T=0;var _=function(r,u){var e=new Error(r.statusText);e.status=r.status;e.userMessage=u;return e;};var b=function(t){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(t);};return{addLanguageInfo:function(p){if(!p){p={};}p["sap-language"]=sap.ui.getCore().getConfiguration().getLanguage();},getUrl:function(r,p,P){if(!r||!p.url){throw new Error("Not all necessary parameters were passed");}var u=p.url+r;if(p.cacheKey){u+="~"+p.cacheKey+"~/";}if(p.reference){u+=p.reference;}else if(p.fileName){u+=p.fileName;}if(P){Object.keys(P).forEach(function(k){if(P[k]===undefined){delete P[k];}});var q=a(P);if(q.length>0){u+="?"+q;}}return u;},sendRequest:function(u,m,p){m=m||"GET";m=m.toUpperCase();return new Promise(function(r,c){var x=new XMLHttpRequest();x.open(m,u);x.timeout=T;if((m==="GET"||m==="HEAD")&&(!p||!p.xsrfToken)){x.setRequestHeader("X-CSRF-Token","fetch");}if((m==="POST"||m==="PUT"||m==="DELETE")&&p&&p.xsrfToken){x.setRequestHeader("X-CSRF-Token",p.xsrfToken);}if(p&&p.contentType){x.setRequestHeader("Content-Type",p.contentType);}if(p&&p.siteId){x.setRequestHeader("X-LRep-Site-Id",p.siteId);}if(p&&p.sAppDescriptorId){x.setRequestHeader("X-LRep-AppDescriptor-Id",p.sAppDescriptorId);}if(p&&p.dataType){x.responseType=p.dataType;}x.onload=function(){if(x.status>=200&&x.status<400){try{var R={};if(x.status!==204&&x.status!==205){if(!x.response&&x.responseText){x.response=x.responseText;}if(x.response){R.response=typeof x.response==="string"?JSON.parse(x.response):x.response;}}R.status=x.status;if(x.getResponseHeader("X-CSRF-Token")){R.xsrfToken=x.getResponseHeader("X-CSRF-Token");}if(x.getResponseHeader("Etag")){R.etag=x.getResponseHeader("Etag");}r(R);}catch(E){E.userMessage=b("MSG_LOADING_SERVER_RESPONSE_ERROR");c(E);}}else{var s="";try{var o=JSON.parse(x.response);if(Array.isArray(o.messages)&&o.messages.length){s=o.messages.reduce(function(C,d){return C.concat(d.severity==="Error"?d.text+"\n":"");},s);}}catch(e){}c(_(x,s));}};x.ontimeout=function(){c(_(x,b("MSG_CONNECTION_TIMEOUT_ERROR")));};x.onerror=function(){c(_(x,b("MSG_NETWORK_ERROR")));};if(p&&p.payload){x.send(p.payload);}else{x.send();}});}};});
sap.ui.predefine('sap/ui/fl/initial/_internal/storageResultDisassemble',["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/merge","sap/base/util/isEmptyObject"],function(S,m,i){"use strict";
function _(f,c){if(c.content.fileName!==c.content.variantManagementReference){f.push(c.content);}c.controlChanges.forEach(function(o){f.push(o);});for(var C in c.variantChanges){f=f.concat(c.variantChanges[C]);}return f;}
function a(c){var I=true;if(c){Object.keys(c).some(function(k){if(c[k].length){I=false;return true;}});}return I;}
return function(r){var f;if(!i(r.variantSection)){f=r.changes||[];for(var v in r.variantSection){var V=r.variantSection[v];for(var c in V.variantManagementChanges){f=f.concat(V.variantManagementChanges[c]);}f=V.variants.reduce(_,f);}var g=S.getGroupedFlexObjects(f);var d=S.filterAndSortResponses(g);delete r.changes;delete r.variantSection;m(d[0]||{},r);return d;}if(a(r.comp)){f=r.changes||[];r.comp={variants:[],changes:[],defaultVariants:[],standardVariants:[]};f.slice().reverse().forEach(function(F,n,A){var M=false;if(F.fileType==="variant"){r.comp.variants.unshift(F);M=true;}else{switch(F.changeType){case"addFavorite":case"removeFavorite":case"updateVariant":r.comp.changes.unshift(F);M=true;break;case"defaultVariant":r.comp.defaultVariants.unshift(F);M=true;break;case"standardVariant":r.comp.standardVariants.unshift(F);M=true;break;default:break;}}if(M){var b=A.length-1-n;r.changes.splice(b,1);}});}return[r];};});
sap.ui.predefine('sap/ui/fl/requireAsync',[],function(){"use strict";return function(m){return new Promise(function(r,R){sap.ui.require([m],function(M){r(M);},function(e){R(e);});});};});
sap.ui.predefine('sap/ui/fl/variants/VariantManagement',["sap/ui/model/Context","sap/ui/model/PropertyBinding","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/layout/HorizontalLayout","sap/ui/layout/Grid","sap/m/SearchField","sap/m/RadioButton","sap/m/ColumnListItem","sap/m/Column","sap/m/Text","sap/m/Bar","sap/m/Table","sap/m/Page","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/ToggleButton","sap/m/CheckBox","sap/m/Dialog","sap/m/Input","sap/m/Label","sap/m/Title","sap/m/ResponsivePopover","sap/m/SelectList","sap/m/ObjectIdentifier","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/VBox","sap/ui/events/KeyCodes","sap/ui/core/library","sap/m/library","sap/ui/fl/Utils","sap/ui/fl/registry/Settings"],function(C,P,J,F,a,D,I,b,c,H,G,S,R,d,f,T,B,g,h,i,j,k,l,m,n,o,L,p,q,r,O,s,t,V,K,u,v,w,x){"use strict";var y=v.OverflowToolbarPriority;var z=v.ButtonType;var A=v.PlacementType;var E=v.PopinDisplay;var M=v.ScreenSize;var N=u.ValueState;var Q=u.TextAlign;
var U=b.extend("sap.ui.fl.variants.VariantManagement",{
metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.ui.fl",designtime:"sap/ui/fl/designtime/variants/VariantManagement.designtime",properties:{showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},manualVariantKey:{type:"boolean",group:"Misc",defaultValue:false},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:true},modelName:{type:"string",group:"Misc",defaultValue:null},updateVariantInURL:{type:"boolean",group:"Misc",defaultValue:false},resetOnContextChange:{type:"boolean",group:"Misc",defaultValue:true},executeOnSelectionForStandardDefault:{type:"boolean",group:"Misc",defaultValue:false},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""}},associations:{"for":{type:"sap.ui.core.Control",multiple:true}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},execute:{type:"boolean"},def:{type:"boolean"}}},cancel:{},manage:{},initialized:{},select:{parameters:{key:{type:"string"}}}}},
renderer:{apiVersion:2,render:function(e,W){e.openStart("div",W).class("sapUiFlVarMngmt").attr("title",W._oRb.getText("VARIANT_MANAGEMENT_TRIGGER_TT")).openEnd();e.renderControl(W.oVariantLayout);e.close("div");}}
});
U.INNER_MODEL_NAME="$sapUiFlVariants";U.MAX_NAME_LEN=100;U.COLUMN_FAV_IDX=0;U.COLUMN_NAME_IDX=1;U.COLUMN_EXEC_IDX=3;
U.prototype.init=function(){this._sModelName=w.VARIANT_MODEL_NAME;this.attachModelContextChange(this._setModel,this);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._createInnerModel();this.oVariantInvisibleText=new I();this.oVariantText=new p(this.getId()+"-text",{text:{path:'currentVariant',model:this._sModelName,formatter:function(W){var X="";if(W){X=this.getSelectedVariantText(W);this._setInvisibleText(X,this.getModified());}return X;}.bind(this)}});this.oVariantText.addStyleClass("sapUiFlVarMngmtClickable");this.oVariantText.addStyleClass("sapUiFlVarMngmtTitle");if(D.system.phone){this.oVariantText.addStyleClass("sapUiFlVarMngmtTextPhoneMaxWidth");}else{this.oVariantText.addStyleClass("sapUiFlVarMngmtTextMaxWidth");}var e=new L(this.getId()+"-modified",{text:"*",visible:{path:"modified",model:this._sModelName,formatter:function(W){var X=this.getCurrentVariantKey();if(X){this._setInvisibleText(this.getSelectedVariantText(X),W);}return((W===null)||(W===undefined))?false:W;}.bind(this)}});e.setVisible(false);e.addStyleClass("sapUiFlVarMngmtModified");e.addStyleClass("sapUiFlVarMngmtClickable");e.addStyleClass("sapMTitleStyleH4");this.oVariantPopoverTrigger=new l(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:z.Transparent,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisibleText);this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtn");this.oVariantPopoverTrigger.addStyleClass("sapMTitleStyleH4");this.oVariantLayout=new H({content:[this.oVariantText,e,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapUiFlVarMngmtLayout");e.setVisible(false);this.oVariantModifiedText=e;this.oVariantInvisibleText.toStatic();this.addDependent(this.oVariantLayout);};
U.prototype.getOverflowToolbarConfig=function(){var e={canOverflow:false,invalidationEvents:["save","manage","select"]};return e;};
U.prototype.getTitle=function(){return this.oVariantText;};
U.prototype._setInvisibleText=function(e,W){var X;if(e){if(W){X="VARIANT_MANAGEMENT_SEL_VARIANT_MOD";}else{X="VARIANT_MANAGEMENT_SEL_VARIANT";}this.oVariantInvisibleText.setText(this._oRb.getText(X,[e]));}};
U.prototype._createInnerModel=function(){var e=new J({showExecuteOnSelection:false,showSetAsDefault:true,editable:true,popoverTitle:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTS")});this.setModel(e,U.INNER_MODEL_NAME);this._bindProperties();this._updateInnerModelWithShowSaveAsProperty();};
U.prototype._bindProperties=function(){this.bindProperty("showSetAsDefault",{path:"/showSetAsDefault",model:U.INNER_MODEL_NAME});this.bindProperty("editable",{path:"/editable",model:U.INNER_MODEL_NAME});};
U.prototype._updateInnerModelWithShowSaveAsProperty=function(){x.getInstance().then(function(e){this.getModel(U.INNER_MODEL_NAME).setProperty("/showSaveAs",e.isVariantPersonalizationEnabled());}.bind(this));};
U.prototype._getShowExecuteOnSelection=function(){var e=this.getModel(U.INNER_MODEL_NAME);if(e){return e.getProperty("/showExecuteOnSelection");}return false;};
U.prototype._setShowExecuteOnSelection=function(e){var W=this.getModel(U.INNER_MODEL_NAME);if(W){W.setProperty("/showExecuteOnSelection",e);}};
U.prototype.setExecuteOnSelection=function(e){var W=this.getModel(this._sModelName);if(W&&this.oContext){W.setProperty(this.oContext+"/executeOnSelection",e);}};
U.prototype.getOriginalDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/originalDefaultVariant");}return null;};
U.prototype.setDefaultVariantKey=function(e){var W=this.getModel(this._sModelName);if(W&&this.oContext){W.setProperty(this.oContext+"/defaultVariant",e);}};
U.prototype.getDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/defaultVariant");}return null;};
U.prototype.setCurrentVariantKey=function(e){var W=this.getModel(this._sModelName);if(W&&this.oContext){W.setProperty(this.oContext+"/currentVariant",e);}return this;};
U.prototype.getCurrentVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/currentVariant");}return null;};
U.prototype._assignPopoverTitle=function(){var e;var W;var X=this.getModel(this._sModelName);if(X&&this.oContext){e=X.getProperty(this.oContext+"/popoverTitle");}if(e!==undefined){W=this.getModel(U.INNER_MODEL_NAME);if(W){W.setProperty("/popoverTitle",e);}}};
U.prototype.getVariants=function(){return this._getItems();};
U.prototype.setModified=function(e){var W=this.getModel(this._sModelName);if(W&&this.oContext){W.setProperty(this.oContext+"/modified",e);}};
U.prototype.getModified=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/modified");}return false;};
U.prototype.getSelectedVariantText=function(e){var W=this._getItemByKey(e);if(W){return W.title;}return"";};
U.prototype.getStandardVariantKey=function(){var e=this._getItems();if(e&&e[0]){return e[0].key;}return null;};
U.prototype.getShowFavorites=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/showFavorites");}return false;};
U.prototype._clearDeletedItems=function(){this._aDeletedItems=[];};
U.prototype._addDeletedItem=function(e){this._aDeletedItems.push(e);};
U.prototype._getDeletedItems=function(){return this._aDeletedItems;};
U.prototype._getItems=function(){var e=[];if(this.oContext&&this.oContext.getObject()){e=this.oContext.getObject().variants.filter(function(W){if(!W.hasOwnProperty("visible")){return true;}return W.visible;});}return e;};
U.prototype._getItemByKey=function(e){var W=null;var X=this._getItems();X.some(function(Y){if(Y.key===e){W=Y;}return(W!==null);});return W;};
U.prototype._rebindControl=function(){this.oVariantText.unbindProperty("text");this.oVariantText.bindProperty("text",{path:'currentVariant',model:this._sModelName,formatter:function(e){var W="";if(e){W=this.getSelectedVariantText(e);this._setInvisibleText(W,this.getModified());}return W;}.bind(this)});this.oVariantModifiedText.unbindProperty("visible");this.oVariantModifiedText.bindProperty("visible",{path:"modified",model:this._sModelName,formatter:function(e){var W=this.getCurrentVariantKey();if(W){this._setInvisibleText(this.getSelectedVariantText(W),e);}return((e===null)||(e===undefined))?false:e;}.bind(this)});};
U.prototype.setModelName=function(e){if(this.getModelName()){this.oContext=null;}this.setProperty("modelName",e);this._sModelName=e;this._rebindControl();return this;};
U.prototype._setBindingContext=function(){var e;var W;if(!this.oContext){e=this.getModel(this._sModelName);if(e){W=this._getLocalId(e);if(W){this.oContext=new C(e,"/"+W);this.setBindingContext(this.oContext,this._sModelName);if(!this.getModelName()&&e.registerToModel){e.registerToModel(this);}this._assignPopoverTitle();this._registerPropertyChanges(e);this.fireInitialized();}}}};
U.prototype._getLocalId=function(e){if(this.getModelName()&&(this._sModelName!==w.VARIANT_MODEL_NAME)){return this.getId();}return e.getVariantManagementReferenceForControl(this);};
U.prototype._setModel=function(){this._setBindingContext();};
U.prototype._registerPropertyChanges=function(e){var W=new P(e,this.oContext+"/showExecuteOnSelection");W.attachChange(function(X){if(X&&X.oSource&&X.oSource.oModel&&X.oSource.sPath){var Y=X.oSource.oModel.getProperty(X.oSource.sPath);if(Y!==undefined){this._setShowExecuteOnSelection(Y);}}}.bind(this));W=new P(e,this.oContext+"/variantsEditable");W.attachChange(function(X){if(X&&X.oSource&&X.oSource.oModel&&X.oSource.sPath){var Y;var Z=X.oSource.oModel.getProperty(X.oSource.sPath);Y=this.getModel(U.INNER_MODEL_NAME);if(Y&&(Z!==undefined)){Y.setProperty("/editable",Z);}}}.bind(this));};
U.prototype._obtainControl=function(e){if(e&&e.target&&e.target.id){var W=e.target.id;var X=W.indexOf("-inner");if(X>0){W=W.substring(0,X);}return sap.ui.getCore().byId(W);}return null;};
U.prototype.handleOpenCloseVariantPopover=function(e){if(!this.bPopoverOpen){this._oCtrlRef=this._obtainControl(e);this._openVariantList();}else if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close();}else if(this.getInErrorState()&&this.oErrorVariantPopOver&&this.oErrorVariantPopOver.isOpen()){this.oErrorVariantPopOver.close();}};
U.prototype.getFocusDomRef=function(){if(this.oVariantPopoverTrigger){return this.oVariantPopoverTrigger.getFocusDomRef();}};
U.prototype.onclick=function(e){if(this.oVariantPopoverTrigger&&!this.bPopoverOpen){this.oVariantPopoverTrigger.focus();}this.handleOpenCloseVariantPopover(e);};
U.prototype.onkeyup=function(e){if(e.which===K.F4||e.which===K.SPACE||e.altKey===true&&e.which===K.ARROW_UP||e.altKey===true&&e.which===K.ARROW_DOWN){this._oCtrlRef=this._obtainControl(e);this._openVariantList();}};
U.prototype.onAfterRendering=function(){this.oVariantText.$().off("mouseover").on("mouseover",function(){this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtnHover");}.bind(this));this.oVariantText.$().off("mouseout").on("mouseout",function(){this.oVariantPopoverTrigger.removeStyleClass("sapUiFlVarMngmtTriggerBtnHover");}.bind(this));};
U.prototype._openInErrorState=function(){var W;if(!this.oErrorVariantPopOver){W=new V({fitContainer:true,alignItems:sap.m.FlexAlignItems.Center,items:[new c({size:"4rem",color:"lightgray",src:"sap-icon://message-error"}),new p({titleStyle:sap.ui.core.TitleLevel.H2,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT1")}),new T({textAlign:sap.ui.core.TextAlign.Center,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT2")})]});W.addStyleClass("sapUiFlVarMngmtErrorPopover");this.oErrorVariantPopOver=new q(this.getId()+"-errorpopover",{title:{path:"/popoverTitle",model:U.INNER_MODEL_NAME},contentWidth:"400px",placement:A.VerticalPreferredBottom,content:[new h(this.getId()+"-errorselpage",{showSubHeader:false,showNavButton:false,showHeader:false,content:[W]})],afterOpen:function(){this.bPopoverOpen=true;}.bind(this),afterClose:function(){if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false;}.bind(this),200);}}.bind(this),contentHeight:"300px"});this.oErrorVariantPopOver.attachBrowserEvent("keyup",function(e){if(e.which===32){this.oErrorVariantPopOver.close();}}.bind(this));}if(this.bPopoverOpen){return;}this.oErrorVariantPopOver.openBy(this.oVariantLayout);};
U.prototype._createVariantList=function(){if(this.oVariantPopOver){return;}this.oVariantManageBtn=new k(this.getId()+"-manage",{text:this._oRb.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){this._openManagementDialog();}.bind(this),layoutData:new t({priority:y.Low})});this.oVariantSaveBtn=new k(this.getId()+"-mainsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){this._handleVariantSave();}.bind(this),visible:{path:"modified",model:this._sModelName,formatter:function(W){return W;}},type:z.Emphasized,layoutData:new t({priority:y.Low})});this.oVariantSaveAsBtn=new k(this.getId()+"-saveas",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){this._openSaveAsDialog();}.bind(this),layoutData:new t({priority:y.Low}),visible:{path:"/showSaveAs",model:U.INNER_MODEL_NAME}});this._oVariantList=new r(this.getId()+"-list",{selectedKey:{path:"currentVariant",model:this._sModelName},itemPress:function(W){var X=null;if(W&&W.getParameters()){var Y=W.getParameters().item;if(Y){X=Y.getKey();}}if(X){this.setCurrentVariantKey(X);this.fireEvent("select",{key:X});this.oVariantPopOver.close();}}.bind(this)});this._oVariantList.setNoDataText(this._oRb.getText("VARIANT_MANAGEMENT_NODATA"));var e=new sap.ui.core.Item({key:'{'+this._sModelName+">key}",text:'{'+this._sModelName+">title}"});this._oVariantList.bindAggregation("items",{path:"variants",model:this._sModelName,template:e});this._oSearchField=new S(this.getId()+"-search");this._oSearchField.attachLiveChange(function(W){this._triggerSearch(W,this._oVariantList);}.bind(this));this.oVariantSelectionPage=new h(this.getId()+"-selpage",{subHeader:new i({content:[this._oSearchField]}),content:[this._oVariantList],footer:new s({content:[new j(this.getId()+"-spacer"),this.oVariantSaveBtn,this.oVariantSaveAsBtn,this.oVariantManageBtn]}),showNavButton:false,showHeader:false,showFooter:{path:"/editable",model:U.INNER_MODEL_NAME}});this.oVariantPopOver=new q(this.getId()+"-popover",{title:{path:"/popoverTitle",model:U.INNER_MODEL_NAME},titleAlignment:"Auto",contentWidth:"400px",placement:A.VerticalPreferredBottom,content:[this.oVariantSelectionPage],afterOpen:function(){this.bPopoverOpen=true;this.oVariantPopoverTrigger.setPressed(true);}.bind(this),afterClose:function(){this.oVariantPopoverTrigger.setPressed(false);if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false;}.bind(this),200);}}.bind(this),contentHeight:"300px"});this.oVariantPopOver.addStyleClass("sapUiFlVarMngmtPopover");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oVariantPopOver.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oVariantPopOver);};
U.prototype.showSaveButton=function(e){if(e===false){this.oVariantSaveAsBtn.setType(z.Emphasized);this.oVariantSaveBtn.setVisible(false);}else{this.oVariantSaveAsBtn.setType(z.Default);this.oVariantSaveBtn.setVisible(true);}};
U.prototype._openVariantList=function(){var e;if(this.getInErrorState()){this._openInErrorState();return;}if(this.bPopoverOpen){return;}if(!this.oContext){return;}this._createVariantList();this._oSearchField.setValue("");this._oVariantList.getBinding("items").filter(this._getFilters());this.oVariantSelectionPage.setShowSubHeader(this._oVariantList.getItems().length>9);this.showSaveButton(false);if(this.getModified()){e=this._getItemByKey(this.getCurrentVariantKey());if(e&&e.change){this.showSaveButton(true);}}var W=this._oCtrlRef?this._oCtrlRef:this.oVariantLayout;this._oCtrlRef=null;this.oVariantPopOver.openBy(W);};
U.prototype._triggerSearch=function(e,W){if(!e){return;}var X=e.getParameters();if(!X){return;}var Y=X.newValue?X.newValue:"";var Z=new F({path:"title",operator:a.Contains,value1:Y});W.getBinding("items").filter(this._getFilters(Z));};
U.prototype._createSaveAsDialog=function(){if(!this.oSaveAsDialog){this.oInputName=new o(this.getId()+"-name",{liveChange:function(){this._checkVariantNameConstraints(this.oInputName);}.bind(this)});var e=new L(this.getId()+"-namelabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")});e.setLabelFor(this.oInputName);e.addStyleClass("sapUiFlVarMngmtSaveDialogLabel");this.oDefault=new m(this.getId()+"-default",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),visible:{path:"/showSetAsDefault",model:U.INNER_MODEL_NAME},width:"100%"});this.oExecuteOnSelect=new m(this.getId()+"-execute",{text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),visible:{path:"/showExecuteOnSelection",model:U.INNER_MODEL_NAME},width:"100%"});this.oInputManualKey=new o(this.getId()+"-key",{liveChange:function(){this._checkVariantNameConstraints(this.oInputManualKey);}.bind(this)});this.oLabelKey=new L(this.getId()+"-keylabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputManualKey);this.oSaveSave=new k(this.getId()+"-variantsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:z.Emphasized,press:function(){if(!this._bSaveOngoing){this._checkVariantNameConstraints(this.oInputName);if(this.oInputName.getValueState()==="Error"){return;}this._bSaveOngoing=true;this._bSaveCanceled=false;this._handleVariantSaveAs(this.oInputName.getValue());}}.bind(this),enabled:true});var W=new G({defaultSpan:"L12 M12 S12"});if(this.getShowSetAsDefault()){W.addContent(this.oDefault);}if(this._getShowExecuteOnSelection()){W.addContent(this.oExecuteOnSelect);}this.oSaveAsDialog=new n(this.getId()+"-savedialog",{title:this._oRb.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),afterClose:function(){this._bSaveOngoing=false;if(this._sStyleClass){this.oSaveAsDialog.removeStyleClass(this._sStyleClass);this._sStyleClass=undefined;}}.bind(this),beginButton:this.oSaveSave,endButton:new k(this.getId()+"-variantcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:this._cancelPressed.bind(this)}),content:[e,this.oInputName,this.oLabelKey,this.oInputManualKey,W],stretch:D.system.phone});this.oSaveAsDialog.isPopupAdaptationAllowed=function(){return false;};this.oSaveAsDialog.addStyleClass("sapUiContentPadding");this.oSaveAsDialog.addStyleClass("sapUiFlVarMngmtSaveDialog");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oSaveAsDialog.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oSaveAsDialog);}};
U.prototype._cancelPressed=function(){this._bSaveCanceled=true;this.fireCancel();this.oSaveAsDialog.close();};
U.prototype.openSaveAsDialogForKeyUser=function(e){this._openSaveAsDialog(e);this.oSaveAsDialog.addStyleClass(e);this._sStyleClass=e;};
U.prototype._openSaveAsDialog=function(){this._createSaveAsDialog();this.oInputName.setValue(this.getSelectedVariantText(this.getCurrentVariantKey()));this.oInputName.setEnabled(true);this.oInputName.setValueState(N.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oExecuteOnSelect.setSelected(false);if(this.oVariantPopOver){this.oVariantPopOver.close();}if(this.getManualVariantKey()){this.oInputManualKey.setVisible(true);this.oInputManualKey.setEnabled(true);this.oInputManualKey.setValueState(N.None);this.oInputManualKey.setValueStateText(null);this.oLabelKey.setVisible(true);}else{this.oInputManualKey.setVisible(false);this.oLabelKey.setVisible(false);}this.oSaveAsDialog.open();};
U.prototype._handleVariantSaveAs=function(e){var W=null;var X=e.trim();var Y=this.oInputManualKey.getValue().trim();if(X===""){this.oInputName.setValueState(N.Error);this.oInputName.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return;}if(this.getManualVariantKey()){if(Y===""){this.oInputManualKey.setValueState(N.Error);this.oInputManualKey.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return;}W=Y;}if(this.oSaveAsDialog){this.oSaveAsDialog.close();}if(this.oDefault.getSelected()){this.setDefaultVariantKey(W);}this.setModified(false);this.fireSave({key:W,name:X,overwrite:false,def:this.oDefault.getSelected(),execute:this.oExecuteOnSelect.getSelected()});};
U.prototype._handleVariantSave=function(){var e=this._getItemByKey(this.getCurrentVariantKey());var W=false;if(this.getDefaultVariantKey()===e.key){W=true;}if(this.oVariantPopOver){this.oVariantPopOver.close();}this.fireSave({name:e.title,overwrite:true,key:e.key,def:W});this.setModified(false);};
U.prototype.openManagementDialog=function(e,W){if(e&&this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}this._openManagementDialog(W);};
U.prototype._triggerSearchInManageDialog=function(e,W){if(!e){return;}var X=e.getParameters();if(!X){return;}var Y=X.newValue?X.newValue:"";var Z=[this._getVisibleFilter(),new F({filters:[new F({path:"title",operator:a.Contains,value1:Y}),new F({path:"author",operator:a.Contains,value1:Y})],and:false})];W.getBinding("items").filter(Z);this._bDeleteOccured=true;};
U.prototype.getManageDialog=function(){return this.oManagementDialog;};
U.prototype._createManagementDialog=function(){if(!this.oManagementDialog||this.oManagementDialog.bIsDestroyed){this.oManagementTable=new g(this.getId()+"-managementTable",{contextualWidth:"Auto",fixedLayout:false,growing:true,columns:[new f({width:"3rem",visible:{path:"showFavorites",model:this._sModelName}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")}),width:"14rem"}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_DEFAULT"),wrappingType:"Hyphenated"}),hAlign:Q.Begin,demandPopin:true,popinDisplay:E.Block,minScreenWidth:M.Tablet,visible:{path:"/showSetAsDefault",model:U.INNER_MODEL_NAME}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),wrappingType:"Hyphenated"}),hAlign:this.getDisplayTextForExecuteOnSelectionForStandardVariant()?Q.Begin:Q.Center,demandPopin:true,popinDisplay:E.Block,minScreenWidth:M.Tablet,visible:{path:"/showExecuteOnSelection",model:U.INNER_MODEL_NAME}}),new f({header:new T({text:this._oRb.getText("VARIANT_MANAGEMENT_AUTHOR")}),demandPopin:true,popinDisplay:E.Block,minScreenWidth:M.Tablet}),new f({hAlign:Q.Center}),new f({visible:false})]});this.oManagementSave=new k(this.getId()+"-managementsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:true,type:z.Emphasized,press:function(){this._handleManageSavePressed();}.bind(this)});this.oManagementCancel=new k(this.getId()+"-managementcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._resumeManagementTableBinding();this.oManagementDialog.close();this._handleManageCancelPressed();}.bind(this)});this.oManagementDialog=new n(this.getId()+"-managementdialog",{contentWidth:"64%",resizable:true,draggable:true,title:this._oRb.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"),beginButton:this.oManagementSave,endButton:this.oManagementCancel,content:[this.oManagementTable],stretch:D.system.phone});this.oManagementDialog.isPopupAdaptationAllowed=function(){return false;};this._oSearchFieldOnMgmtDialog=new S();this._oSearchFieldOnMgmtDialog.attachLiveChange(function(W){this._triggerSearchInManageDialog(W,this.oManagementTable);}.bind(this));var e=new B(this.getId()+"-mgmHeaderSearch",{contentMiddle:[this._oSearchFieldOnMgmtDialog]});this.oManagementDialog.setSubHeader(e);if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oManagementDialog.addStyleClass("sapUiSizeCompact");}this.addDependent(this.oManagementDialog);this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()});this._bDeleteOccured=false;}};
U.prototype._setFavoriteIcon=function(e,W){if(e){e.setSrc(W?"sap-icon://favorite":"sap-icon://unfavorite");e.setTooltip(this._oRb.getText(W?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP"));e.setAlt(this._oRb.getText(W?"VARIANT_MANAGEMENT_FAV_DEL_ACC":"VARIANT_MANAGEMENT_FAV_ADD_ACC"));}};
U.prototype._templateFactoryManagementDialog=function(e,W){var X=null;var Y;var Z;var $;var _;var a1=W.getObject();if(!a1){return undefined;}var b1=function(j1){this._checkVariantNameConstraints(j1.oSource,j1.oSource.getBindingContext(this._sModelName).getObject().key);}.bind(this);var c1=function(j1){this._handleManageTitleChanged(j1.oSource.getBindingContext(this._sModelName).getObject());}.bind(this);var d1=function(j1){this._handleManageDefaultVariantChange(j1.oSource,j1.oSource.getBindingContext(this._sModelName).getObject(),j1.getParameters().selected);}.bind(this);var e1=function(j1){this._handleManageExecuteOnSelectionChanged(j1.oSource.getBindingContext(this._sModelName).getObject());}.bind(this);var f1=function(j1){this._handleManageDeletePressed(j1.oSource.getBindingContext(this._sModelName).getObject());var k1=j1.oSource.getParent();if(k1){k1.setVisible(false);}this._reCheckVariantNameConstraints();}.bind(this);var g1=function(j1){this._handleManageFavoriteChanged(j1.oSource,j1.oSource.getBindingContext(this._sModelName).getObject());}.bind(this);if(a1.rename){$=new o({liveChange:b1,change:c1,value:'{'+this._sModelName+">title}"});}else{$=new O({title:'{'+this._sModelName+">title}"});if(X){$.setTooltip(X);}}Y=new k({icon:"sap-icon://decline",enabled:true,type:z.Transparent,press:f1,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_DELETE"),visible:a1.remove});this._assignColumnInfoForDeleteButton(Y);Z=this.oContext.getPath();var h1=new c({src:{path:"favorite",model:this._sModelName,formatter:function(j1){return j1?"sap-icon://favorite":"sap-icon://unfavorite";}},tooltip:{path:'favorite',model:this._sModelName,formatter:function(j1){return this._oRb.getText(j1?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP");}.bind(this)},press:g1});if(this.getDefaultVariantKey()===a1.key){h1.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor");}else{h1.addStyleClass("sapUiFlVarMngmtFavColor");}if(this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&(this.getStandardVariantKey()===a1.key)){_=new m({wrapping:true,text:this.getDisplayTextForExecuteOnSelectionForStandardVariant(),select:e1,selected:'{'+this._sModelName+">executeOnSelect}"});}else{_=new m({text:"",select:e1,selected:'{'+this._sModelName+">executeOnSelect}"});}var i1=new d({cells:[h1,$,new R({groupName:this.getId(),select:d1,selected:{path:Z+"/defaultVariant",model:this._sModelName,formatter:function(j1){return a1.key===j1;}}}),_,new T({text:'{'+this._sModelName+">author}",textAlign:"Begin"}),Y,new T({text:'{'+this._sModelName+">key}"})]});return i1;};
U.prototype._openManagementDialog=function(e){this._createManagementDialog();if(this.oVariantPopOver){this.oVariantPopOver.close();}this._suspendManagementTableBinding();this._clearDeletedItems();this._oSearchFieldOnMgmtDialog.setValue("");if(this._bDeleteOccured){this._bDeleteOccured=false;this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()});}if(e){this.oManagementDialog.addStyleClass(e);}this.oManagementDialog.open();};
U.prototype._assignColumnInfoForDeleteButton=function(e){if(!this._oInvisibleDeleteColumnName){this._oInvisibleDeleteColumnName=new I({text:this._oRb.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")});this.oManagementDialog.addContent(this._oInvisibleDeleteColumnName);}if(this._oInvisibleDeleteColumnName){e.addAriaLabelledBy(this._oInvisibleDeleteColumnName);}};
U.prototype._toggleIconActivityState=function(e,W){if(!e){return;}if(W){if(e.hasStyleClass("sapUiFlVarMngmtFavColor")){e.removeStyleClass("sapUiFlVarMngmtFavColor");e.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor");}}else{if(e.hasStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")){e.removeStyleClass("sapUiFlVarMngmtFavNonInteractiveColor");e.addStyleClass("sapUiFlVarMngmtFavColor");}}};
U.prototype._handleManageDefaultVariantChange=function(e,W,X){var Y=W.key;if(e){var Z=e.getParent().getCells()[U.COLUMN_FAV_IDX];if(X){if(this.getShowFavorites()&&!W.favorite){W.favorite=true;this._setFavoriteIcon(Z,true);}this.setDefaultVariantKey(Y);}this._toggleIconActivityState(Z,X);}};
U.prototype._handleManageCancelPressed=function(){var e;var W;this._getDeletedItems().forEach(function(X){X.visible=true;});this._getItems().forEach(function(X){X.title=X.originalTitle;X.favorite=X.originalFavorite;X.executeOnSelection=X.originalExecuteOnSelection;});e=this.getOriginalDefaultVariantKey();if(e!==this.getDefaultVariantKey()){this.setDefaultVariantKey(e);}W=this.getModel(this._sModelName);if(W){W.checkUpdate();}};
U.prototype._handleManageFavoriteChanged=function(e,W){if((this.getDefaultVariantKey()===W.key)&&W.favorite){return;}W.favorite=!W.favorite;this._setFavoriteIcon(e,W.favorite);};
U.prototype._getRowForKey=function(e){var W=null;if(this.oManagementTable){this.oManagementTable.getItems().some(function(X){if(e===X.getCells()[0].getBindingContext(this._sModelName).getObject().key){W=X;}return W!==null;}.bind(this));}return W;};
U.prototype._handleManageDeletePressed=function(e){var W;var X=e.key;if(this.oManagementTable.getItems().length===1){return;}e.visible=false;this._addDeletedItem(e);if((X===this.getDefaultVariantKey())){this.setDefaultVariantKey(this.getStandardVariantKey());if(this.getShowFavorites()){var Y=this._getItemByKey(this.getStandardVariantKey());if(Y&&!Y.favorite){var Z=this._getRowForKey(this.getStandardVariantKey());if(Z){Y.favorite=true;this._setFavoriteIcon(Z.getCells()[U.COLUMN_FAV_IDX],true);}}}}W=this.getModel(this._sModelName);if(W){W.checkUpdate();}this.oManagementCancel.focus();};
U.prototype._handleManageExecuteOnSelectionChanged=function(){};
U.prototype._handleManageTitleChanged=function(){};
U.prototype._handleManageSavePressed=function(){if(this._anyInErrorState(this.oManagementTable)){return;}this._getDeletedItems().some(function(e){if(e.key===this.getCurrentVariantKey()){var W=this.getStandardVariantKey();this.setModified(false);this.setCurrentVariantKey(W);this.fireEvent("select",{key:W});return true;}return false;}.bind(this));this.fireManage();this._resumeManagementTableBinding();this.oManagementDialog.close();};
U.prototype._resumeManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.resume();}}};
U.prototype._suspendManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.suspend();}}};
U.prototype._anyInErrorState=function(e){var W;var X;var Y=false;if(e){W=e.getItems();W.some(function(Z){X=Z.getCells()[U.COLUMN_NAME_IDX];if(X&&X.getValueState&&(X.getValueState()===N.Error)){Y=true;}return Y;});}return Y;};
U.prototype._getFilters=function(e){var W=[];if(e){W.push(e);}W.push(this._getVisibleFilter());if(this.getShowFavorites()){W.push(this._getFilterFavorites());}return W;};
U.prototype._getVisibleFilter=function(){return new F({path:"visible",operator:a.EQ,value1:true});};
U.prototype._getFilterFavorites=function(){return new F({path:"favorite",operator:a.EQ,value1:true});};
U.prototype._verifyVariantNameConstraints=function(e,W){if(!e){return;}var X=e.getValue();X=X.trim();if(!this._checkIsDuplicate(X,W)){if(X===""){e.setValueState(N.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else if(X.indexOf('{')>-1){e.setValueState(N.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_NOT_ALLOWED_CHAR",["{"]));}else if(X.length>U.MAX_NAME_LEN){e.setValueState(N.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_MAX_LEN",[U.MAX_NAME_LEN]));}else{e.setValueState(N.None);e.setValueStateText(null);}}else{e.setValueState(N.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"));}};
U.prototype._checkVariantNameConstraints=function(e,W){this._verifyVariantNameConstraints(e,W);if(this.oManagementDialog&&this.oManagementDialog.isOpen()){this._reCheckVariantNameConstraints();}};
U.prototype._reCheckVariantNameConstraints=function(){var e;var W=false;if(this.oManagementTable){e=this.oManagementTable.getItems();e.some(function(X){var Y=X.getBindingContext(this._sModelName).getObject();if(Y&&Y.visible){var Z=X.getCells()[U.COLUMN_NAME_IDX];if(Z&&Z.getValueState&&(Z.getValueState()===N.Error)){this._verifyVariantNameConstraints(Z,Y.key);if(Z.getValueState()===N.Error){W=true;}}}return W;}.bind(this));}return W;};
U.prototype._checkIsDuplicate=function(e,W){if(this.oManagementDialog&&this.oManagementDialog.isOpen()){return this._checkIsDuplicateInManageTable(e,W);}return this._checkIsDuplicateInModel(e,W);};
U.prototype._checkIsDuplicateInModel=function(e,W){var X=false;var Y=this._getItems();var Z=e.toLowerCase();Y.some(function($){if($.title.toLowerCase()===Z){if(W&&(W===$.key)){return false;}X=true;}return X;});return X;};
U.prototype._checkIsDuplicateInManageTable=function(e,W){var X;var Y=false;var Z=e.toLowerCase();if(this.oManagementTable){X=this.oManagementTable.getItems();X.some(function($){var _;var a1=$.getBindingContext(this._sModelName).getObject();if(a1&&a1.visible){var b1=$.getCells()[U.COLUMN_NAME_IDX];if(b1&&(a1.key!==W)){if(b1.isA("sap.m.Input")){_=b1.getValue().toLowerCase();}else{_=b1.getTitle().toLowerCase();}if(_===Z){Y=true;}}}return Y;}.bind(this));}return Y;};
U.prototype.exit=function(){var e;if(this.oVariantInvisibleText){this.oVariantInvisibleText.destroy(true);this.oVariantInvisibleText=undefined;}if(this.oDefault&&!this.oDefault._bIsBeingDestroyed){this.oDefault.destroy();}this.oDefault=undefined;if(this.oExecuteOnSelect&&!this.oExecuteOnSelect._bIsBeingDestroyed){this.oExecuteOnSelect.destroy();}this.oExecuteOnSelect=undefined;this._oRb=undefined;this.oContext=undefined;this._oVariantList=undefined;this.oVariantSelectionPage=undefined;this.oVariantLayout=undefined;this.oVariantText=undefined;this.oVariantModifiedText=undefined;this.oVariantPopoverTrigger=undefined;this._oSearchField=undefined;this._oSearchFieldOnMgmtDialog=undefined;e=this.getModel(U.INNER_MODEL_NAME);if(e){e.destroy();}if(this._sStyleClass){this._sStyleClass=undefined;}};
return U;});
sap.ui.predefine('sap/ui/fl/variants/VariantModel',["sap/base/util/restricted/_omit","sap/base/util/each","sap/base/util/includes","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/BusyIndicator","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/apply/_internal/flexState/controlVariants/Switcher","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/changeHandler/Base","sap/ui/fl/Change","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/registry/Settings","sap/ui/model/json/JSONModel"],function(_,e,i,a,m,O,L,J,B,R,U,S,V,b,c,C,d,f,g,h,j){"use strict";
function k(E,P){return o(function(x,y){var M=y.model;var z=y.vmReference;var A=false;var T=x.key;var D=x.key;return Promise.resolve().then(function(){if(O.get([z,"currentVariant"],M.oData)&&M.oData[z].currentVariant!==M.oData[z].originalCurrentVariant){D=M.oData[z].originalCurrentVariant;A=true;return M.updateCurrentVariant({variantManagementReference:z,newVariantReference:T,appComponent:M.oAppComponent,internallyCalled:true});}}).then(function(){if(O.get([z,"modified"],M.oData)===true){var F=V.getControlChangesForVariant({reference:M.sFlexReference,vmReference:z,vReference:D,changeInstance:true});return l({changes:F,vmReference:z,vReference:D,revert:!A,model:M}).then(function(){M.oData[z].originalCurrentVariant=T;M.oData[z].modified=false;M.checkUpdate(true);});}}).then(function(){if(!A){M._callVariantSwitchListeners(z,M.oData[z].currentVariant);}});}.bind(null,E.getParameters(),P),P.model,P.vmReference);}
function l(P){var x=P.model._getDirtyChangesFromVariantChanges(P.changes);return Promise.resolve().then(function(){if(P.revert){return R.revertMultipleChanges(x,{appComponent:P.model.oAppComponent,modifier:J,flexController:P.model.oFlexController});}}).then(function(){x.forEach(function(y){V.removeChangeFromVariant({reference:P.model.sFlexReference,change:y,vmReference:P.vmReference,vReference:P.vReference});P.model.oFlexController.deleteChange(y,P.model.oAppComponent);});});}
function n(M,x,y){if(y||M.oData[x]){M.oData[x].variantBusy=y;}M.checkUpdate();}
function o(x,M,y){M._oVariantSwitchPromise=M._oVariantSwitchPromise.catch(function(){}).then(n.bind(null,M,y,true)).then(x).then(n.bind(null,M,y,false)).catch(function(E){n(M,y,false);throw E;});M.oFlexController.setVariantSwitchPromise(M._oVariantSwitchPromise);return M._oVariantSwitchPromise;}
function r(P){return S.switchVariant(P).then(function(){delete this.oData[P.vmReference];}.bind(this)).catch(function(E){L.warning(E.message);});}
function s(P,x){return S.switchVariant(P).then(function(){this.oData[P.vmReference].originalCurrentVariant=P.newVReference;this.oData[P.vmReference].currentVariant=P.newVReference;if(this.oData[P.vmReference].updateVariantInURL){U.updateVariantInURL({vmReference:P.vmReference,newVReference:P.newVReference,model:this});}this._callVariantSwitchListeners(P.vmReference,P.newVReference,undefined,x);this.checkUpdate();}.bind(this));}
function u(x){h.getInstance().then(function(y){if(!y.isVariantPersonalizationEnabled()){x.remove=false;x.rename=false;x.change=false;}});}
function p(x,y,D){var z=D?f.getCurrentLayer():d.USER;if((x.layer===z)&&(x.key!==y)){return true;}return false;}
function w(x){return new Promise(function(y){if(x.getDomRef()){y();}else{x.addEventDelegate({onAfterRendering:function(){y();}});}});}
var q=j.extend("sap.ui.fl.variants.VariantModel",{constructor:function(D,F,A,x){this.pSequentialImportCompleted=Promise.resolve();j.apply(this,arguments);this.bObserve=x;if(!F){F=sap.ui.requireSync("sap/ui/fl/FlexControllerFactory").createForControl(A);}this.oFlexController=F;this.oChangePersistence=this.oFlexController._oChangePersistence;this.sFlexReference=this.oChangePersistence.getComponentName();this.oAppComponent=A;this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._oVariantSwitchPromise=Promise.resolve();this._oVariantAppliedListeners={};if(a(D)){try{D=V.fillVariantModel({reference:this.sFlexReference});}catch(E){L.error("Variants Map was not found: "+E.message);}}if(D&&typeof D==="object"){Object.keys(D).forEach(function(K){D[K].variants.forEach(function(y){if(!D[K].currentVariant&&(y.key===D[K].defaultVariant)){D[K].currentVariant=y.key;}y.originalTitle=y.title;y.originalFavorite=y.favorite;y.originalExecuteOnSelect=y.executeOnSelect;y.originalVisible=y.visible;});D[K].originalCurrentVariant=D[K].currentVariant;D[K].originalDefaultVariant=D[K].defaultVariant;});this.setData(D);}U.initialize({model:this});}});
q.prototype.updateCurrentVariant=function(P){var x={vmReference:P.variantManagementReference,currentVReference:this.oData[P.variantManagementReference].originalCurrentVariant,newVReference:P.newVariantReference,flexController:this.oFlexController,appComponent:P.appComponent||this.oAppComponent,modifier:J,reference:this.sFlexReference};if(P.internallyCalled){return s.call(this,x,P.scenario);}return o(s.bind(this,x,P.scenario),this,P.variantManagementReference);};
q.prototype.getCurrentVariantReference=function(x){return this.oData[x].currentVariant;};
q.prototype.getVariantManagementReference=function(x){var y="";var I=-1;Object.keys(this.oData).some(function(K){return this.oData[K].variants.some(function(z,A){if(z.key===x){y=K;I=A;return true;}});}.bind(this));return{variantManagementReference:y,variantIndex:I};};
q.prototype.getVariant=function(x,y){return V.getVariant({reference:this.sFlexReference,vmReference:y||this.getVariantManagementReference(x).variantManagementReference,vReference:x});};
q.prototype.getVariantProperty=function(x,P){return this.getVariant(x).content.content[P];};
function t(x){var y=V.getVariantChangesForVariant({vmReference:x,reference:this.sFlexReference});var z=this.oData[x].currentVariant;var D=this.oData[x].defaultVariant;if(this.oData[x]._executeOnSelectionForStandardDefault&&z===D&&z===x&&!y.setExecuteOnSelect){var A=V.getVariant({reference:this.sFlexReference,vmReference:x,vReference:x});A.content.content.executeOnSelect=true;this.oData[x].variants[0].originalExecuteOnSelect=true;this.oData[x].variants[0].executeOnSelect=true;return true;}}
q.prototype.attachVariantApplied=function(P){var x=this.getVariantManagementReferenceForControl(sap.ui.getCore().byId(P.vmControlId));return this.waitForVMControlInit(x).then(function(x,P){if(!this._oVariantAppliedListeners[x]){this._oVariantAppliedListeners[x]={};}var I=t.call(this,x);if(P.callAfterInitialVariant||I){var y={appComponent:this.oAppComponent,reference:this.sFlexReference,vmReference:x,flexController:this.oFlexController};V.waitForInitialVariantChanges(y).then(function(){var z=V.getCurrentVariantReference({vmReference:x,reference:this.sFlexReference});this._callVariantSwitchListeners(x,z,P.callback);}.bind(this));}return w(P.control).then(function(){if(b.getRelevantVariantManagementControlId(P.control,this.getVariantManagementControlIds())===P.vmControlId){this.oData[x].showExecuteOnSelection=true;this.checkUpdate(true);this._oVariantAppliedListeners[x][P.control.getId()]=P.callback;}else{L.error("Error in attachVariantApplied: The passed VariantManagement ID does not match the responsible VariantManagement control");}}.bind(this));}.bind(this,x,P));};
q.prototype._callVariantSwitchListeners=function(x,N,y,z){if(this._oVariantAppliedListeners[x]){var A;this.oData[x].variants.some(function(D){if(D.key===N){A=m({},D);return true;}});if(z){A.createScenario=z;}if(y){y(A);}else{e(this._oVariantAppliedListeners[x],function(D,y){y(A);});}}};
q.prototype.detachVariantApplied=function(x,y){var z=this.getVariantManagementReferenceForControl(sap.ui.getCore().byId(x));if(this._oVariantAppliedListeners[z]){delete this._oVariantAppliedListeners[z][y];}};
q.prototype.addChange=function(x){var y=x.getVariantReference();var z=this.getVariantManagementReference(y).variantManagementReference;if(x.getState()===C.states.NEW){this.oData[z].modified=true;}this.checkUpdate(true);return V.addChangeToVariant({reference:this.sFlexReference,change:x,vmReference:z,vReference:y});};
q.prototype.removeChange=function(x){var y=x.getVariantReference();var z=this.getVariantManagementReference(y).variantManagementReference;var A=V.removeChangeFromVariant({reference:this.sFlexReference,change:x,vmReference:z,vReference:y});this.checkDirtyStateForControlModels([z]);return A;};
q.prototype._getVariantTitleCount=function(N,x){var D=this.getData();return D[x].variants.reduce(function(y,z){if(N.toLowerCase()===z.title.toLowerCase()&&z.visible){y++;}return y;},0);};
q.prototype._duplicateVariant=function(P){var N=P.newVariantReference;var x=P.sourceVariantReference;var y=P.variantManagementReference;var z=this.getVariant(x);var A=V.getControlChangesForVariant({vmReference:y,vReference:x,changeInstance:true,reference:this.sFlexReference}).map(function(H){return H.getDefinition();});var D={content:{},controlChanges:A,variantChanges:{}};var E=f.compareAgainstCurrentLayer(z.content.layer,!this._bDesignTimeMode?d.USER:"");Object.keys(z.content).forEach(function(K){if(K==="fileName"){D.content[K]=N;}else if(K==="variantReference"){if(E===0){D.content[K]=z.content["variantReference"];}else if(E===-1){D.content[K]=x;}}else if(K==="content"){D.content[K]=JSON.parse(JSON.stringify(z.content[K]));D.content.content.title=P.title;}else{D.content[K]=z.content[K];}});D.content["layer"]=P.layer;A=D.controlChanges.slice();var F={};var G;D.controlChanges=A.reduce(function(H,I){if(f.compareAgainstCurrentLayer(I.layer,!this._bDesignTimeMode?d.USER:"")===0){F=m({},I);F.variantReference=D.content.fileName;if(!F.support){F.support={};}F.support.sourceChangeFileName=I.fileName;F.packageName="$TMP";G=C.createInitialFileContent(F);H.push(new C(G));}return H;}.bind(this),[]);return D;};
q.prototype.copyVariant=function(P){var D=this._duplicateVariant(P);D.generator=P.generator;var x={key:D.content.fileName,layer:P.layer,title:D.content.content.title,originalTitle:D.content.content.title,originalExecuteOnSelect:D.content.content.executeOnSelect,executeOnSelect:false,favorite:true,originalFavorite:true,rename:true,change:true,remove:true,visible:true,originalVisible:true};var y=b.createVariant({model:this,variantSpecificData:D});var z=[];[y].concat(y.getControlChanges()).forEach(function(A){z.push(this.oChangePersistence.addDirtyChange(A));}.bind(this));var I=V.addVariantToVariantManagement({variantData:m({},y.getDefinitionWithChanges(),{content:{content:{visible:x.visible,favorite:x.favorite}}}),reference:this.sFlexReference,vmReference:P.variantManagementReference});this.oData[P.variantManagementReference].variants.splice(I,0,x);return this.updateCurrentVariant({variantManagementReference:P.variantManagementReference,newVariantReference:y.getId(),appComponent:P.appComponent,internallyCalled:true,scenario:"saveAs"}).then(function(){return z;});};
q.prototype.removeVariant=function(P){var x=this.oChangePersistence.getDirtyChanges().filter(function(y){return(y.getVariantReference&&y.getVariantReference()===P.variant.getId())||y.getId()===P.variant.getId();});return this.updateCurrentVariant({variantManagementReference:P.variantManagementReference,newVariantReference:P.sourceVariantReference,appComponent:P.component}).then(function(){var I=V.removeVariantFromVariantManagement({reference:this.sFlexReference,variant:P.variant,vmReference:P.variantManagementReference});this.oData[P.variantManagementReference].variants.splice(I,1);this.checkUpdate();x.forEach(function(y){this.oChangePersistence.deleteChange(y);}.bind(this));}.bind(this));};
q.prototype.collectModelChanges=function(x,y){var D=this.getData()[x];var M=D.variants;var z=[];var P={};M.forEach(function(A){if(A.originalTitle!==A.title){P={variantReference:A.key,changeType:"setTitle",title:A.title,originalTitle:A.originalTitle,layer:y};z.push(P);}if(A.originalFavorite!==A.favorite){P={variantReference:A.key,changeType:"setFavorite",favorite:A.favorite,originalFavorite:A.originalFavorite,layer:y};z.push(P);}if(A.originalExecuteOnSelect!==A.executeOnSelect){P={variantReference:A.key,changeType:"setExecuteOnSelect",executeOnSelect:A.executeOnSelect,originalExecuteOnSelect:A.originalExecuteOnSelect,layer:y};z.push(P);}if(!A.visible&&A.originalVisible){P={variantReference:A.key,changeType:"setVisible",visible:false,layer:y};z.push(P);}});if(D.originalDefaultVariant!==D.defaultVariant){P={variantManagementReference:x,changeType:"setDefault",defaultVariant:D.defaultVariant,originalDefaultVariant:D.originalDefaultVariant,layer:y};z.push(P);}return z;};
q.prototype.manageVariants=function(x,y,z,A){return new Promise(function(D){x.attachEventOnce("manage",{resolve:D,variantManagementReference:y,layer:z},this.fnManageClickRta,this);x.openManagementDialog(true,A);}.bind(this));};
q.prototype.setVariantProperties=function(x,P,A){var y=-1;var z;var D=null;var E=this.getData();if(P.variantReference){y=this.getVariantManagementReference(P.variantReference).variantIndex;z=E[x].variants[y];}var N={};var F={};switch(P.changeType){case"setTitle":F.title=P.title;z.title=P.title;z.originalTitle=z.title;break;case"setFavorite":F.favorite=P.favorite;z.favorite=P.favorite;z.originalFavorite=z.favorite;break;case"setExecuteOnSelect":F.executeOnSelect=P.executeOnSelect;if(z){z.executeOnSelect=P.executeOnSelect;z.originalExecuteOnSelect=z.executeOnSelect;}break;case"setVisible":F.visible=P.visible;F.createdByReset=false;z.visible=P.visible;z.originalVisible=z.visible;break;case"setDefault":F.defaultVariant=P.defaultVariant;E[x].defaultVariant=P.defaultVariant;E[x].originalDefaultVariant=E[x].defaultVariant;var H=U.getStoredHashParams({model:this});if(H){if(E[x].defaultVariant!==E[x].currentVariant&&H.indexOf(E[x].currentVariant)===-1){U.update({parameters:H.concat(E[x].currentVariant),updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}else if(E[x].defaultVariant===E[x].currentVariant&&H.indexOf(E[x].currentVariant)>-1){H.splice(H.indexOf(E[x].currentVariant),1);U.update({parameters:H,updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}}if(!A&&E[x].currentVariant!==P.defaultVariant){this.updateCurrentVariant({variantManagementReference:x,newVariantReference:P.defaultVariant,appComponent:P.appComponent});}break;default:break;}var G=V.getContent(this.sFlexReference);if(y>-1){var I=V.setVariantData({variantData:F,vmReference:x,previousIndex:y,reference:this.sFlexReference});E[x].variants.splice(y,1);E[x].variants.splice(I,0,z);}else if(G[x]){G[x].defaultVariant=P.defaultVariant;}var K={vmReference:x,add:A,reference:this.sFlexReference};if(A===true){N.changeType=P.changeType;N.layer=P.layer;N.generator=P.generator;if(P.changeType==="setDefault"){N.fileType="ctrl_variant_management_change";N.selector=J.getSelector(x,P.appComponent);}else{if(P.changeType==="setTitle"){c.setTextInChange(N,"title",P.title,"XFLD");}N.fileType="ctrl_variant_change";N.selector=J.getSelector(P.variantReference,P.appComponent);}D=this.oFlexController.createBaseChange(N,P.appComponent);D.setContent(F);K.changeContent=D.getDefinition();V.updateChangesForVariantManagementInMap(K);this.oChangePersistence.addDirtyChange(D);}else if(P.change){K.changeContent=P.change.getDefinition();V.updateChangesForVariantManagementInMap(K);this.oChangePersistence.deleteChange(P.change);}this.setData(E);this.checkUpdate(true);return D;};
q.prototype._ensureStandardVariantExists=function(x){var D=this.getData();var y=D[x]||{};var z=_(y,["initPromise"]);if(!D[x]||a(z)){D[x]=m(y,{currentVariant:x,originalCurrentVariant:x,defaultVariant:x,originalDefaultVariant:x,variants:[{key:x,title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),originalTitle:this._oResourceBundle.getText("STANDARD_VARIANT_ORIGINAL_TITLE"),favorite:true,originalFavorite:true,executeOnSelect:false,originalExecuteOnSelect:false,visible:true,originalVisible:true,author:b.DEFAULT_AUTHOR}]});this.setData(D);var A={};A[x]={defaultVariant:x,variantManagementChanges:{},variants:[{content:{fileName:x,fileType:"ctrl_variant",variantManagementReference:x,variantReference:"",support:{user:b.DEFAULT_AUTHOR},content:{title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true,executeOnSelect:false}},controlChanges:[],variantChanges:{}}]};try{V.addFakeStandardVariant(this.sFlexReference,A);}catch(E){L.error("Variants Map was not found: "+E.message);}}};
q.prototype.setModelPropertiesForControl=function(x,D,y){this.oData[x].modified=false;this.oData[x].showFavorites=true;var z=this._bDesignTimeMode;if(z!==D){this._bDesignTimeMode=D;if(D){U.clearAllVariantURLParameters({model:this});}else if(z){U.update({parameters:U.getStoredHashParams({model:this}),updateURL:true,updateHashEntry:false,model:this});}}if(!(typeof this.fnManageClick==="function"&&typeof this.fnManageClickRta==="function")){this._initializeManageVariantsEvents();}y.detachManage(this.fnManageClick,this);if(D&&this.oData[x]._isEditable){this.oData[x].variantsEditable=false;this.oData[x].variants.forEach(function(A){A.rename=true;A.change=true;A.remove=p(A,x,D);});}else if(this.oData[x]._isEditable){y.attachManage({variantManagementReference:x},this.fnManageClick,this);this.oData[x].variantsEditable=true;this.oData[x].variants.forEach(function(A){A.remove=p(A,x,D);if(A.layer===d.USER){A.rename=true;A.change=true;u(A);}else{A.rename=false;A.change=false;}});}else{this.oData[x].variantsEditable=false;this.oData[x].variants.forEach(function(A){A.remove=false;A.rename=false;A.change=false;});}};
q.prototype._initializeManageVariantsEvents=function(){this.fnManageClickRta=function(E,D){var x=this.collectModelChanges(D.variantManagementReference,D.layer);D.resolve(x);};this.fnManageClick=function(E,D){if(!this.oFlexController||!V.getContent(this.sFlexReference)){return;}var x=this.collectModelChanges(D.variantManagementReference,d.USER);var y=[];x.forEach(function(z){z.appComponent=this.oAppComponent;y.push(this.setVariantProperties(D.variantManagementReference,z,true));}.bind(this));this.oChangePersistence.saveDirtyChanges(this.oAppComponent,false,y);};};
function v(F,x,y,A){if(!this._bDesignTimeMode){return F.saveSequenceOfDirtyChanges(x,A).then(function(z){if(z){var D=z.response[0];this.oData[y].variants.forEach(function(E){if(E.key===D.fileName){E.author=D.support.user;}});}}.bind(this));}return Promise.resolve();}
q.prototype._handleSaveEvent=function(E){if(!this._bDesignTimeMode){var x=E.getSource();var P=E.getParameters();return this._handleSave(x,P);}return Promise.resolve();};
q.prototype._handleSave=function(x,P){var A=g.getAppComponentForControl(x);var y=this.getLocalId(x.getId(),A);var N;return o(function(z,A,P){var D=P.def;var E=P.execute;var F=this.getCurrentVariantReference(z);var G=V.getControlChangesForVariant({reference:this.sFlexReference,vmReference:z,vReference:F,changeInstance:true});if(P["overwrite"]){return this.oFlexController.saveSequenceOfDirtyChanges(this._getDirtyChangesFromVariantChanges(G),A);}var H=P.layer||d.USER;var I=P.newVariantReference||g.createDefaultFileName();var K={variantManagementReference:z,appComponent:A,layer:H,title:P["name"],sourceVariantReference:F,newVariantReference:I,generator:P.generator};return this.copyVariant(K).then(function(M){if(D){var Q={changeType:"setDefault",defaultVariant:I,originalDefaultVariant:this.oData[z].defaultVariant,appComponent:A,layer:H,variantManagementReference:z};var T=this.setVariantProperties(z,Q,true);M.push(T);}if(E){var W={changeType:"setExecuteOnSelect",executeOnSelect:true,variantReference:I,appComponent:A,layer:H,variantManagementReference:z};var X=this.setVariantProperties(z,W,true);M.push(X);}N=M;return l({changes:G,vmReference:z,vReference:F,model:this}).then(v.bind(this,this.oFlexController,M,z,A));}.bind(this));}.bind(this,y,A,P),this,y).then(function(){this.oData[y].modified=false;this.checkUpdate(true);return N;}.bind(this));};
q.prototype.getLocalId=function(I,A){return J.getSelector(I,A).id;};
q.prototype.getVariantManagementReferenceForControl=function(x){var y=x.getId();var A=g.getAppComponentForControl(x);return(A&&A.getLocalId(y))||y;};
q.prototype.switchToDefaultForVariantManagement=function(x){if(this.oData[x].currentVariant!==this.oData[x].defaultVariant){B.show(200);this.updateCurrentVariant({variantManagementReference:x,newVariantReference:this.oData[x].defaultVariant}).then(function(){B.hide();});}};
q.prototype.switchToDefaultForVariant=function(x){Object.keys(this.oData).forEach(function(y){if(!x||this.oData[y].currentVariant===x){this.switchToDefaultForVariantManagement(y);}}.bind(this));};
q.prototype.registerToModel=function(x){var y=this.getVariantManagementReferenceForControl(x);this._ensureStandardVariantExists(y);this.oData[y]._isEditable=x.getEditable();this.oData[y]._executeOnSelectionForStandardDefault=x.getExecuteOnSelectionForStandardDefault();this.oData[y].showExecuteOnSelection=false;x.attachEvent("select",{vmReference:y,model:this},k);x.attachSave(this._handleSaveEvent,this);this.setModelPropertiesForControl(y,false,x);var z=x.getUpdateVariantInURL();this.oData[y].updateVariantInURL=z;U.registerControl({vmReference:y,updateURL:!!z,model:this});U.handleModelContextChange({model:this,vmControl:x});if(this.oData[y].initPromise){this.oData[y].initPromise.resolveFunction();delete this.oData[y].initPromise;}this.oData[y].init=true;};
q.prototype.waitForVMControlInit=function(x){if(!this.oData[x]){this.oData[x]={};}else if(this.oData[x].init){return Promise.resolve();}this.oData[x].initPromise={};this.oData[x].initPromise.promise=new Promise(function(y){this.oData[x].initPromise.resolveFunction=y;}.bind(this));return this.oData[x].initPromise.promise;};
q.prototype._getDirtyChangesFromVariantChanges=function(x){var y=x.map(function(z){return z.getDefinition().fileName;});return this.oChangePersistence.getDirtyChanges().filter(function(z){return i(y,z.getId())&&!z.assignedToVariant;});};
q.prototype.checkDirtyStateForControlModels=function(x){x.forEach(function(y){var z=this.oData[y];var A=this.getCurrentVariantReference(y);var D=V.getControlChangesForVariant({reference:this.sFlexReference,vmReference:y,vReference:A,changeInstance:true});var E=this._getDirtyChangesFromVariantChanges(D);z.modified=E.length>0;}.bind(this));this.checkUpdate(true);};
q.prototype.getCurrentControlVariantIds=function(){return Object.keys(this.oData||{}).reduce(function(x,y){return x.concat([this.oData[y].currentVariant]);}.bind(this),[]);};
q.prototype.getVariantManagementControlIds=function(){var x;return Object.keys(this.oData||{}).reduce(function(y,z){if(this.oAppComponent.byId(z)){x=this.oAppComponent.createId(z);}else{x=z;}y.push(x);return y;}.bind(this),[]);};
q.prototype.resetMap=function(x){var y=Object.keys(this.oData);y.forEach(function(z){var P={vmReference:z,currentVReference:this.oData[z].currentVariant||this.oData[z].defaultVariant,newVReference:true,appComponent:this.oAppComponent,flexController:this.oFlexController,modifier:J,reference:this.sFlexReference};return o(r.bind(this,P),this,z);}.bind(this));return this._oVariantSwitchPromise.then(function(){V.clearFakedStandardVariants(this.sFlexReference);V.resetContent(this.sFlexReference);if(!x){U.initialize({model:this});U.update({parameters:[],updateHashEntry:true,model:this});}}.bind(this));};
return q;});
sap.ui.predefine('sap/ui/fl/write/_internal/SaveAs',["sap/ui/fl/write/_internal/appVariant/AppVariantFactory","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/Utils","sap/base/Log","sap/ui/fl/Layer","sap/base/util/includes","sap/base/util/merge","sap/base/util/restricted/_omit","sap/ui/fl/registry/Settings"],function(A,D,a,C,U,L,b,i,m,_,S){"use strict";
function c(P){return S.getInstance().then(function(s){if(!P.package&&(P.layer===b.VENDOR||(P.layer===b.CUSTOMER_BASE&&!s.isAtoEnabled()))){return Promise.reject("Package must be provided or is valid");}if(P.isForSmartBusiness&&(P.package!=='$TMP'&&P.package!=='')&&!P.transport&&!s.isAtoEnabled()){return Promise.reject("Transport must be provided");}if(P.isForSmartBusiness&&P.transport||(P.package==="$TMP")){return Promise.resolve({packageName:P.package,transport:P.transport});}return Promise.resolve({packageName:"",transport:""});});}
function d(q,t){var T=t.transport?q.setTransportRequest(t.transport):Promise.resolve();return T.then(function(){if(t.packageName){return q.setPackage(t.packageName);}return Promise.resolve();});}
function e(q){var I=[];q.forEach(function(r){var s=r.getDefinition();var t={changeType:s.changeType,content:s.content};if(s.texts){t.texts=s.texts;}I.push(a.createNew(t));});return Promise.all(I);}
function f(q,r){var P={reference:r.getId()};var s=U.createNamespace(P,"changes");q.setNamespace(s);q.setComponent(r.getId());}
function g(q,r){var s=[];q.forEach(function(I){I.replaceHostingIdForTextKey(r.getId(),r.getReference(),I.getContent(),I.getTexts());s.push(r.addDescriptorInlineChange(I));});return Promise.all(s);}
function h(s){var q=C.getDescriptorFlexControllerInstance(s)._oChangePersistence;if(q){var r=q.getDirtyChanges();r=r.slice();return r;}return[];}
function j(s){var F=C.getFlexControllerInstance(s)._oChangePersistence;if(F){var u=F.getDirtyChanges();u=u.slice();return u;}return[];}
function k(s){var F=C.getFlexControllerInstance(s)._oChangePersistence;var q=C.getDescriptorFlexControllerInstance(s)._oChangePersistence;return F===q;}
function l(s,q,r){var t=[];if(q){h(s).forEach(function(u){if(i(D.getChangeTypes(),u.getDefinition().changeType)){t.push(u);}else{f(u,r);}});}else{j(s).forEach(function(u){f(u,r);});t=h(s);}return t;}
function n(s){h(s).forEach(function(q){if(i(D.getChangeTypes(),q.getChangeType())){C.getDescriptorFlexControllerInstance(s)._oChangePersistence.deleteChange(q);}});}
function o(q,P){if(!q){throw new Error("App variant with ID: "+P.id+"does not exist");}P.package=q.getPackage();P.layer=q.getDefinition().layer;return c(P).then(function(t){return d(q,t);}).then(function(){return q;});}
var p={saveAs:function(P){var q;var r;var s=false;return A.prepareCreate(P).then(function(t){q=m({},t);return c(P);}).then(function(t){return d(q,t);}).then(function(){s=k(P.selector);var t=l(P.selector,s,q);return e(t);}).then(function(t){return g(t,q);}).then(function(){return q.submit().catch(function(E){E.messageKey="MSG_SAVE_APP_VARIANT_FAILED";throw E;});}).then(function(R){r=m({},R);if(s){n(P.selector);}var F=C.getFlexControllerInstance(P.selector);var u=j(P.selector);if(u.length){return F.saveAll(C.getAppComponentForSelector(P.selector),true).catch(function(E){if(s){n(P.selector);}return this.deleteAppVariant({id:P.id}).then(function(){E.messageKey="MSG_COPY_UNSAVED_CHANGES_FAILED";throw E;});}.bind(this));}return Promise.resolve();}.bind(this)).then(function(){if(!s){n(P.selector);}return r;}).catch(function(E){if(h(P.selector).length){n(P.selector);}L.error("the app variant could not be created.",E.message||E);throw E;});},updateAppVariant:function(P){var q;var r;return A.prepareUpdate(_(P,"selector")).catch(function(E){E.messageKey="MSG_LOAD_APP_VARIANT_FAILED";throw E;}).then(function(s){if(!s){throw new Error("App variant with ID: "+P.id+"does not exist");}q=m({},s);P.package=q.getPackage();P.layer=q.getDefinition().layer;return c(P);}).then(function(t){return d(q,t);}).then(function(){var s=[];h(P.selector).forEach(function(t){if(i(D.getChangeTypes(),t.getDefinition().changeType)){s.push(t);}});return e(s);}).then(function(s){return g(s,q);}).then(function(){return q.submit().catch(function(E){if(P.isForSmartBusiness){n(P.selector);throw E;}E.messageKey="MSG_UPDATE_APP_VARIANT_FAILED";throw E;});}).then(function(R){r=m({},R);n(P.selector);return r;}).catch(function(E){if(h(P.selector).length){n(P.selector);}L.error("the app variant could not be updated.",E.message||E);throw E;});},deleteAppVariant:function(P){return A.prepareDelete(_(P,"selector")).catch(function(E){E.messageKey="MSG_LOAD_APP_VARIANT_FAILED";throw E;}).then(function(q){return((P.isForSmartBusiness)?Promise.resolve(q):o(q,P));}).then(function(q){return q.submit().catch(function(E){if(E==="cancel"){return Promise.reject("cancel");}E.messageKey="MSG_DELETE_APP_VARIANT_FAILED";throw E;});}).catch(function(E){if(E==="cancel"){return Promise.reject("cancel");}L.error("the app variant could not be deleted.",E.message||E);throw E;});}};return p;});
sap.ui.predefine('sap/ui/fl/write/_internal/Storage',["sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/write/_internal/StorageFeaturesMerger","sap/base/util/ObjectPath"],function(S,a,O){"use strict";var W="sap/ui/fl/write/_internal/connectors/";
function _(){return S.getConnectors(W,false);}
function f(l,C){var F=C.filter(function(o){return o.layers.indexOf("ALL")!==-1||o.layers.indexOf(l)!==-1;});if(F.length===1){return F[0];}if(F.length===0){throw new Error("No Connector configuration could be found to write into layer: "+l);}if(F.length>1){throw new Error("sap.ui.core.Configuration 'flexibilityServices' has a misconfiguration: Multiple Connector configurations were found to write into layer: "+l);}}
function b(C){var i=C.map(function(o){return o.writeConnectorModule.loadFeatures({url:o.url}).then(function(F){return{features:F,layers:o.layers};}).catch(S.logAndResolveDefault.bind(null,{features:{},layers:o.layers},o,"loadFeatures"));});return Promise.all(i);}
function c(l){if(!l){return Promise.reject("No layer was provided");}return _().then(f.bind(this,l));}
function d(p){if(p.draft){return new Promise(function(r,i){sap.ui.require(["sap/ui/fl/write/api/FeaturesAPI"],function(F){F.isVersioningEnabled(p.layer).then(function(D){if(D){r();}else{i("Draft is not supported for the given layer: "+p.layer);}});});});}return Promise.resolve();}
function e(p){var C;if(p.allChanges&&p.allChanges.length&&p.condensedChanges){C={namespace:p.allChanges[0].getDefinition().namespace,layer:p.layer,"delete":{change:[]},update:{change:[]},reorder:{change:[]},create:{change:[],ctrl_variant_change:[],ctrl_variant_management_change:[]}};var o=0;var A=false;p.allChanges.forEach(function(i,j){if(i.getFileType()==="ctrl_variant"){return;}var k=C.create[i.getFileType()].length;if(i.condenserState){var D=false;if(i.condenserState==="delete"){if(i.getState()==="NONE"){C.delete.change.push(i.getFileName());}o++;}else if(p.condensedChanges.length){D=p.allChanges[j].getFileName()!==p.condensedChanges[j-o].getFileName();}if(i.condenserState==="select"&&D&&!A){var r=p.condensedChanges.slice(j-o).map(function(i){return i.getFileName();});C.reorder.change=r;A=true;}if(i.condenserState==="select"&&i.getProperty("state")==="NEW"){C.create.change[k]={};C.create.change[k][i.getFileName()]=i.getDefinition();}else if(i.condenserState==="update"){var l=C.update.change.length;C.update.change[l]={};C.update.change[l][i.getFileName()]={content:i.getContent()};}delete i.condenserState;}else if(i.getProperty("state")==="NEW"){C.create[i.getFileType()][k]={};C.create[i.getFileType()][k][i.getId()]=i.getDefinition();}});}return C;}
function g(A,p){return d(p).then(c.bind(undefined,p.layer)).then(function(C){p.url=C.url;var o=O.get(A,C.writeConnectorModule);return o.call(C.writeConnectorModule,p);});}
var h={};
h.write=function(p){return g("write",p);};
h.condense=function(p){p.flexObjects=e(p);if(!p.flexObjects){return Promise.reject("No changes were provided");}return g("condense",p);};
h.remove=function(p){return g("remove",p);};
h.update=function(p){return g("update",p);};
h.reset=function(p){return g("reset",p);};
h.getFlexInfo=function(p){return g("getFlexInfo",p);};
h.getContexts=function(p){return g("getContexts",p);};
h.loadContextDescriptions=function(p){return g("loadContextDescriptions",p);};
h.isContextSharingEnabled=function(p){return g("isContextSharingEnabled",p);};
h.loadFeatures=function(){return _().then(b).then(a.mergeResults);};
h.publish=function(p){return g("publish",p);};
h.versions={load:function(p){return _().then(g.bind(undefined,"versions.load",p));},activate:function(p){return _().then(g.bind(undefined,"versions.activate",p));},discardDraft:function(p){return _().then(g.bind(undefined,"versions.discardDraft",p));}};return h;});
sap.ui.predefine('sap/ui/fl/write/_internal/StorageFeaturesMerger',["sap/base/util/merge"],function(m){"use strict";var D={isKeyUser:false,isVariantSharingEnabled:false,isVariantPersonalizationEnabled:true,isAtoAvailable:false,isAtoEnabled:false,versioning:{},isProductiveSystem:true,isPublicLayerAvailable:false,isZeroDowntimeUpgradeRunning:false,system:"",client:""};
function _(r){var v={};var V=!!r.features.isVersioningEnabled;r.layers.forEach(function(l){v[l]=V;});return v;}
return{mergeResults:function(r){var R=D;r.forEach(function(o){Object.keys(o.features).forEach(function(k){if(k!=="isVersioningEnabled"){R[k]=o.features[k];}});R.versioning=m(R.versioning,_(o));});return R;}};});
sap.ui.predefine('sap/ui/fl/write/_internal/Versions',["sap/ui/fl/registry/Settings","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Storage","sap/base/util/UriParameters","sap/ui/model/json/JSONModel","sap/ui/fl/Utils","sap/ui/model/BindingMode"],function(S,C,a,U,J,b,B){"use strict";var _={};var M=9;var c=M+1;
function d(p,v,h){var i=g(h);var n=sap.ui.fl.Versions.Original;h.forEach(function(o){if(o.version===sap.ui.fl.Versions.Draft){o.type="draft";}else if(n===sap.ui.fl.Versions.Original){o.type="active";n=o.version;}else{o.type="inactive";}});var P=b.getParameter(sap.ui.fl.Versions.UrlParameter);var j;if(P){j=parseInt(P);}else if(h.length>0){j=h[0].version;}else{j=sap.ui.fl.Versions.Original;}var m=new J({versioningEnabled:v,versions:h,activeVersion:n,backendDraft:i,dirtyChanges:false,draftAvailable:i,activateEnabled:i,persistedVersion:j,displayedVersion:j});m.setDefaultBindingMode(B.OneWay);m.setSizeLimit(M);m.setDirtyChanges=function(D){m.setProperty("/dirtyChanges",D);m.updateDraftVersion();m.updateBindings(true);};m.updateDraftVersion=function(){var h=m.getProperty("/versions");var v=m.getProperty("/versioningEnabled");var D=m.getProperty("/dirtyChanges");var i=m.getProperty("/backendDraft");var k=v&&(D||i);m.setProperty("/draftAvailable",k);var l=D?sap.ui.fl.Versions.Draft:m.getProperty("/persistedVersion");m.setProperty("/displayedVersion",l);if(!g(h)&&k){h.splice(0,0,{version:sap.ui.fl.Versions.Draft,type:"draft"});}if(g(h)&&!k){h.shift();m.setProperty("/displayedVersion",m.getProperty("/persistedVersion"));}var A=m.getProperty("/displayedVersion")!==m.getProperty("/activeVersion");m.setProperty("/activateEnabled",A);};return m;}
function e(p,D){var h=[];var i=D.changePersistences;i.forEach(function(o){h=o.getDirtyChanges().concat();h.forEach(function(j){o.deleteChange(j,true);});});return h.length>0;}
function f(p){var D={dirtyChangesExist:false,changePersistences:[]};if(p.reference){var o=C.getChangePersistenceForComponent(p.reference);if(o.getDirtyChanges().length>0){D.dirtyChangesExist=true;D.changePersistences.push(o);}}if(p.nonNormalizedReference){var h=C.getChangePersistenceForComponent(p.nonNormalizedReference);if(h.getDirtyChanges().length>0){D.dirtyChangesExist=true;D.changePersistences.push(h);}}return D;}
function g(v){return v.some(function(o){return o.version===sap.ui.fl.Versions.Draft;});}
var V={};
V.initialize=function(p){var r=p.reference;var l=p.layer;p.limit=c;return S.getInstance().then(function(s){var v=s.isVersioningEnabled(l);var h=v?a.versions.load(p):Promise.resolve([]);return h.then(function(i){_[r]=_[r]||{};_[r][l]=_[r][l]||{};_[r][l]=d(p,v,i);return _[r][l];});});};
V.getVersionsModel=function(p){var r=p.reference;var l=p.layer;if(!_[r]||!_[r][l]){throw Error("Versions Model for reference '"+r+"' and layer '"+l+"' were not initialized.");}var D=f(p);if(D.dirtyChangesExist){_[r][l].updateDraftVersion(p);}return _[r][l];};
V.clearInstances=function(){_={};};
V.onAllChangesSaved=function(p){p.reference=b.normalizeReference(p.reference);var m=V.getVersionsModel(p);var v=m.getProperty("/versioningEnabled");var D=m.getProperty("/dirtyChanges");m.setProperty("/dirtyChanges",true);m.setProperty("/backendDraft",v&&D);m.updateDraftVersion();};
V.activate=function(p){var m=V.getVersionsModel(p);var v=m.getProperty("/versions");var D=g(v);var s=m.getProperty("/displayedVersion");var A=m.getProperty("/activeVersion");var n=m.getProperty("/persistedVersion");if(s===A){return Promise.reject("Version is already active");}p.version=s;var h=[];if(m.getProperty("/dirtyChanges")){var o=f(p);var i=o.changePersistences;h=i.map(function(j){return j.saveDirtyChanges(p.appComponent,false,undefined,n);});}return Promise.all(h).then(a.versions.activate.bind(undefined,p)).then(function(j){v.forEach(function(k){k.type="inactive";});j.type="active";if(D){v.shift();}v.splice(0,0,j);m.setProperty("/backendDraft",false);m.setProperty("/dirtyChanges",false);m.setProperty("/draftAvailable",false);m.setProperty("/activateEnabled",false);m.setProperty("/activeVersion",j.version);m.setProperty("/displayedVersion",j.version);m.setProperty("/persistedVersion",j.version);m.updateBindings(true);});};
V.discardDraft=function(p){var m=V.getVersionsModel(p);var v=m.getProperty("/versions");var D=f(p);var h=m.getProperty("/backendDraft");var o=h?a.versions.discardDraft(p):Promise.resolve();return o.then(function(){v.shift();m.setProperty("/backendDraft",false);m.setProperty("/dirtyChanges",false);m.setProperty("/draftAvailable",false);m.setProperty("/activateEnabled",false);m.setProperty("/displayedVersion",m.getProperty("/persistedVersion"));m.updateBindings(true);var i=e(p,D);return{backendChangesDiscarded:h,dirtyChangesDiscarded:i};});};
return V;});
sap.ui.predefine('sap/ui/fl/write/_internal/appVariant/AppVariant',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge","sap/base/Log"],function(q,M,U,L,m,a){"use strict";
var A=M.extend("sap.ui.fl.write._internal.appVariant.AppVariant",{
constructor:function(p){M.apply(this);if(!q.isPlainObject(p)){a.error("Constructor : sap.ui.fl.write._internal.appVariant.AppVariant: mPropertyBag is not defined");}this._oDefinition=p;return this;},
metadata:{library:"sap.ui.fl",properties:{mode:{type:"string"}}}
});
A.modes={NEW:"NEW",EXISTING:"EXISTING",DELETION:"DELETION"};
A.prototype._isValidMode=function(s){var b=false;Object.keys(A.modes).some(function(k){if(A.modes[k]===s){b=true;}});return b;};
A.prototype.setMode=function(s){if(this._isValidMode(s)){this.setProperty("mode",s);}else{throw new Error("Provide a correct operation mode");}};
A.prototype.setTransportRequest=function(t){try{U.checkTransportRequest(t);}catch(e){return Promise.reject(e);}this._oDefinition.transport=t;return Promise.resolve();};
A.prototype.setReference=function(r){if(r===undefined||typeof r!=="string"){throw new Error("No parameter sReference of type string provided");}this._oDefinition.reference=r;};
A.prototype.setPackage=function(p){try{U.checkPackage(p);}catch(e){return Promise.reject(e);}this._oDefinition.packageName=p;return Promise.resolve();};
A.prototype.getDefinition=function(){return this._oDefinition;};
A.prototype.getId=function(){return this._oDefinition.id;};
A.prototype.getNamespace=function(){return this._oDefinition.namespace||U.getNameAndNameSpace(this._oDefinition.id,this._oDefinition.reference).namespace;};
A.prototype.getFileName=function(){return this._oDefinition.fileName||U.getNameAndNameSpace(this._oDefinition.id,this._oDefinition.reference).fileName;};
A.prototype.getReference=function(){return this._oDefinition.reference;};
A.prototype.getPackage=function(){return this._oDefinition.packageName;};
A.prototype.getVersion=function(){return this._oDefinition.version;};
A.prototype.getTransportRequest=function(){return this._oDefinition.transport;};
A.prototype.getJson=function(){return m({},this._getMap());};
A.prototype._getMap=function(){var b={};switch(this.getMode()){case A.modes.NEW:b={fileName:this.getFileName(),fileType:"appdescr_variant",namespace:this.getNamespace(),layer:this._oDefinition.layer,packageName:this._oDefinition.packageName?this._oDefinition.packageName:"",reference:this._oDefinition.reference,id:this._oDefinition.id,content:this._oDefinition.content||[]};if(this._oDefinition.referenceVersion){b.referenceVersion=this._oDefinition.referenceVersion;}if(this._oDefinition.version){b.version=this._oDefinition.version;}break;case A.modes.EXISTING:b={fileName:this._oDefinition.fileName,fileType:this._oDefinition.fileType,namespace:this._oDefinition.namespace,layer:this._oDefinition.layer,packageName:this._oDefinition.packageName,reference:this._oDefinition.reference,id:this._oDefinition.id,content:this._oDefinition.content};if(this._oDefinition.referenceVersion){b.referenceVersion=this._oDefinition.referenceVersion;}if(this._oDefinition.version){b.version=this._oDefinition.version;}break;case A.modes.DELETION:b={id:this._oDefinition.id};break;default:}return b;};
A.prototype.addDescriptorInlineChange=function(d){return new Promise(function(r){var s=function(_,i){if(_["setHostingIdForTextKey"]){_.setHostingIdForTextKey(i);}};s(d,this.getId());this._oDefinition.content.push(d.getMap());r(null);}.bind(this));};
A.prototype.submit=function(){var b=this._getMap();var p={flexObject:{},appVariant:this};if(this._oDefinition.transport){p.transport=this._oDefinition.transport;}if(this._oDefinition.skipIam){p.skipIam=this._oDefinition.skipIam;}if(this._oDefinition.isForSmartBusiness){p.isForSmartBusiness=this._oDefinition.isForSmartBusiness;}if(b.layer){p.layer=b.layer;}p.url="/sap/bc/lrep";var B;switch(this.getMode()){case A.modes.NEW:Object.assign(p.flexObject,b);B=L.appVariant.create(p);break;case A.modes.EXISTING:p.reference=b.id;Object.assign(p.flexObject,b);B=L.appVariant.update(p);break;case A.modes.DELETION:p.reference=b.id;B=L.appVariant.remove(p);break;default:return Promise.reject("Please provide a valid operation.");}return B.then(function(r){return r;});};
return A;});
sap.ui.predefine('sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/fl/descriptorRelated/internal/Utils","sap/base/Log"],function(q,M,U,L){"use strict";
var A=M.extend("sap.ui.fl.write._internal.appVariant.AppVariantInlineChange",{
metadata:{library:"sap.ui.fl"},
constructor:function(p){M.apply(this);if(!q.isPlainObject(p)){L.error("Constructor : sap.ui.fl.write._internal.appVariant.AppVariantInlineChange: mPropertyBag is not defined");}U.checkTexts(p.texts);this._oDefinition=p;return this;}
});
A.prototype._getChangeType=function(){return this._oDefinition.changeType;};
A.prototype.getMap=function(){return this._oDefinition;};
A.prototype.getContent=function(){return this._oDefinition.content;};
A.prototype.getTexts=function(){return this._oDefinition.texts;};
A.prototype.getHostingIdSuffix=function(){return this._sHostingIdSuffix;};
A.prototype.setHostingIdSuffix=function(h){this._sHostingIdSuffix=h;};
A.prototype.replaceHostingIdForTextKey=function(n,o,c,t){var C=JSON.stringify(c);if(t){Object.keys(t).forEach(function(T){var s;if(T.indexOf(o)===0){s=n+T.substring(o.length);this._oDefinition.texts[s]=this._oDefinition.texts[T];delete this._oDefinition.texts[T];C=C.split("{{"+T+"}}").join("{{"+s+"}}");}},this);this._oDefinition.content=JSON.parse(C);}};
A.prototype.setHostingIdForTextKey=function(h){if(this.getHostingIdSuffix()){var t=h+this.getHostingIdSuffix();if(this._oDefinition.texts){this._oDefinition.texts[t]=this._oDefinition.texts[""];delete this._oDefinition.texts[""];}}};
return A;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/BackendConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(m,B,I,a,W,_){"use strict";
function b(p){var P={};if(p.parentVersion!==undefined){P.parentVersion=p.parentVersion;}if(this.isLanguageInfoRequired){a.addLanguageInfo(P);}var w=a.getUrl(this.ROUTES.CHANGES,p,P);delete p.fileName;delete P["sap-language"];var t=a.getUrl(this.ROUTES.TOKEN,p,P);var r=W.getRequestOptions(this.initialConnector,t,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");return W.sendRequest(w,p.method,r);}
function c(p){p.fileName=p.flexObject.fileName;return b.call(this,p);}
var d=m({},B,{xsrfToken:null,reset:function(p){var P=["reference","generator"];var e=_(p,P);if(p.selectorIds){e.selector=p.selectorIds;}if(p.changeTypes){e.changeType=p.changeTypes;}delete p.reference;var r=a.getUrl(this.ROUTES.CHANGES,p,e);var t=a.getUrl(this.ROUTES.TOKEN,p);var R=W.getRequestOptions(this.initialConnector,t);return W.sendRequest(r,"DELETE",R);},write:function(p){p.method="POST";return b.call(this,p).then(function(r){if(r.response&&!Array.isArray(r.response)){r.response=[r.response];}return r;});},update:function(p){p.method="PUT";return c.call(this,p);},remove:function(p){var P={namespace:p.flexObject.namespace};p.fileName=p.flexObject.fileName;var D=a.getUrl(this.ROUTES.CHANGES,p,P);delete p.fileName;var t=a.getUrl(this.ROUTES.TOKEN,p);var r=W.getRequestOptions(this.initialConnector,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",r);},loadFeatures:function(p){if(this.initialConnector.settings){return Promise.resolve({response:this.initialConnector.settings});}var f=a.getUrl(this.ROUTES.SETTINGS,p);return a.sendRequest(f).then(function(r){return r.response;});}});d.initialConnector=I;return d;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/JsObjectConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var M={_itemsStoredAsObjects:true,_items:{},setItem:function(k,v){M._items[k]=v;},removeItem:function(k){delete M._items[k];},clear:function(){M._items={};},getItem:function(k){return M._items[k];},getItems:function(){return M._items;}};var J=m({},O,{storage:M});
J.loadFeatures=function(){return O.loadFeatures.apply(this,arguments).then(function(f){return m({isPublicLayerAvailable:true,isVariantAdaptationEnabled:true},f);});};
return J;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/KeyUserConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/KeyUserConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils"],function(m,B,I,a,W){"use strict";var P="/flex/keyuser";var A="/v1";
function _(p){p.initialConnector=I;p.xsrfToken=I.xsrfToken;p.tokenUrl=K.ROUTES.TOKEN;}
function b(p){var o={title:p.title};p.payload=JSON.stringify(o);p.dataType="json";p.contentType="application/json; charset=utf-8";}
function r(v){v.version=v.versionNumber;delete v.versionNumber;return v;}
var K=m({},B,{layers:I.layers,ROUTES:{CHANGES:P+A+"/changes/",SETTINGS:P+A+"/settings",TOKEN:P+A+"/settings",VERSIONS:{GET:P+A+"/versions/",ACTIVATE:P+A+"/versions/activate/",DISCARD:P+A+"/versions/draft/"}},isLanguageInfoRequired:true,loadFeatures:function(p){return B.loadFeatures.call(K,p).then(function(f){f.isPublicLayerAvailable=f.isPublicLayerAvailable&&!f.isVariantAdaptationEnabled;return f;});}});K.versions={load:function(p){_(p);var c={};a.addLanguageInfo(c);c.limit=p.limit;var v=a.getUrl(K.ROUTES.VERSIONS.GET,p,c);return a.sendRequest(v,"GET",p).then(function(R){return R.response.map(function(V){return r(V);});});},activate:function(p){_(p);b(p);var c={version:p.version};a.addLanguageInfo(c);var v=a.getUrl(K.ROUTES.VERSIONS.ACTIVATE,p,c);return W.sendRequest(v,"POST",p).then(function(R){var V=R.response;return r(V);});},discardDraft:function(p){_(p);var v=a.getUrl(K.ROUTES.VERSIONS.DISCARD,p);return W.sendRequest(v,"DELETE",p);}};K.initialConnector=I;return K;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/LocalStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var L=m({},O,{storage:window.localStorage});
L.loadFeatures=function(){return O.loadFeatures.apply(this,arguments).then(function(f){return m({isPublicLayerAvailable:true,isVariantAdaptationEnabled:true},f);});};
return L;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/LrepConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/ui/fl/write/_internal/transport/TransportSelection","sap/ui/fl/registry/Settings","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/Change","sap/ui/core/Component","sap/ui/core/BusyIndicator","sap/base/Log","sap/m/MessageBox","sap/base/util/restricted/_pick"],function(m,B,I,a,W,T,S,L,b,U,C,c,d,e,M,_){"use strict";var R={FLEX_INFO:"/flex/info/",PUBLISH:"/actions/make_changes_transportable/",CHANGES:"/changes/",CONDENSE:"/actions/condense/",VARIANTS:"/variants/",SETTINGS:"/flex/settings",TOKEN:"/actions/getcsrftoken/",APPVARIANTS:"/appdescr_variants/",APPVARIANTS_OVERVIEW:"/app_variant_overview/",UI2PERSONALIZATION:"/ui2personalization/",CONTEXTS:"/flex/contexts/"};var f=function(p){var r;if(p.isLegacyVariant){r=R.VARIANTS;}else if(p.isAppVariant){r=R.APPVARIANTS;}else if(p.isContextSharing){r=R.CONTEXTS;}else if(p.isCondensingEnabled){r=R.CONDENSE;}else{r=R.CHANGES;}var P=p.transport?{changelist:p.transport}:{};if(p.skipIam){P.skipIam=p.skipIam;}a.addLanguageInfo(P);I._addClientInfo(P);if(p.flexObject&&!p.isAppVariant){p.fileName=p.flexObject.fileName;}var w=a.getUrl(r,p,P);delete p.reference;delete p.fileName;var t=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,t,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");return W.sendRequest(w,p.method,o);};var g=function(A){var p=A.getDefinition().layer===L.VENDOR?A.getPackage():"";return new C({fileName:A.getDefinition().fileName,fileType:A.getDefinition().fileType,packageName:p,namespace:A.getNamespace()});};var h=function(p){var t;if(p.transport){t=Promise.resolve({transport:p.transport});}else if(p.isForSmartBusiness){return Promise.resolve();}else{var o=g(p.appVariant);t=new T().openTransportSelection(o);}return t.then(function(i){if(i==="cancel"){return Promise.reject("cancel");}if(i&&i.transport!==undefined){return i.transport;}return Promise.reject(new Error("Transport information could not be determined"));});};return m({},B,{initialConnector:I,layers:I.layers,reset:function(p){d.show(0);var i=[];var t=Promise.resolve();if(p.layer!==L.USER){i=p.changes;t=S.getInstance().then(function(s){if(!s.isProductiveSystem()){return new T().setTransports(i,c.get(p.reference)).then(function(){i.some(function(o){if(o.getRequest()){p.changelist=o.getRequest();return true;}return false;});});}});}return t.then(function(){d.show(0);var P=["reference","layer","changelist","generator"];var j=_(p,P);I._addClientInfo(j);if(p.selectorIds){j.selector=p.selectorIds;}if(p.changeTypes){j.changeType=p.changeTypes;}delete p.reference;var r=a.getUrl(R.CHANGES,p,j);var s=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,s);return W.sendRequest(r,"DELETE",o).then(function(k){if(k&&k.response){k.response.forEach(function(l){l.fileName=l.name;delete l.name;});}d.hide();return k;}).catch(function(E){d.hide();return Promise.reject(E);});});},publish:function(p){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");var H=function(E){d.hide();var s=r.getText("MSG_TRANSPORT_ERROR",E?[E.message||E]:undefined);var i=r.getText("HEADER_TRANSPORT_ERROR");e.error("transport error"+E);M.show(s,{icon:M.Icon.ERROR,title:i,styleClass:p.transportDialogSettings.styleClass});return"Error";};var t=new T();return t.openTransportSelection(null,p.transportDialogSettings.rootControl,p.transportDialogSettings.styleClass).then(function(o){if(t.checkTransportInfo(o)){d.show(0);var i={reference:p.reference,layer:p.layer};return t._prepareChangesForTransport(o,p.localChanges,p.appVariantDescriptors,i).then(function(){d.hide();if(o.transport==="ATO_NOTIFICATION"){return r.getText("MSG_ATO_NOTIFICATION");}return r.getText("MSG_TRANSPORT_SUCCESS");});}return"Cancel";})['catch'](H);},getFlexInfo:function(p){var P=["layer"];var i=_(p,P);I._addClientInfo(i);var D=a.getUrl(R.FLEX_INFO,p,i);return a.sendRequest(D).then(function(r){return r.response;});},getContexts:function(p){var P=["type","$skip","$filter"];var i=_(p,P);I._addClientInfo(i);var s=a.getUrl(R.CONTEXTS,p,i);return a.sendRequest(s).then(function(r){return r.response;});},loadContextDescriptions:function(p){p.method="POST";p.isContextSharing=true;return f(p).then(function(r){return r.response;});},isContextSharingEnabled:function(){return Promise.resolve(true);},loadFeatures:function(p){if(I.settings){I.settings.isVersioningEnabled=false;return Promise.resolve(I.settings);}var P={};I._addClientInfo(P);var F=a.getUrl(R.SETTINGS,p,P);return a.sendRequest(F).then(function(r){r.response.isVersioningEnabled=false;r.response.isVariantAdaptationEnabled=!!r.response.isPublicLayerAvailable;return r.response;});},write:function(p){p.method="POST";return f(p);},condense:function(p){p.method="POST";p.isCondensingEnabled=true;return f(p);},update:function(p){if(p.flexObject.fileType==="variant"){p.isLegacyVariant=true;}p.method="PUT";return f(p);},remove:function(p){var P={namespace:p.flexObject.namespace,layer:p.flexObject.layer};if(p.transport){P.changelist=p.transport;}I._addClientInfo(P);p.fileName=p.flexObject.fileName;var r=p.flexObject.fileType==="variant"?R.VARIANTS:R.CHANGES;var D=a.getUrl(r,p,P);D=decodeURIComponent(D);delete p.fileName;var t=a.getUrl(R.TOKEN,p);var o=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",o);},appVariant:{getManifest:function(p){var A=p.appVarUrl;var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);},load:function(p){var A=a.getUrl(R.APPVARIANTS,p);var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);},create:function(p){p.method="POST";p.isAppVariant=true;return f(p);},assignCatalogs:function(p){var P={};P.action=p.action;delete p.action;P.assignFromAppId=p.assignFromAppId;delete p.assignFromAppId;var s=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var t=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(s,"POST",r);},unassignCatalogs:function(p){var P={};P.action=p.action;delete p.action;var s=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var t=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,t,undefined,"application/json; charset=utf-8","json");return W.sendRequest(s,"POST",r);},update:function(p){return h(p).then(function(t){if(t){p.transport=t;}delete p.isForSmartBusiness;p.method="PUT";p.isAppVariant=true;return f(p);});},remove:function(p){return h(p).then(function(t){var P={};if(t){P.changelist=t;}delete p.isForSmartBusiness;var D=a.getUrl(R.APPVARIANTS,p,P);delete p.reference;var s=a.getUrl(R.TOKEN,p);var r=W.getRequestOptions(I,s,undefined,"application/json; charset=utf-8","json");return W.sendRequest(D,"DELETE",r);});},list:function(p){var P={};P.layer=p.layer;P["sap.app/id"]=p.reference;delete p.layer;delete p.reference;var A=a.getUrl(R.APPVARIANTS_OVERVIEW,p,P);var r=W.getRequestOptions(I,undefined,undefined,"application/json; charset=utf-8","json");return W.sendRequest(A,"GET",r);}},ui2Personalization:{create:function(p){p.initialConnector=this.initialConnector;var P=U.getLrepUrl();var r=W.getRequestOptions(I,P+R.TOKEN,p.flexObjects||p.flexObject,"application/json; charset=utf-8","json");var u=P+R.UI2PERSONALIZATION;return W.sendRequest(u,"PUT",r);},remove:function(p){p.initialConnector=this.initialConnector;var u=a.getUrl(R.UI2PERSONALIZATION,{url:U.getLrepUrl()},{reference:p.reference,containerkey:p.containerKey,itemname:p.itemName});return W.sendRequest(u,"DELETE");}}});});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/NeoLrepConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/NeoLrepConnector"],function(m,L,I){"use strict";return m({},L,{initialConnector:I,layers:I.layers,isContextSharingEnabled:function(){return Promise.resolve(false);},loadContextDescriptions:function(){return Promise.reject("loadContextsDescriptions is not implemented");},getContexts:function(){return Promise.reject("getContexts is not implemented");}});});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/ObjectPathConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(m,B,S,L){"use strict";var j;return m({},B,{layers:[],setJsonPath:function(i){j=i;},loadFlexData:function(p){var P=j||p.path;if(P){return L.loadResource({dataType:"json",url:P,async:true}).then(function(r){return Object.assign(S.getEmptyFlexDataResponse(),r);});}return Promise.resolve();},loadFeatures:function(p){var P=j||p.path;if(P){return L.loadResource({dataType:"json",url:P,async:true}).then(function(f,r){r.componentClassName=f;return r.settings||{};}.bind(null,p.flexReference));}return Promise.resolve({});}});});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/ObjectStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,P){"use strict";var O=m({},P,{oStorage:undefined});O.storage=O.oStorage;return O;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/PersonalizationConnector',["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/PersonalizationConnector"],function(m,B,I){"use strict";var P="/flex/personalization";var A="/v1";var F={isProductiveSystem:true};var a=m({},B,{layers:I.layers,ROUTES:{CHANGES:P+A+"/changes/",TOKEN:P+A+"/actions/getcsrftoken"},loadFeatures:function(){return Promise.resolve(F);}});a.initialConnector=I;return a;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/SessionStorageConnector',["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(m,O){"use strict";var S=m({},O,{storage:window.sessionStorage});
S.loadFeatures=function(){return O.loadFeatures.apply(this,arguments).then(function(f){return m({isPublicLayerAvailable:true,isVariantAdaptationEnabled:true},f);});};
return S;});
sap.ui.predefine('sap/ui/fl/write/_internal/connectors/Utils',["sap/ui/fl/initial/_internal/connectors/Utils"],function(U){"use strict";
function u(p){return U.sendRequest(p.tokenUrl,"HEAD").then(function(r){if(r&&r.xsrfToken){if(p.initialConnector){p.initialConnector.xsrfToken=r.xsrfToken;}p.xsrfToken=r.xsrfToken;return p;}});}
function a(p,s,m){return u(p).then(U.sendRequest.bind(undefined,s,m));}
function b(s,t,k){if(!t[k]){t[k]=s[k];return;}if(Array.isArray(t[k])){t[k]=t[k].concat(s[k]);return;}if(typeof t[k]==='object'){Object.keys(s[k]).forEach(function(i){b(s[k],t[k],i);});}t[k]=s[k];}
return{getRequestOptions:function(i,t,f,c,d){var o={xsrfToken:i.xsrfToken,tokenUrl:t,initialConnector:i};if(f){o.payload=JSON.stringify(f);}if(c){o.contentType=c;}if(d){o.dataType=d;}return o;},sendRequest:function(s,m,p){if(!p.initialConnector||(!p.initialConnector.xsrfToken&&!(m==='GET')&&!(m==='HEAD'))){return a(p,s,m);}return U.sendRequest(s,m,p).then(function(r){return r;}).catch(function(f){if(f.status===403){return a(p,s,m);}throw f;});},mergeResults:function(r){var R={};r.forEach(function(o){Object.keys(o).forEach(function(k){b(o,R,k);});});return R;}};});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant',["sap/ui/base/Object"],function(B){"use strict";
var A=B.extend("sap.ui.fl.write._internal.fieldExtensibility.ABAPExtensibilityVariant",{
_sServiceUri:null,
_mBindingInfo:null,
_mServiceInfo:null,
constructor:function(s,S,b){this._sServiceUri=s;this._mBindingInfo=b;this._mServiceInfo=S;this._oExtensionDataPromise=this._determineExtensionData();},
getExtensionData:function(){return Promise.resolve(null);},
getMetadata:function(){return this.getMetadata();},
getNavigationUri:function(){return Promise.resolve(null);},
getTexts:function(){return Promise.resolve(null);},
isActive:function(){return Promise.resolve(true);}
});
A.prototype._determineExtensionData=function(){return Promise.resolve(null);};
return A;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory',["sap/base/Log","sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/Utils","sap/ui/fl/write/_internal/fieldExtensibility/UriParser"],function(L,A,M,S,U,a){"use strict";var _={};var b=new A();
function c(C){return Promise.all([U.getBoundEntitySet(C),U.getBoundEntityType(C)]).then(function(r){return{entitySetName:r[0],entityTypeName:r[1]};});}
function d(E){L.error("Error occurred:");if(E){if(Array.isArray(E.errorMessages)){E.errorMessages.forEach(function(o){L.error(o.text);});}else{L.error(E);}}}
function e(s,B){try{var m=a.parseServiceUri(s);var o=new M(s,m,B);var j=new S(s,m,B);return Promise.all([o.isActive(),j.isActive()]).then(function(I){var k=b;if(I[0]===true){k=o;}else if(I[1]===true){k=j;}return k;}).catch(function(E){d(E);return Promise.resolve(b);});}catch(E){d(E);return Promise.resolve(b);}}
function f(s,B){if(_[s]){return _[s][B.entityTypeName];}return null;}
function g(s,B,I){if(!_[s]){_[s]={};}_[s][B.entityTypeName]=I;}
function h(C,B){var s=U.getServiceUri(C);var E=f(s,B);if(!E){return e(s,B).then(function(o){g(s,B,o);return Promise.resolve(o);});}return Promise.resolve(E);}
var i={};
i.getInstance=function(C){if(U.checkControlPrerequisites(C)){return c(C).then(function(B){return h(C,B).then(function(I){return I.getInterface();});}).catch(function(E){d(E);return Promise.resolve(b.getInterface());});}return Promise.resolve(b.getInterface());};
i.reset=function(){_={};};
return i;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant',["sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/Utils"],function(A,U){"use strict";var e="/sap/opu/odata/sap/APS_PREDEFINED_FIELD_SRV/GetExtensionDataByResourcePath";var n={semanticObject:"PredefinedCustomField",action:"configure"};
var M=A.extend("sap.ui.fl.write._internal.fieldExtensibility.MultiTenantABAPExtensibilityVariant",{
getExtensionData:function(){return this._oExtensionDataPromise.then(function(E){if(this._containsData(E)){return this._convertExtensionData(E);}return null;}.bind(this));},
getNavigationUri:function(){return this._oExtensionDataPromise.then(function(E){if(this._containsData(E)){return U.getNavigationUriForIntent({target:n,params:{businessObjectNodeName:E.BusinessObjectNodeName,cdsEntityName:E.CdsEntityName,serviceVersion:this._mServiceInfo.serviceVersion,serviceName:this._mServiceInfo.serviceName}});}return null;}.bind(this));},
getTexts:function(){return this._oExtensionDataPromise.then(function(E){if(this._containsData(E)){return{tooltip:U.getText("BTN_ADD_FIELD"),headerText:U.getText("BUSINESS_OBJECT_NODE_TITLE")};}return null;}.bind(this));},
isActive:function(){return this._oExtensionDataPromise.then(function(E){return this._containsData(E);}.bind(this));},
_containsData:function(E){return Boolean(E&&E.BusinessObjectNodeName&&E.CdsEntityName);},
_convertExtensionData:function(E){return{extensionData:[{businessContext:E.BusinessObjectNodeName,description:E.BusinessObjectNodeDescription}]};},
_determineExtensionData:function(){return new Promise(function(r,R){U.isNavigationSupportedForIntents([n]).then(function(N){var i=N.some(function(b){return b===true;});if(i){U.executeRequest(e,{ResourcePath:this._sServiceUri,EntitySetName:this._mBindingInfo.entitySetName}).then(function(o){if(o.errorOccurred===false){r(this._extractExtensionDataFromResponse(o.result));}else{R(o);}}.bind(this));}else{r(null);}}.bind(this));}.bind(this));},
_extractExtensionDataFromResponse:function(r){return r.GetExtensionDataByResourcePath;}
});
return M;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant',["sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/UriParser","sap/ui/fl/write/_internal/fieldExtensibility/Utils"],function(A,U,a){"use strict";var e="/sap/opu/odata/SAP/APS_CUSTOM_FIELD_MAINTENANCE_SRV/";var E={None:-1,Both:0,Fields:1,Logic:2};var n=[{semanticObject:"CustomField",action:"develop"},{semanticObject:"CustomField",action:"manage"},{semanticObject:"CustomLogic",action:"maintain"}];var t=["BTN_FREP_CCF","BTN_ADD_FIELD","BTN_ADD_LOGIC"];
var S=A.extend("sap.ui.fl.write._internal.fieldExtensibility.SingleTenantABAPExtensibilityVariant",{
_iExtensibilityType:E.None,
getExtensionData:function(){return this._oExtensionDataPromise.then(function(b){if(this._containsData(b)){return this._convertBusinessContextsToExtensionData(b);}return null;}.bind(this));},
getNavigationUri:function(){return this._oExtensionDataPromise.then(function(b){if(this._containsData(b)&&this._iExtensibilityType!==E.None){return a.getNavigationUriForIntent({target:n[this._iExtensibilityType],params:{businessContexts:b.map(function(B){return B.BusinessContext;}),serviceVersion:this._mServiceInfo.serviceVersion,serviceName:this._mServiceInfo.serviceName,entityType:this._mBindingInfo.entityTypeName}});}Promise.resolve(null);}.bind(this));},
getTexts:function(){return this._oExtensionDataPromise.then(function(b){if(this._containsData(b)){return{tooltip:a.getText(t[this._iExtensibilityType]),headerText:a.getText("BUSINESS_CONTEXT_TITLE")};}return null;}.bind(this));},
isActive:function(){return this._oExtensionDataPromise.then(function(b){return this._containsData(b);}.bind(this));},
_adjustExtensibilityTypeByAuthorizations:function(N,i){if(N[i]){return i;}else if(N[E.Both]){return E.Both;}else if(i===E.Both){if(N[E.Fields]){return E.Fields;}else if(N[E.Logic]){return E.Logic;}}return E.None;},
_containsData:function(b){return Boolean(b&&b.length>0);},
_convertBusinessContextsToExtensionData:function(b){var c=b.map(function(B){return{description:B.BusinessContextDescription,businessContext:B.BusinessContext};});return{extensionData:c};},
_determineExtensionData:function(){return new Promise(function(r,R){a.isNavigationSupportedForIntents(n).then(function(N){var i=N.some(function(b){return b===true;});if(i){a.executeRequest(this._getExtensionDataServiceUri(),this._getExtensionDataServiceParameters()).then(function(o){if(o.errorOccurred===false){var b=this._extractBusinessContextsFromResponse(o.result);this._iExtensibilityType=this._determineExtensibilityType(N,b);if(this._iExtensibilityType!==E.None){r(b);}else{r(null);}}else if(o.statusCode===404&&this._mServiceInfo.serviceType===U.mServiceType.v4){r(null);}else{R(o);}}.bind(this));}else{r(null);}}.bind(this));}.bind(this));},
_determineExtensibilityType:function(N,b){var i=this._determineExtensibilityTypeFromBusinessContexts(b);if(i!==E.None){return this._adjustExtensibilityTypeByAuthorizations(N,i);}return i;},
_determineExtensibilityTypeFromBusinessContexts:function(b){var s=false;var c=false;b.forEach(function(B){if(B.hasOwnProperty("SupportsLogicEnhancements")===false||B.SupportsLogicEnhancements===true){s=true;}if(B.hasOwnProperty("SupportsStructuralEnhancements")===false||B.SupportsStructuralEnhancements===true){c=true;}});if(s&&c){return E.Both;}else if(!s&&c){return E.Fields;}else if(s&&!c){return E.Logic;}return null;},
_extractBusinessContextsFromResponse:function(r){return r.results||[];},
_getExtensionDataServiceParameters:function(){var p={EntitySetName:"",EntityTypeName:this._mBindingInfo.entityTypeName};if(this._mServiceInfo.serviceType===U.mServiceType.v4){p.ResourcePath=U.sODataV4ResourcePathPrefix+this._mServiceInfo.serviceName+"/"+this._mServiceInfo.serviceVersion;}else{p.ServiceName=this._mServiceInfo.serviceName;p.ServiceVersion=this._mServiceInfo.serviceVersion;}return p;},
_getExtensionDataServiceUri:function(){if(this._mServiceInfo.serviceType===U.mServiceType.v4){return e+"GetBusinessContextsByResourcePath";}return e+"GetBusinessContextsByEntityType";}
});
return S;});
sap.ui.predefine('sap/ui/fl/write/_internal/flexState/FlexObjectState',["sap/base/util/restricted/_omit","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/LayerUtils","sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/Utils"],function(_,F,M,C,a,b,L,c,U){"use strict";var d={};
function i(p){p.reference=M.getFlexReferenceForControl(p.selector);return F.initialize({componentId:p.componentId||U.getAppComponentForControl(p.selector).getId(),reference:p.reference,componentData:{},manifest:{}});}
function g(p){var m=F.getCompVariantsMap(p.reference);var E=[];for(var P in m){var j=m[P];for(var I in j.byId){E.push(j.byId[I]);}}return L.filterChangeOrChangeDefinitionsByCurrentLayer(E,p.currentLayer);}
function s(p){var r=M.getFlexReferenceForControl(p.selector);return a.persistAll(r);}
function e(p){if(!p.reference){var A=C.getAppComponentForSelector(p.selector);p.reference=M.getFlexReferenceForControl(A);}return b.getChangePersistenceForComponent(p.reference);}
function f(p){var o=e(p);return o.getChangesForComponent(_(p,["invalidateCache","selector"]),p.invalidateCache).then(function(P){var D=[];if(p.includeDirtyChanges){D=o.getDirtyChanges();}return P.concat(D);});}
function h(p,A){var o=C.getFlexControllerInstance(p.selector);var D=C.getDescriptorFlexControllerInstance(p.selector);return o.saveAll(A,p.skipUpdateCache,p.draft).then(D.saveAll.bind(D,A,p.skipUpdateCache,p.draft));}
d.getFlexObjects=function(p){return i(p).then(function(){var j=g(p);var k=f(p);return Promise.all([j,k]).then(function(E){return E[0].concat(E[1]);});});};
d.saveFlexObjects=function(p){var A=C.getAppComponentForSelector(p.selector);return Promise.all([s(p),h(p,A)]).then(function(){if(p.layer){p.currentLayer=p.layer;}p.componentId=A.getId();p.invalidateCache=true;return d.getFlexObjects(_(p,"skipUpdateCache"));});};
return d;});
sap.ui.predefine('sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState',["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/UriParameters","sap/ui/fl/Layer","sap/ui/fl/Change","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/RevertData","sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage"],function(_,a,U,L,C,b,c,d,R,e,f,F,g,S,h){"use strict";
function j(i){var D=i.getDefinition();var E=F.getCompVariantsMap(i.getComponent());var P=i.getSelector().persistencyKey;E[P].changes.push(i);E[P].byId[i.getId()]=i;return D;}
function r(i){var P=i.getSelector().persistencyKey;var D=F.getCompVariantsMap(i.getComponent());delete D[P].byId[i.getId()];D[P].changes=D[P].changes.filter(function(E){return E!==i;});}
function k(i,D){if(!["defaultVariant","updateVariant"].includes(i.getChangeType())){return false;}var E=i.getLayer()===D;var P=i.getDefinition().packageName;var N=!P||P==="$TMP";return E&&N;}
function l(O,D){for(var i=O.length-1;i>=0;i--){if((O[i].fileName||O[i].getFileName())===D.fileName){O.splice(i,1);break;}}}
function m(M,i){if(i.isVariant()){return M.variants;}switch(i.getChangeType()){case"defaultVariant":return M.defaultVariants;case"standardVariant":return M.standardVariants;default:return M.changes;}}
function w(i,D){return h.write({flexObjects:[i.getDefinition()],layer:i.getLayer(),transport:i.getRequest(),isLegacyVariant:i.isVariant()}).then(function(E){if(E&&E.response&&E.response[0]){i.setResponse(E.response[0]);}else{i.setState(C.states.PERSISTED);}return D;}).then(function(D){m(D.changes.comp,i).push(i.getDefinition());return i.getDefinition();});}
function u(O,D){for(var i=0;i<O.length;i++){if(O[i].fileName===D.fileName){O.splice(i,1,D);break;}}}
function n(i,D){return h.update({flexObject:i.getDefinition(),layer:i.getLayer(),transport:i.getRequest()}).then(function(E){if(E&&E.response){i.setResponse(E.response);}else{i.setState(C.states.PERSISTED);}return D;}).then(function(D){var O=m(D.changes.comp,i);u(O,i.getDefinition());return i.getDefinition();});}
function o(i,D,E){return h.remove({flexObject:i.getDefinition(),layer:i.getLayer(),transport:i.getRequest()}).then(function(){delete D.byId[i.getId()];if(i.getChangeType()==="standardVariant"){D.standardVariantChange=undefined;}else{l(m(D,i),i.getDefinition());}return E;}).then(function(E){l(m(E.changes.comp,i),i.getDefinition());return i.getDefinition();});}
function p(i){return i&&[C.states.NEW,C.states.DIRTY,C.states.DELETED].includes(i.getPendingAction());}
function q(i){return i.variants.concat(i.changes).concat(i.defaultVariants).concat(i.standardVariantChange);}
function s(P){var i={};if(typeof(P.texts)==="object"){Object.keys(P.texts).forEach(function(D){i[D]={value:P.texts[D],type:"XFLD"};});}return i;}
function t(P){if(P.layer){return P.layer;}if(P.isUserDependent){return L.USER;}var i=U.fromQuery(window.location.search).get("sap-ui-layer")||"";i=i.toUpperCase();if(i){return i;}if(!P.fileType==="variant"){return L.CUSTOMER;}var D=S.getInstanceOrUndef().isPublicLayerAvailable();return D?L.PUBLIC:L.CUSTOMER;}
function v(P){var i=F.getCompVariantsMap(P.reference)._getOrCreate(P.persistencyKey);return i.byId[P.id];}
function x(i){if(i instanceof d){i.removeAllRevertInfo();}}
function y(V,P){V.storeExecuteOnSelection(P.executeOnSelection);V.storeFavorite(P.favorite);V.storeContexts(P.contexts);if(P.name){V.setText("variantName",P.name);}V.storeContent(P.content||V.getContent());return V;}
function z(V,P){V.setExecuteOnSelection(P.executeOnSelection);V.setFavorite(P.favorite);V.setContexts(P.contexts);if(P.name){V.setName(P.name);}V.setContent(P.content||V.getContent());return V;}
var A={};
A.setDefault=function(P){var i={defaultVariantName:P.defaultVariantId};P.layer=P.layer||U.fromQuery(window.location.search).get("sap-ui-layer")||L.USER;var D=F.getCompVariantsMap(P.reference)._getOrCreate(P.persistencyKey);var E="defaultVariant";var G=D.defaultVariants;var H=G[G.length-1];if(!H||!k(H,P.layer)){var I={fileName:f.createDefaultFileName(E),fileType:"change",changeType:E,layer:P.layer,content:i,namespace:f.createNamespace(P,"changes"),reference:P.reference,selector:{persistencyKey:P.persistencyKey},support:P.support||{}};I.support.generator=I.support.generator||"CompVariantState."+E;I.support.sapui5Version=sap.ui.version;var H=new b(I);D.defaultVariants.push(H);D.byId[H.getId()]=H;H.addRevertInfo(new R({type:A.operationType.NewChange}));}else{H.addRevertInfo(new R({type:A.operationType.ContentUpdate,content:{previousState:H.getState(),previousContent:H.getContent()}}));H.setContent(i);}return H;};
A.revertSetDefaultVariantId=function(P){var i=F.getCompVariantsMap(P.reference)._getOrCreate(P.persistencyKey);var D=i.defaultVariants;var E=D[D.length-1];var G=E.popLatestRevertInfo();if(G.getType()===A.operationType.ContentUpdate){E.setContent(G.getContent().previousContent);E.setState(G.getContent().previousState);}else{E.setState(C.states.DELETED);i.defaultVariants.pop();}};
A.addVariant=function(P){if(!P){return undefined;}var i=P.changeSpecificData;var I={id:i.id,changeType:i.type,service:i.ODataService,content:i.content||{},reference:P.reference,fileType:"variant",packageName:i.packageName,layer:t(i),selector:{persistencyKey:P.persistencyKey},texts:s(i),command:P.command,generator:P.generator};if(i.favorite!==undefined){I.favorite=i.favorite;}if(i.executeOnSelection!==undefined){I.executeOnSelection=i.executeOnSelection;}if(i.contexts!==undefined){I.contexts=i.contexts;}var D=d.createInitialFileContent(I);var E=new d(D);var G=F.getCompVariantsMap(P.reference);var M=G._getOrCreate(P.persistencyKey);M.variants.push(E);M.byId[E.getId()]=E;return E;};
function B(P,V,O,i){var D={type:O,change:i,content:{previousState:V.getState(),previousContent:V.getContent(),previousFavorite:V.getFavorite(),previousExecuteOnSelection:V.getExecuteOnSelection(),previousContexts:V.getContexts()}};if(P.name){D.content.previousName=V.getText("variantName");}V.addRevertInfo(new e(D));}
A.updateVariant=function(P){function i(V,I){var K=V.getLayer()===I;var M=V.getDefinition().packageName;var N=!M||M==="$TMP";var O=V.getChanges().some(function(Q){return Q.getLayer()===I;});return V.getPersisted()&&K&&N&&!O;}function D(V){return V.getChanges().reverse().find(function(K){return K.getChangeType()==="updateVariant"&&k(K,I);});}function E(P,V){B(P,V,A.operationType.ContentUpdate);if(P.executeOnSelection!==undefined){V.storeExecuteOnSelection(P.executeOnSelection);}if(P.favorite!==undefined){V.storeFavorite(P.favorite);}if(P.contexts){V.storeContexts(P.contexts);}if(P.name){V.storeName(P.name);}V.storeContent(P.content||V.getContent());}function G(P,V,K){var M=K.getRevertData()||[];var N=K.getContent();var O={previousContent:Object.assign({},N),previousState:K.getState(),change:a(Object.assign({},P),["favorite","executeOnSelection","contexts","content","name"])};M.push(O);K.setRevertData(M);if(P.executeOnSelection!==undefined){V.setExecuteOnSelection(P.executeOnSelection);N.executeOnSelection=P.executeOnSelection;}if(P.favorite!==undefined){V.setFavorite(P.favorite);N.favorite=P.favorite;}if(P.contexts){V.setContexts(P.contexts);N.contexts=P.contexts;}if(P.content){V.setContent(P.content);N.content=P.content;}if(P.name){V.setName(P.name);N.texts={variantName:{value:P.name,type:"XFLD"}};}K.setContent(N);g.applyChangeOnVariant(V,K);B(P,V,A.operationType.UpdateVariantViaChangeUpdate,K);}function H(P,V){var K=C.createInitialFileContent({changeType:"updateVariant",layer:I,fileType:"change",reference:P.reference,content:{},selector:{persistencyKey:P.persistencyKey,variantId:V.getId()}});["favorite","executeOnSelection","contexts"].forEach(function(N){if(P[N]!==undefined){K.content[N]=P[N];}});if(P.content!==undefined){K.content.variantContent=P.content;}if(P.name){K.texts.variantName={value:P.name,type:"XFLD"};}var M=new C(K);j(M);B(P,V,A.operationType.NewChange,M);g.applyChangeOnVariant(V,M);}var V=v(P);var I=t(P);if(i(V,I)){E(P,V);}else{var J=D(V);if(J){G(P,V,J);}else{H(P,V);}}return V;};
A.operationType={StateUpdate:"StateUpdate",ContentUpdate:"ContentUpdate",NewChange:"NewChange",UpdateVariantViaChange:"UpdateVariantViaChange",UpdateVariantViaChangeUpdate:"UpdateVariantViaChangeUpdate"};
A.removeVariant=function(P){var V=v(P);if(!P.revert){var i=new e({type:A.operationType.StateUpdate,content:{previousState:V.getState()}});V.addRevertInfo(i);}V.markForDeletion();return V;};
A.revert=function(P){var V=v(P);var i=V.getRevertInfo().pop();V.removeRevertInfo(i);var D=i.getContent();switch(i.getType()){case A.operationType.ContentUpdate:y(V,Object.assign({name:D.previousName,content:D.previousContent,favorite:D.previousFavorite,executeOnSelection:D.previousExecuteOnSelection,contexts:D.previousContexts},a(P,["reference","persistencyKey","id"])));break;case A.operationType.NewChange:var E=i.getChange();V.removeChange(E);r(E);z(V,Object.assign({name:D.previousName,content:D.previousContent,favorite:D.previousFavorite,executeOnSelection:D.previousExecuteOnSelection,contexts:D.previousContexts},a(P,["reference","persistencyKey","id"])));break;case A.operationType.UpdateVariantViaChangeUpdate:var E=i.getChange();z(V,Object.assign({name:D.previousName,content:D.previousContent,favorite:D.previousFavorite,executeOnSelection:D.previousExecuteOnSelection,contexts:D.previousContexts},a(P,["reference","persistencyKey","id"])));var G=E.getRevertData().pop();E.setContent(G.previousContent);E.setState(G.previousState);break;case A.operationType.StateUpdate:default:break;}V.setState(D.previousState);return V;};
A.overrideStandardVariant=function(P){var i=F.getCompVariantsMap(P.reference)[P.persistencyKey];var D=i.byId[i.standardVariant.getId()];D.setExecuteOnSelection(!!P.executeOnSelection);var E=D.getChanges();D.removeAllChanges();E.forEach(function(G){g.applyChangeOnVariant(D,G);});};
A.persist=function(P){var i=P.reference;var D=P.persistencyKey;var E=F.getCompVariantsMap(i);var G=E._getOrCreate(D);var H=F.getStorageResponse(i);var I=q(G).filter(p).map(function(J){switch(J.getPendingAction()){case C.states.NEW:x(J);return w(J,H);case C.states.DIRTY:x(J);return n(J,H);case C.states.DELETED:x(J);return o(J,G,H);default:break;}});return Promise.all(I);};
A.persistAll=function(i){var D=_(F.getCompVariantsMap(i),"_getOrCreate","_initialize");var P=Object.keys(D).map(function(E){return A.persist({reference:i,persistencyKey:E});});return Promise.all(P);};
return A;});
sap.ui.predefine('sap/ui/fl/write/api/AppVariantWriteAPI',["sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/SaveAs","sap/ui/fl/write/_internal/connectors/LrepConnector"],function(C,S,L){"use strict";var _=function(f,p){if(!p.layer){return Promise.reject("Layer must be provided");}var F=C.getDescriptorFlexControllerInstance(p.selector);p.reference=F.getComponentName();p.url="/sap/bc/lrep";return L.appVariant[f](p);};var A={saveAs:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}if(!p.id){return Promise.reject("App variant ID must be provided");}var f=C.getDescriptorFlexControllerInstance(p.selector);p.reference=f.getComponentName();return S.saveAs(p);},deleteAppVariant:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}var f=C.getDescriptorFlexControllerInstance(p.selector);p.id=f.getComponentName();return S.deleteAppVariant(p);},listAllAppVariants:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}return _("list",p);},getManifest:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}if(!p.appVarUrl){return Promise.reject("appVarUrl must be provided");}return L.appVariant.getManifest(p);},assignCatalogs:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}if(!p.assignFromAppId){return Promise.reject("assignFromAppId must be provided");}if(!p.action){return Promise.reject("action must be provided");}return _("assignCatalogs",p);},unassignCatalogs:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}if(!p.action){return Promise.reject("action must be provided");}return _("unassignCatalogs",p);}};return A;});
sap.ui.predefine('sap/ui/fl/write/api/ChangesWriteAPI',["sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory","sap/ui/fl/registry/ChangeRegistry","sap/base/Log","sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/base/util/includes","sap/base/util/restricted/_omit"],function(A,R,C,D,a,b,c,L,d,E,J,i,_){"use strict";var e={create:function(p){var f;if(i(D.getChangeTypes(),p.changeSpecificData.changeType)){f=C.getDescriptorFlexControllerInstance(p.selector);var r=f.getComponentName();var l;if(p.changeSpecificData.layer){l=p.changeSpecificData.layer;delete p.changeSpecificData.layer;}var I={changeType:p.changeSpecificData.changeType,content:p.changeSpecificData.content};if(p.changeSpecificData.texts){I.texts=p.changeSpecificData.texts;}return a.createDescriptorInlineChange(I).then(function(o){return new b().createNew(r,o,l,p.selector);}).catch(function(o){L.error("the change could not be created.",o.message);throw o;});}if(p.selector.name&&p.selector.view){f=C.getFlexControllerInstance(p.selector.view);}else{f=C.getFlexControllerInstance(p.selector);}if(p.selector instanceof d){return f.createBaseChange(p.changeSpecificData,p.selector);}if(p.selector.name&&p.selector.view){return f.createChangeWithExtensionPointSelector(p.changeSpecificData,p.selector);}return f.createChangeWithControlSelector(p.changeSpecificData,p.selector);},apply:function(p){if(!p.element instanceof E){return Promise.reject("Please provide an Element");}var f=C.getFlexControllerInstance(p.element);p.appComponent=C.getAppComponentForSelector(p.element);if(!p.modifier){p.modifier=J;}return A.applyChangeOnControl(p.change,p.element,_(p,["element","change"])).then(function(r){var g=f.checkForOpenDependenciesForControl(p.change.getSelector(),p.appComponent);if(g){return e.revert({change:p.change,element:p.element}).then(function(){throw Error("The following Change cannot be applied because of a dependency: "+p.change.getId());});}return r;});},revert:function(p){var o;if(p.element instanceof E){o=C.getAppComponentForSelector(p.element);}var r={modifier:J,appComponent:o};return R.revertChangeOnControl(p.change,p.element,r);},getChangeHandler:function(p){var s=p.controlType||p.modifier.getControlType(p.element);return c.getInstance().getChangeHandler(p.changeType,s,p.element,p.modifier,p.layer);}};return e;});
sap.ui.predefine('sap/ui/fl/write/api/ContextSharingAPI',["sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/variants/context/Component","sap/ui/core/ComponentContainer"],function(F,C,a){"use strict";var c;var b={createComponent:function(p){return F.isContextSharingEnabled(p.layer).then(function(i){if(i){if(!c||c.bIsDestroyed){var o=new C("contextSharing");o.setSelectedContexts({role:[]});c=new a("contextSharingContainer",{component:o});}return c;}});}};return b;});
sap.ui.predefine('sap/ui/fl/write/api/ControlPersonalizationWriteAPI',["sap/ui/fl/ControlPersonalizationAPI","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(O,F,L,S,U){"use strict";var C={add:function(p){p.changes.forEach(function(P){P.selectorControl=P.selectorElement;});p.controlChanges=p.changes;return O.addPersonalizationChanges(p);},reset:function(p){p.selectors=p.selectors||[];return O.resetChanges(p.selectors,p.changeTypes);},restore:function(p){if(!p||!p.selector){return Promise.reject("No selector was provided");}var a=U.getAppComponentForControl(p.selector);if(!a){return Promise.reject("App Component could not be determined");}var f=F.createForControl(a);return f.removeDirtyChanges(L.USER,a,p.selector,p.generator,p.changeTypes);},save:function(p){var a=p.selector.appComponent||U.getAppComponentForControl(p.selector);return O.saveChanges(p.changes,a);},buildSelectorFromElementIdAndType:function(p){var a=U.getAppComponentForControl(p.element);if(!a||!p.elementId||!p.elementType){throw new Error("Not enough information given to build selector.");}return{elementId:p.elementId,elementType:p.elementType,appComponent:a,id:p.elementId,controlType:p.elementType};},isCondensingEnabled:function(){return S.getInstance().then(function(s){return s.isCondensingEnabled(L.USER);});}};return C;});
sap.ui.predefine('sap/ui/fl/write/api/ExtensionPointRegistryAPI',["sap/ui/fl/write/_internal/extensionPoint/Registry"],function(E){"use strict";var a={getExtensionPointInfo:function(p){return E.getExtensionPointInfo(p.name,p.view);},getExtensionPointInfoByViewId:function(p){return E.getExtensionPointInfoByViewId(p.viewId);},getExtensionPointInfoByParentId:function(p){return E.getExtensionPointInfoByParentId(p.parentId);}};return a;});
sap.ui.predefine('sap/ui/fl/write/api/FeaturesAPI',["sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage","sap/ui/fl/Layer"],function(S,a,L){"use strict";var F={isPublishAvailable:function(){return S.getInstance().then(function(s){return!s.isProductiveSystem();});},isSaveAsAvailable:function(l){return S.getInstance().then(function(s){if(s.isAppVariantSaveAsEnabled()&&l===L.CUSTOMER&&!!sap.ushell_abap){return true;}return false;});},isKeyUser:function(){return S.getInstance().then(function(s){return s.isKeyUser();});},isVersioningEnabled:function(l){return S.getInstance().then(function(s){return s.isVersioningEnabled(l);});},isContextSharingEnabled:function(l){return a.isContextSharingEnabled({layer:l});}};return F;});
sap.ui.predefine('sap/ui/fl/write/api/FieldExtensibility',["sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess"],function(A){"use strict";var F={};var _;
function g(){if(!_){_=A;}return _;}
function c(f,a){var i=g();return Promise.resolve(i[f](a));}
F.onControlSelected=function(C){return c("onControlSelected",C);};
F.isExtensibilityEnabled=function(C){return c("isExtensibilityEnabled",C);};
F.isServiceOutdated=function(s){return c("isServiceOutdated",s);};
F.setServiceValid=function(s){return c("setServiceValid",s);};
F.getTexts=function(){return c("getTexts");};
F.getExtensionData=function(){return c("getExtensionData");};
F.onTriggerCreateExtensionData=function(e){return c("onTriggerCreateExtensionData",e);};
return F;});
sap.ui.predefine('sap/ui/fl/write/api/LocalResetAPI',["sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Change","sap/ui/fl/Utils","sap/ui/fl/ChangePersistenceFactory","sap/base/util/restricted/_union"],function(P,C,J,a,U,b,u){"use strict";var L={};
function g(o,l,s){var p={includeDirtyChanges:true,layer:l};var d=b.getChangePersistenceForControl(o);return d.getAllUIChanges(p).filter(function(e){return(e.getState()!==a.states.DELETED&&e.getVariantReference()===(s||""));});}
function c(t){var o=U.getAppComponentForControl(t);var n=[];var O=[];function i(e,r){var R=(r||[]).concat(e);if(e===t||n.includes(e)){n=u(n,R);return true;}var p=e.getParent();if(O.includes(e)||!p){O=u(O,R);return false;}return i(p,R);}function d(e){return e.getDependentSelectorList().map(function(s){return J.bySelector(s,o);}).filter(Boolean).some(function(D){return i(D);});}return d;}
L.resetChanges=function(d,A){var r=d.slice().reverse();var R=r.map(function(o){var e=J.bySelector(o.getSelector(),A);P.remove({change:o,selector:e});o.setQueuedForRevert();return function(){return C.revert({change:o,element:e});};});return U.execPromiseQueueSequentially(R);};
L.restoreChanges=function(d,A){var e=d.map(function(o){return function(){o.restorePreviousState();var f=J.bySelector(o.getSelector(),A);P.add({change:o,selector:f});if(o.getState()===a.states.PERSISTED){var h=b.getChangePersistenceForControl(A);var D=h.getDirtyChanges();var i=D.indexOf(o);if(i>=0){D.splice(i,1);}}return C.apply({change:o,element:f,modifier:J});};});return U.execPromiseQueueSequentially(e);};
L.getNestedUIChangesForControl=function(o,p){var d=g(o,p.layer,p.currentVariant);var f=c(o);return d.filter(f);};
L.isResetEnabled=function(o,p){var d=g(o,p.layer,p.currentVariant);var f=c(o);return d.some(f);};
return L;});
sap.ui.predefine('sap/ui/fl/write/api/PersistenceWriteAPI',["sap/base/util/includes","sap/base/util/restricted/_omit","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/write/_internal/condenser/Condenser","sap/ui/fl/write/_internal/flexState/FlexObjectState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/Layer","sap/ui/fl/LayerUtils"],function(i,_,L,J,F,C,D,a,b,M,c,d,e){"use strict";var P={};
function f(o){return(o._getMap&&i(D.getChangeTypes(),o._getMap().changeType))||(o.getChangeType&&i(D.getChangeTypes(),o.getChangeType()));}
function h(p){p.includeCtrlVariants=true;p.invalidateCache=false;return P._getUIChanges(p).then(function(g){return g.length>0;});}
P.hasHigherLayerChanges=function(p){p.upToLayer=p.upToLayer||e.getCurrentLayer();return b.getFlexObjects(p).then(function(g){return g.filter(function(o){return e.isOverLayer(o.getLayer(),p.upToLayer);});}).then(function(g){return g.length>0;});};
P.save=function(p){return b.saveFlexObjects(p);};
P.getResetAndPublishInfo=function(p){return Promise.all([h(p),c.isPublishAvailable()]).then(function(r){var H=r[0];var I=r[1];var g=p.layer!==d.USER&&p.layer!==d.PUBLIC;var o={isResetEnabled:H,isPublishEnabled:H&&g&&I,allContextsProvided:true};if(g){return C.getFlexControllerInstance(p.selector).getResetAndPublishInfo(p).then(function(R){o.allContextsProvided=R.allContextsProvided===undefined||R.allContextsProvided;o.isResetEnabled=R.isResetEnabled;o.isPublishEnabled=o.isPublishEnabled&&R.isPublishEnabled;return o;}).catch(function(E){L.error("Sending request to flex/info route failed: "+E.message);return o;});}return o;});};
P.getResetAndPublishInfoFromSession=function(o){var p=M.getFlexReferenceForControl(o)||"true";return JSON.parse(window.sessionStorage.getItem("sap.ui.fl.info."+p));};
P.reset=function(p){var A=C.getAppComponentForSelector(p.selector);var o=C.getFlexControllerInstance(A);var g=[p.layer,p.generator,A,p.selectorIds,p.changeTypes];return o.resetChanges.apply(o,g);};
P.publish=function(p){p.styleClass=p.styleClass||"";var A=C.getAppComponentForSelector(p.selector);return C.getFlexControllerInstance(A)._oChangePersistence.transportAllUIChanges({},p.styleClass,p.layer,p.appVariantDescriptors);};
P.add=function(p){if(f(p.change)){return p.change.store();}var A=C.getAppComponentForSelector(p.selector);return C.getFlexControllerInstance(A).addPreparedChange(p.change,A);};
P.remove=function(p){if(!p.selector){throw new Error("An invalid selector was passed so change could not be removed with id: "+p.change.getId());}var A=C.getAppComponentForSelector(p.selector);if(!A){throw new Error("Invalid application component for selector, change could not be removed with id: "+p.change.getId());}if(f(p.change)){var o=C.getDescriptorFlexControllerInstance(A);o.deleteChange(p.change,A);return;}var E=J.bySelector(p.change.getSelector(),A);var g=C.getFlexControllerInstance(A);if(E){F.destroyAppliedCustomData(E,p.change,J);}g.deleteChange(p.change,A);};
P._condense=function(p){return Promise.resolve().then(function(){if(!p.selector){throw Error("An invalid selector was passed");}var A=C.getAppComponentForSelector(p.selector);if(!A){throw Error("Invalid application component for selector");}if(!p.changes||p.changes&&!Array.isArray(p.changes)){throw Error("Invalid array of changes");}return a.condense(A,p.changes);});};
P._getUIChanges=function(p){if(p.layer){p.currentLayer=p.layer;}return b.getFlexObjects(p);};
return P;});
sap.ui.predefine('sap/ui/fl/write/api/ReloadInfoAPI',["sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/api/VersionsAPI","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/base/util/UriParameters"],function(L,a,U,M,V,F,P){"use strict";
function i(o){var u=!!U.getParameter(sap.ui.fl.Versions.UrlParameter);if(u){return Promise.resolve(false);}return F.isVersioningEnabled(o.layer).then(function(v){return v&&V.isDraftAvailable({selector:o.selector,layer:o.layer});});}
function b(o){var u=this.hasMaxLayerParameterWithValue({value:o.layer});var d=o.layer===a.USER;if(d||u){return Promise.resolve(false);}return P.hasHigherLayerChanges({selector:o.selector,ignoreMaxLayerParameter:o.ignoreMaxLayerParameter,upToLayer:o.layer,includeCtrlVariants:o.includeCtrlVariants,includeDirtyChanges:true});}
function c(o){var C=g(o.selector);if(C!==null){return false;}var p={selector:o.selector,layer:o.layer};return P.getResetAndPublishInfo(p).then(function(d){s(d,o.selector);return!d.allContextsProvided;});}
function g(C){var f=M.getFlexReferenceForControl(C);var p=f||"true";var o=JSON.parse(window.sessionStorage.getItem("sap.ui.fl.info."+p));return o&&!o.allContextsProvided;}
function s(I,C){var f=M.getFlexReferenceForControl(C);var p=f||"true";window.sessionStorage.setItem("sap.ui.fl.info."+p,JSON.stringify(I));}
function r(C){var f=M.getFlexReferenceForControl(C);var p=f||"true";window.sessionStorage.removeItem("sap.ui.fl.info."+p);}
var R={getReloadReasonsForStart:function(o){return Promise.all([b.call(this,o),i(o),c(o)]).then(function(d){o.hasHigherLayerChanges=d[0];o.isDraftAvailable=d[1];o.allContexts=d[2];return o;});},hasVersionParameterWithValue:function(p){return U.hasParameterAndValue(sap.ui.fl.Versions.UrlParameter,p.value);},hasMaxLayerParameterWithValue:function(p){var d=L.FL_MAX_LAYER_PARAM;return U.hasParameterAndValue(d,p.value);},handleUrlParametersForStandalone:function(o){if(o.hasHigherLayerChanges){o.parameters=U.handleUrlParameters(o.parameters,L.FL_MAX_LAYER_PARAM,o.layer);}var v=new RegExp("\&*"+sap.ui.fl.Versions.UrlParameter+"=-?\\d*\&?","g");o.parameters=o.parameters.replace(v,"");if(o.isDraftAvailable&&!o.onExit){o.parameters=U.handleUrlParameters(o.parameters,sap.ui.fl.Versions.UrlParameter,sap.ui.fl.Versions.Draft);}if(o.versionSwitch){o.parameters=U.handleUrlParameters(o.parameters,sap.ui.fl.Versions.UrlParameter,o.version);}if(o.parameters==="?"){o.parameters="";}return o.parameters;},handleParametersOnStart:function(o){var p=U.getParsedURLHash();p.params=p.params||{};if(o.hasHigherLayerChanges){p.params[L.FL_MAX_LAYER_PARAM]=[o.layer];}if(o.isDraftAvailable){p.params[sap.ui.fl.Versions.UrlParameter]=[sap.ui.fl.Versions.Draft];}return p;},initialDraftGotActivated:function(o){if(o.versioningEnabled){var u=this.hasVersionParameterWithValue({value:sap.ui.fl.Versions.Draft.toString()});return!V.isDraftAvailable(o)&&u;}return false;},getReloadMethod:function(o){var d={NOT_NEEDED:"NO_RELOAD",RELOAD_PAGE:"HARD_RELOAD",VIA_HASH:"CROSS_APP_NAVIGATION"};o.reloadMethod=d.NOT_NEEDED;o.isDraftAvailable=o.isDraftAvailable||R.hasVersionParameterWithValue({value:sap.ui.fl.Versions.Draft.toString()});if(o.activeVersion>sap.ui.fl.Versions.Original){o.activeVersionNotSelected=o.activeVersion&&!R.hasVersionParameterWithValue({value:o.activeVersion.toString()});}o.hasHigherLayerChanges=R.hasMaxLayerParameterWithValue({value:o.layer});o.initialDraftGotActivated=R.initialDraftGotActivated(o);if(o.initialDraftGotActivated){o.isDraftAvailable=false;}o.allContexts=g(o.selector);if(o.changesNeedReload||o.isDraftAvailable||o.hasHigherLayerChanges||o.initialDraftGotActivated||o.activeVersionNotSelected||o.allContexts){o.reloadMethod=d.RELOAD_PAGE;if(!o.changesNeedReload&&U.getUshellContainer()){o.reloadMethod=d.VIA_HASH;}}r(o.selector);return o;}};return R;});
sap.ui.predefine('sap/ui/fl/write/api/SmartBusinessWriteAPI',["sap/ui/fl/write/_internal/appVariant/AppVariantFactory","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/SaveAs","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/registry/Settings"],function(A,P,C,a,S,L,b){"use strict";
function _(s,p){return b.getInstance().then(function(o){if(o.isAtoEnabled()){p.skipIam=true;p.transport="ATO_NOTIFICATION";}return S[s](p);});}
function c(p){if(!p.appId){return Promise.reject("App Variant ID must be provided");}p.selector={appId:p.appId};var D=a.getDescriptorFlexControllerInstance(p.selector);p.id=D.getComponentName();p.isForSmartBusiness=true;}
var d={create:function(p){if(!p.layer){return Promise.reject("Layer must be provided");}if(!p.selector||!p.selector.appId){return Promise.reject("selector.appId must be provided");}if(!p.id){return Promise.reject("App variant ID must be provided");}var f=a.getDescriptorFlexControllerInstance(p.selector);p.reference=f.getComponentName();p.isForSmartBusiness=true;return _("saveAs",p);},update:function(p){c(p);return _("updateAppVariant",p);},remove:function(p){c(p);return _("deleteAppVariant",p);},getDesignTimeVariant:function(p){if(!p.id){return Promise.reject("App Variant ID must be provided");}return A.load(p);},getRunTimeVariant:function(p){if(!p.appId){return Promise.reject("Reference App ID must be provided");}if(!p.id){return Promise.reject("App Variant ID must be provided");}var s="/sap/bc/lrep/content/apps/"+p.appId+"/appVariants/"+p.id+"/manifest.appdescr_variant";return L.appVariant.getManifest({appVarUrl:s});},createDescriptorInlineChanges:function(p){if(!p.appId){return Promise.reject("appId must be provided");}if(!p.changeSpecificData){return Promise.reject("changeSpecificData must be provided");}p.selector={appId:p.appId};return C.create(p);},add:function(p){if(!p.appId){return Promise.reject("appId must be provided");}if(!p.change){return Promise.reject("Change instance must be provided");}p.selector={appId:p.appId};return P.add(p);}};return d;});
sap.ui.predefine('sap/ui/fl/write/api/SmartVariantManagementWriteAPI',["sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/transport/TransportSelection","sap/base/util/UriParameters","sap/ui/fl/registry/Settings"],function(C,M,a,T,U,S){"use strict";
function s(p,f){p.persistencyKey=C.getPersistencyKey(p.control);if(!p.reference){p.reference=M.getFlexReferenceForControl(p.control);}return f(p);}
var b={addVariant:function(p){return s(p,a.addVariant);},updateVariant:function(p){return s(p,a.updateVariant);},removeVariant:function(p){return s(p,a.removeVariant);},revert:function(p){return s(p,a.revert);},save:function(p){return s(p,a.persist);},setDefaultVariantId:function(p){return s(p,a.setDefault);},isVariantSharingEnabled:function(){return S.getInstance().then(function(i){return i.isVariantSharingEnabled();});},isVariantPersonalizationEnabled:function(){return S.getInstance().then(function(i){return i.isVariantPersonalizationEnabled();});},isVariantAdaptationEnabled:function(){return S.getInstance().then(function(i){return i.isVariantAdaptationEnabled();});},overrideStandardVariant:function(p){s(p,a.overrideStandardVariant);},revertSetDefaultVariantId:function(p){return s(p,a.revertSetDefaultVariantId);},_getTransportSelection:function(){function t(){var l=U.fromQuery(window.location.search).get("sap-ui-layer")||"";return!!l;}var o=new T();o.selectTransport=function(O,f,e,c,d,g){if(!t()){f(o._createEventObject(O,{transportId:""}));return;}T.prototype.selectTransport.call(this,O,f,e,c,d,g);};return o;}};return b;});
sap.ui.predefine('sap/ui/fl/write/api/UI2PersonalizationWriteAPI',["sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/ChangesController","sap/base/util/restricted/_omit"],function(U,F,C,_){"use strict";var a={create:function(p){var f=C.getFlexControllerInstance(p.selector);p.reference=f.getComponentName();if(!p.reference||!p.containerKey||!p.itemName||!p.content||!p.category||!p.containerCategory){return Promise.reject(new Error("not all mandatory properties were provided for the storage of the personalization"));}return F.initialize({componentId:p.selector.getId()}).then(function(){return U.setPersonalization(_(p,["selector"]));});},deletePersonalization:function(p){var f=C.getFlexControllerInstance(p.selector);p.reference=f.getComponentName();if(!p.reference||!p.containerKey||!p.itemName){return Promise.reject(new Error("not all mandatory properties were provided for the deletion of the personalization"));}return F.initialize({componentId:p.selector.getId()}).then(function(){return U.deletePersonalization(p.reference,p.containerKey,p.itemName);});}};return a;});
sap.ui.predefine('sap/ui/fl/write/api/VersionsAPI',["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/Versions","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils"],function(F,V,U,M){"use strict";
function g(A){var r;if(A){var m=A.getManifest();r=M.getFlexReference({manifest:m,componentData:A.getComponentData()});}if(!r){throw Error("The application ID could not be determined");}return r;}
function a(p){if(!p.selector){throw Error("No selector was provided");}if(!p.layer){throw Error("No layer was provided");}var A=U.getAppComponentForControl(p.selector);return V.getVersionsModel({reference:U.normalizeReference(g(A)),layer:p.layer});}
var b={};
b.initialize=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}var A=U.getAppComponentForControl(p.selector);return V.initialize({reference:U.normalizeReference(g(A)),layer:p.layer});};
b.isDraftAvailable=function(p){var m=a(p);var v=m.getProperty("/versions");var d=v.find(function(o){return o.version===sap.ui.fl.Versions.Draft;});return!!d;};
b.isOldVersionDisplayed=function(p){var m=a(p);var d=m.getProperty("/displayedVersion");var c=m.getProperty("/activeVersion");return d!==sap.ui.fl.Versions.Draft&&d!==c;};
b.loadDraftForApplication=function(p){p.version=sap.ui.fl.Versions.Draft;return b.loadVersionForApplication(p);};
b.loadVersionForApplication=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}if(p.version===undefined){var m=a(p);if(m){p.version=m.getProperty("/activeVersion");}}var A=U.getAppComponentForControl(p.selector);return Promise.resolve().then(g.bind(undefined,A)).then(function(r){return F.clearAndInitialize({componentId:A.getId(),reference:r,version:p.version,allContexts:p.allContexts});});};
b.activate=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}if(!p.title){return Promise.reject("No version title was provided");}var A=U.getAppComponentForControl(p.selector);return Promise.resolve().then(g.bind(undefined,A)).then(function(r){return V.activate({nonNormalizedReference:r,reference:U.normalizeReference(r),layer:p.layer,title:p.title,appComponent:A});});};
b.discardDraft=function(p){if(!p.selector){return Promise.reject("No selector was provided");}if(!p.layer){return Promise.reject("No layer was provided");}var A=U.getAppComponentForControl(p.selector);return Promise.resolve().then(g.bind(undefined,A)).then(function(r){return V.discardDraft({nonNormalizedReference:r,reference:U.normalizeReference(r),layer:p.layer}).then(function(d){if(d.backendChangesDiscarded){F.clearAndInitialize({componentId:A.getId(),reference:r});}return d;});});};
return b;});
sap.ui.predefine('sap/ui/fl/write/api/connectors/FileListBaseConnector',["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(S,L){"use strict";return{getFileList:function(){return Promise.reject("not implemented");},layers:[],loadFlexData:function(p){return this.getFileList(p.reference).then(function(f){return Promise.all(f.map(function(u){return L.loadResource({dataType:"json",url:u,async:true});})).then(function(F){var g=S.getGroupedFlexObjects(F);return S.filterAndSortResponses(g);});});}};});
sap.ui.predefine('sap/ui/fl/write/api/connectors/ObjectStorageConnector',["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils"],function(m,B,S,O){"use strict";
function l(p){var f=[];return O.forEachObjectInStorage(p,function(F){f.push(F.changeDefinition);}).then(function(){return f;});}
function s(p,c){var d=true;if(p.selectorIds){if(c.selector){d=p.selectorIds.indexOf(c.selector.id)>-1;}else{d=false;}}if(d&&p.changeTypes){d=p.changeTypes.indexOf(c.changeType)>-1;}return d;}
function a(f,c){if(!f.creation){var n=Date.now()+c;f.creation=new Date(n).toISOString();}return f;}
var b=m({},B,{storage:undefined,layers:["ALL"],loadFlexData:function(p){return l({storage:this.storage,reference:p.reference}).then(function(f){var g=S.getGroupedFlexObjects(f);return S.filterAndSortResponses(g);});},write:function(p){var P=p.flexObjects.map(function(f,i){var k=O.createFlexObjectKey(f);f=a(f,++i);var F=this.storage._itemsStoredAsObjects?f:JSON.stringify(f);return this.storage.setItem(k,F);}.bind(this));return Promise.all(P).then(function(){});},update:function(p){var f=p.flexObject;var k=O.createFlexObjectKey(p.flexObject);var F=this.storage._itemsStoredAsObjects?f:JSON.stringify(f);var v=this.storage.setItem(k,F);return Promise.resolve(v);},reset:function(p){return O.forEachObjectInStorage({storage:this.storage,reference:p.reference,layer:p.layer},function(f){if(s(p,f.changeDefinition)){return Promise.resolve(this.storage.removeItem(f.key)).then(function(){return{fileName:f.changeDefinition&&f.changeDefinition.fileName};});}}.bind(this)).then(function(r){return{response:r.filter(function(c){return!!c;})};});},remove:function(p){var k=O.createFlexObjectKey(p.flexObject);this.storage.removeItem(k);var r=this.storage.removeItem(k);return Promise.resolve(r);},loadFeatures:function(){return Promise.resolve({isKeyUser:true,isVariantSharingEnabled:true});},getFlexInfo:function(p){p.storage=this.storage;return O.getAllFlexObjects(p).then(function(f){return{isResetEnabled:f.length>0};});}});return b;});
sap.ui.predefine('sap/ui/fl/write/connectors/BaseConnector',[],function(){"use strict";var B={layers:[],write:function(){return Promise.reject("write is not implemented");},condense:function(){return Promise.reject("condense is not implemented");},update:function(){return Promise.reject("write is not implemented");},remove:function(){return Promise.reject("remove is not implemented");},reset:function(){return Promise.reject("reset is not implemented");},publish:function(){return Promise.reject("publish is not implemented");},getFlexInfo:function(){return Promise.resolve({});},getContexts:function(){return Promise.reject("getContexts is not implemented");},loadContextDescriptions:function(){return Promise.reject("loadContextDescriptions is not implemented");},isContextSharingEnabled:function(){return Promise.resolve(false);},loadFeatures:function(){return Promise.reject("loadFeatures is not implemented");},versions:{load:function(){return Promise.reject("versions.load is not implemented");},activate:function(){return Promise.reject("versions.activate is not implemented");},discardDraft:function(){return Promise.reject("versions.discardDraft is not implemented");}}};return B;});
/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/fl/Cache',["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/Utils","sap/base/Log"],function(F,U,L){"use strict";var C=function(){};
function _(c,o){var s=F.getFlexObjectsFromStorageResponse(c);if(o.fileType==="variant"){return s.comp.variants;}if(o.selector.persistencyKey){return s.comp.changes;}return s.changes;}
function a(c,s){if(!s){return c;}return c===C.NOTAG?c.replace(/>$/,''.concat('-',s,'>')):c.concat('-',s);}
function b(c){return c.replace(/(^W\/|")/g,'');}
C.NOTAG="<NoTag>";
C.clearEntries=function(){F.clearState();};
C.getChangesFillingCache=function(c,p,i){var P=Promise.resolve();if(i){P=F.clearAndInitialize(p);}return P.then(function(){return F.getStorageResponse(c.name);}).catch(function(){return{};});};
C.getCacheKey=function(c,A){if(!c||!c.name||!A){L.warning("Not all parameters were passed to determine a flexibility cache key.");return Promise.resolve(C.NOTAG);}return this.getChangesFillingCache(c).then(function(w){if(w&&w.cacheKey){return b(w.cacheKey);}return C.NOTAG;}).then(function(s){var v=A.getModel(U.VARIANT_MODEL_NAME);var d=v?v.getCurrentControlVariantIds():[];return a(s,d.join("-"));});};
C.addChange=function(c,o){var d=_(c.name,o);if(!d){return;}d.push(o);};
C.updateChange=function(c,o){var d=_(c.name,o);if(!d){return;}for(var i=0;i<d.length;i++){if(d[i].fileName===o.fileName){d.splice(i,1,o);break;}}};
C.deleteChange=function(c,o){var d=_(c.name,o);if(!d){return;}for(var i=0;i<d.length;i++){if(d[i].fileName===o.fileName){d.splice(i,1);break;}}};
C.removeChanges=function(c,d){var e=F.getFlexObjectsFromStorageResponse(c.name);e.changes=e.changes.filter(function(o){return d.indexOf(o.fileName)===-1;});var v=F.getVariantsState(c.name);Object.keys(v).forEach(function(i){v[i].variants.forEach(function(V){V.controlChanges=V.controlChanges.filter(function(o){return d.indexOf(o.getFileName())===-1;});});});};
return C;},true);
sap.ui.predefine('sap/ui/fl/Change',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/registry/Settings","sap/base/Log","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/base/util/includes"],function(q,M,L,U,a,S,b,D,i){"use strict";
var C=M.extend("sap.ui.fl.Change",{
constructor:function(f){M.apply(this);if(!q.isPlainObject(f)){b.error("Constructor : sap.ui.fl.Change : oFile is not defined");}this._oDefinition=f;this._sRequest='';this._bUserDependent=(f.layer===L.USER);this._vRevertData=null;this._aUndoOperations=null;this._oExtensionPointInfo=null;this.setState(C.states.NEW);this._sPreviousState=null;this.setInitialApplyState();this._oChangeProcessingPromises={};},
metadata:{properties:{state:{type:"string"},applyState:{type:"int"}}}
});
C.states={NEW:"NEW",PERSISTED:"NONE",DELETED:"DELETE",DIRTY:"UPDATE"};C.applyState={INITIAL:0,APPLYING:1,APPLY_FINISHED:2,REVERTING:3,REVERT_FINISHED:4};C.operations={APPLY:0,REVERT:1};
C.prototype.setState=function(s){var c=this.getState();if(c!==s&&this._isValidState(s)){this._sPreviousState=c;this.setProperty("state",s);}return this;};
C.prototype.setQueuedForRevert=function(){this._aQueuedProcesses.unshift(C.operations.REVERT);};
C.prototype.isQueuedForRevert=function(){return this._aQueuedProcesses.indexOf(C.operations.REVERT)>-1;};
C.prototype.setQueuedForApply=function(){this._aQueuedProcesses.unshift(C.operations.APPLY);};
C.prototype.isQueuedForApply=function(){return this._aQueuedProcesses.indexOf(C.operations.APPLY)>-1;};
C.prototype.setInitialApplyState=function(){this._aQueuedProcesses=[];delete this._ignoreOnce;this.setApplyState(C.applyState.INITIAL);};
C.prototype.isInInitialState=function(){return(this._aQueuedProcesses.length===0)&&(this.getApplyState()===C.applyState.INITIAL);};
C.prototype.isValidForDependencyMap=function(){return this._oDefinition.selector&&this._oDefinition.selector.id;};
C.prototype.startApplying=function(){this.setApplyState(C.applyState.APPLYING);};
C.prototype.markFinished=function(r){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(C.operations.APPLY,r);this.setApplyState(C.applyState.APPLY_FINISHED);};
C.prototype.startReverting=function(){this.setApplyState(C.applyState.REVERTING);};
C.prototype.markRevertFinished=function(r){this._aQueuedProcesses.pop();this._resolveChangeProcessingPromiseWithError(C.operations.REVERT,r);this.setApplyState(C.applyState.REVERT_FINISHED);};
C.prototype.hasApplyProcessStarted=function(){return this.getApplyState()===C.applyState.APPLYING;};
C.prototype.isApplyProcessFinished=function(){return this.getApplyState()===C.applyState.APPLY_FINISHED;};
C.prototype.hasRevertProcessStarted=function(){return this.getApplyState()===C.applyState.REVERTING;};
C.prototype.isRevertProcessFinished=function(){return this.getApplyState()===C.applyState.REVERT_FINISHED;};
C.prototype.isCurrentProcessFinished=function(){return this._aQueuedProcesses.length===0;};
C.prototype.addChangeProcessingPromise=function(k){if(!this._oChangeProcessingPromises[k]){this._oChangeProcessingPromises[k]={};this._oChangeProcessingPromises[k].promise=new Promise(function(r){this._oChangeProcessingPromises[k].resolveFunction={resolve:r};}.bind(this));}return this._oChangeProcessingPromises[k].promise;};
C.prototype.addChangeProcessingPromises=function(){var r=[];this._aQueuedProcesses.forEach(function(p){r.push(this.addChangeProcessingPromise(p));},this);return r;};
C.prototype.addPromiseForApplyProcessing=function(){return this.addChangeProcessingPromise(C.operations.APPLY);};
C.prototype._resolveChangeProcessingPromiseWithError=function(k,r){if(this._oChangeProcessingPromises[k]){this._oChangeProcessingPromises[k].resolveFunction.resolve(r);delete this._oChangeProcessingPromises[k];}};
C.prototype._isValidState=function(s){var c=false;Object.keys(C.states).some(function(k){if(C.states[k]===s){c=true;}return c;});if(!c){return false;}if((this.getState()===C.states.NEW)&&(s===C.states.DIRTY)){return false;}return true;};
C.prototype.isValid=function(){var I=true;if(typeof(this._oDefinition)!=="object"){I=false;}if(!this._oDefinition.fileType){I=false;}if(!this._oDefinition.fileName){I=false;}if(!this._oDefinition.changeType){I=false;}if(!this._oDefinition.layer){I=false;}if(!this._oDefinition.originalLanguage){I=false;}return I;};
C.prototype.isVariant=function(){return this._oDefinition.fileType==="variant";};
C.prototype.getChangeType=function(){if(this._oDefinition){return this._oDefinition.changeType;}};
C.prototype.getFileName=function(){if(this._oDefinition){return this._oDefinition.fileName;}};
C.prototype.getFileType=function(){if(this._oDefinition){return this._oDefinition.fileType;}};
C.prototype.getOriginalLanguage=function(){if(this._oDefinition&&this._oDefinition.originalLanguage){return this._oDefinition.originalLanguage;}return"";};
C.prototype.getPackage=function(){return this._oDefinition.packageName;};
C.prototype.getNamespace=function(){return this._oDefinition.namespace;};
C.prototype.setNamespace=function(n){this._oDefinition.namespace=n;};
C.prototype.getModuleName=function(){return this._oDefinition.moduleName;};
C.prototype.setModuleName=function(m){this._oDefinition.moduleName=m;};
C.prototype.getProjectId=function(){return this._oDefinition.projectId;};
C.prototype.setProjectId=function(p){this._oDefinition.projectId=p;};
C.prototype.getId=function(){return this._oDefinition.fileName;};
C.prototype.getContent=function(){return this._oDefinition.content;};
C.prototype.setContent=function(c){this._oDefinition.content=c;this.setState(C.states.DIRTY);};
C.prototype.getVariantReference=function(){return this._oDefinition.variantReference||"";};
C.prototype.setVariantReference=function(v){this._oDefinition.variantReference=v;this.setState(C.states.DIRTY);};
C.prototype.getSelector=function(){return this._oDefinition.selector;};
C.prototype.setSelector=function(s){this._oDefinition.selector=s;};
C.prototype.getSourceSystem=function(){return this._oDefinition.sourceSystem;};
C.prototype.getSourceClient=function(){return this._oDefinition.sourceClient;};
C.prototype.getOwnerId=function(){return this._oDefinition.support?this._oDefinition.support.user:"";};
C.prototype.getText=function(t){if(typeof(t)!=="string"){b.error("sap.ui.fl.Change.getTexts : sTextId is not defined");}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){return this._oDefinition.texts[t].value;}}return"";};
C.prototype.getTexts=function(){return this._oDefinition.texts;};
C.prototype.setText=function(t,n){if(typeof(t)!=="string"){b.error("sap.ui.fl.Change.setTexts : sTextId is not defined");return;}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){this._oDefinition.texts[t].value=n;this.setState(C.states.DIRTY);}}};
C.prototype.isReadOnly=function(){return this._isReadOnlyDueToLayer()||this._isReadOnlyWhenNotKeyUser()||this.isChangeFromOtherSystem();};
C.prototype._isReadOnlyWhenNotKeyUser=function(){if(this.isUserDependent()){return false;}var r=this.getDefinition().reference;if(!r){return true;}var s=S.getInstanceOrUndef();if(!s){return true;}return!s.isKeyUser();};
C.prototype.isLabelReadOnly=function(){if(this._isReadOnlyDueToLayer()){return true;}return this._isReadOnlyDueToOriginalLanguage();};
C.prototype._isReadOnlyDueToLayer=function(){var c;c=this._bUserDependent?L.USER:a.getCurrentLayer();return(this._oDefinition.layer!==c);};
C.prototype.isChangeFromOtherSystem=function(){var s=this.getSourceSystem();var c=this.getSourceClient();if(!s||!c){return false;}var o=S.getInstanceOrUndef();if(!o){return true;}var d=o.getSystem();var e=o.getClient();if(!d||!e){return false;}return(s!==d||c!==e);};
C.prototype._isReadOnlyDueToOriginalLanguage=function(){var c;var o;o=this.getOriginalLanguage();if(!o){return false;}c=U.getCurrentLanguage();return(c!==o);};
C.prototype.markForDeletion=function(){this.setState(C.states.DELETED);};
C.prototype.restorePreviousState=function(){if(this._sPreviousState){this.setState(this._sPreviousState);delete this._sPreviousState;}};
C.prototype.setRequest=function(r){if(typeof(r)!=="string"){b.error("sap.ui.fl.Change.setRequest : sRequest is not defined");}this._sRequest=r;};
C.prototype.getRequest=function(){return this._sRequest;};
C.prototype.getLayer=function(){return this._oDefinition.layer;};
C.prototype.getComponent=function(){return this._oDefinition.reference;};
C.prototype.setComponent=function(c){this._oDefinition.reference=c;};
C.prototype.getCreation=function(){return this._oDefinition.creation;};
C.prototype.isUserDependent=function(){return(this._bUserDependent);};
C.prototype.getPendingAction=function(){return this.getState();};
C.prototype.getDefinition=function(){return this._oDefinition;};
C.prototype.setResponse=function(r){var R=JSON.stringify(r);if(R){this._oDefinition=JSON.parse(R);this.setState(C.states.PERSISTED);}};
C.prototype.getFullFileIdentifier=function(){var l=this.getLayer();var n=this.getNamespace();var f=this.getDefinition().fileName;var F=this.getDefinition().fileType;return l+"/"+n+"/"+f+"."+F;};
C.prototype.addDependentControl=function(c,A,p,m){if(!c){throw new Error("Parameter vControl is mandatory");}if(!A){throw new Error("Parameter sAlias is mandatory");}if(!p){throw new Error("Parameter mPropertyBag is mandatory");}if(!this._oDefinition.dependentSelector){this._oDefinition.dependentSelector={};}if(this._oDefinition.dependentSelector[A]){throw new Error("Alias '"+A+"' already exists in the change.");}var o=p.modifier;var d=p.appComponent;if(Array.isArray(c)){var s=[];c.forEach(function(e){s.push(o.getSelector(e,d,m));});this._oDefinition.dependentSelector[A]=s;}else{this._oDefinition.dependentSelector[A]=o.getSelector(c,d,m);}delete this._aDependentSelectorList;};
C.prototype.getDependentControl=function(A,p){var d=[];var o;if(!A){throw new Error("Parameter sAlias is mandatory");}if(!p){throw new Error("Parameter mPropertyBag is mandatory");}var m=p.modifier;var c=p.appComponent;if(!this._oDefinition.dependentSelector){return undefined;}o=this._oDefinition.dependentSelector[A];if(Array.isArray(o)){o.forEach(function(s){d.push(m.bySelector(s,c,p.view));});return d;}return m.bySelector(o,c,p.view);};
C.prototype.getDependentSelectorList=function(){var t=this;var d=[this.getSelector()];if(!this._aDependentSelectorList){if(this._oDefinition.dependentSelector){Object.keys(this._oDefinition.dependentSelector).some(function(A){if(A==="originalSelector"){d=[this.getSelector()];return true;}var c=t._oDefinition.dependentSelector[A];if(!Array.isArray(c)){c=[c];}c.forEach(function(o){if(o&&U.indexOfObject(d,o)===-1){d.push(o);}});}.bind(this));}this._aDependentSelectorList=d;}return this._aDependentSelectorList;};
C.prototype.getDependentControlSelectorList=function(){var d=this.getDependentSelectorList().concat();if(d.length>0){var s=this.getSelector();var I=U.indexOfObject(d,s);if(I>-1){d.splice(I,1);}}return d;};
C.prototype.getRevertData=function(){return this._vRevertData;};
C.prototype.hasRevertData=function(){return this._vRevertData!==null;};
C.prototype.setRevertData=function(d){this._vRevertData=d;};
C.prototype.resetRevertData=function(){this.setRevertData(null);};
C.prototype.getUndoOperations=function(){return this._aUndoOperations;};
C.prototype.setUndoOperations=function(d){this._aUndoOperations=d;};
C.prototype.getExtensionPointInfo=function(){return this._oExtensionPointInfo;};
C.prototype.setExtensionPointInfo=function(e){this._oExtensionPointInfo=e;};
C.prototype.resetUndoOperations=function(){this.setUndoOperations(null);};
C.createInitialFileContent=function(p){if(!p){p={};}var f;if(p.fileType){f=p.fileType;}else{f=p.isVariant?"variant":"change";}var n={fileName:p.id||U.createDefaultFileName(p.changeType),fileType:f,changeType:p.changeType||"",moduleName:p.moduleName||"",reference:p.reference||"",packageName:p.packageName||"",content:p.content||{},selector:p.selector||{id:""},layer:p.layer||(p.isUserDependent?L.USER:a.getCurrentLayer()),texts:p.texts||{},namespace:p.namespace||U.createNamespace(p,f),projectId:p.projectId||(p.reference&&p.reference.replace(".Component",""))||"",creation:"",originalLanguage:U.getCurrentLanguage(),support:{generator:p.generator||"Change.createInitialFileContent",service:p.service||"",user:"",sapui5Version:sap.ui.version,sourceChangeFileName:p.support&&p.support.sourceChangeFileName||"",compositeCommand:p.support&&p.support.compositeCommand||"",command:p.command||""},oDataInformation:p.oDataInformation||{},dependentSelector:p.dependentSelector||{},jsOnly:p.jsOnly||false,variantReference:p.variantReference||"",appDescriptorChange:i(D.getChangeTypes(),p.changeType)};return n;};
return C;},true);
sap.ui.predefine('sap/ui/fl/ChangePersistence',["sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/Change","sap/ui/fl/Layer","sap/ui/fl/Variant","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/Cache","sap/ui/fl/registry/Settings","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/write/_internal/Storage","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Component","sap/ui/model/json/JSONModel","sap/ui/performance/Measurement","sap/base/util/includes","sap/base/util/merge","sap/base/util/restricted/_union","sap/base/util/UriParameters","sap/base/Log","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/condenser/Condenser"],function(D,S,C,L,V,U,a,b,c,A,d,J,e,f,M,i,m,u,g,h,j,F,k){"use strict";var l=function(v){this._mComponent=v;this._mChanges=D.createEmptyDependencyMap();this._bChangesMapCreated=false;this._mChangesInitial=m({},this._mChanges);if(!this._mComponent||!this._mComponent.name){h.error("The Control does not belong to an SAPUI5 component. Personalization and changes for this control might not work as expected.");throw new Error("Missing component name.");}this._aDirtyChanges=[];this._oMessagebundle=undefined;this._mChangesEntries={};this._bHasChangesOverMaxLayer=false;this.HIGHER_LAYER_CHANGES_EXIST="higher_layer_changes_exist";};
function n(v,w){var x;if(w instanceof C){x=w;this._mChangesEntries[x.getFileName()]=x;}else{if(!this._mChangesEntries[w.fileName]){this._mChangesEntries[w.fileName]=new C(w);}x=this._mChangesEntries[w.fileName];x.setState(C.states.PERSISTED);}return x;}
l.prototype.getComponentName=function(){return this._mComponent.name;};
l.prototype.getCacheKey=function(v){return b.getCacheKey(this._mComponent,v);};
l.prototype._preconditionsFulfilled=function(v){var w=v instanceof C?v.getDefinition():v;function _(){if((w.fileType==="ctrl_variant")||(w.fileType==="ctrl_variant_change")||(w.fileType==="ctrl_variant_management_change")){return w.variantManagementReference||w.variantReference||(w.selector&&w.selector.id);}}return w.fileType==="change"||_();};
l.prototype.getChangesForComponent=function(P,I){return b.getChangesFillingCache(this._mComponent,P,I).then(function(P,w){var v=m({},w);var x=P&&P.component&&U.getAppComponentForControl(P.component);var H=S.isStorageResponseFilled(v.changes);if(!H){return[];}var y=v.changes.changes;if(!this._oMessagebundle&&v.messagebundle&&x){if(!x.getModel("i18nFlexVendor")){if(y.some(function(O){return O.layer===L.VENDOR;})){this._oMessagebundle=v.messagebundle;var z=new f(this._oMessagebundle);x.setModel(z,"i18nFlexVendor");}}}var B=P&&P.currentLayer;var E=!(P&&P.ignoreMaxLayerParameter);var G=function(){return true;};if(B){y=a.filterChangeOrChangeDefinitionsByCurrentLayer(y,B);}else if(a.isLayerFilteringRequired()&&E){G=this._filterChangeForMaxLayer.bind(this);y=y.filter(G);}else if(this._bHasChangesOverMaxLayer&&!E){this._bHasChangesOverMaxLayer=false;return this.HIGHER_LAYER_CHANGES_EXIST;}var K=v.changes&&P&&P.includeCtrlVariants;var N=this._getAllCtrlVariantChanges(v,K,G);y=y.concat(N);return this._checkAndGetChangeInstances(y,v);}.bind(this,P));};
l.prototype._checkAndGetChangeInstances=function(v,w){return v.filter(this._preconditionsFulfilled).map(n.bind(this,w));};
l.prototype._filterChangeForMaxLayer=function(v){if(a.isOverMaxLayer(this._getLayerFromChangeOrChangeContent(v))){if(!this._bHasChangesOverMaxLayer){this._bHasChangesOverMaxLayer=true;}return false;}return true;};
l.prototype._getLayerFromChangeOrChangeContent=function(v){var w;if(v instanceof V||v instanceof C){w=v.getLayer();}else{w=v.layer;}return w;};
l.prototype._getAllCtrlVariantChanges=function(v,I,w){if(!I){return j.getInitialChanges({reference:this._mComponent.name});}return["variants","variantChanges","variantDependentControlChanges","variantManagementChanges"].reduce(function(R,x){if(v.changes[x]){return R.concat(v.changes[x]);}return R;},[]).filter(w);};
l.prototype.loadChangesMapForComponent=function(v){return this.getChangesForComponent({component:v}).then(w.bind(this));function w(x){M.start("fl.createDependencyMap","Measurement of creating initial dependency map");this._mChanges=D.createEmptyDependencyMap();x.forEach(this.addChangeAndUpdateDependencies.bind(this,v));this._mChangesInitial=m({},this._mChanges);M.end("fl.createDependencyMap","Measurement of creating initial dependency map");this._bChangesMapCreated=true;return this.getChangesMapForComponent.bind(this);}};
l.prototype.checkForOpenDependenciesForControl=function(v,w){return D.checkForOpenDependenciesForControl(this._mChanges,J.getControlIdBySelector(v,w),w);};
l.prototype.copyDependenciesFromInitialChangesMap=function(v,w,x){var I=m({},this._mChangesInitial.mDependencies);var y=I[v.getId()];if(y){var N=[];y.dependencies.forEach(function(E){if(w(E)){this._mChanges.mDependentChangesOnMe[E]=this._mChanges.mDependentChangesOnMe[E]||[];this._mChanges.mDependentChangesOnMe[E].push(v.getId());N.push(E);}}.bind(this));var z;var B=[];y.controlsDependencies.forEach(function(E){if(!J.bySelector(E,x)){z=J.getControlIdBySelector(E,x);B.push(E);this._mChanges.mControlsWithDependencies[z]=this._mChanges.mControlsWithDependencies[z]||[];if(!i(this._mChanges.mControlsWithDependencies[z],v.getId())){this._mChanges.mControlsWithDependencies[z].push(v.getId());}}}.bind(this));y.dependencies=N;y.controlsDependencies=B;if(N.length||B.length){this._mChanges.mDependencies[v.getId()]=y;}}return this._mChanges;};
l.prototype.addChangeAndUpdateDependencies=function(v,w,R){w.setInitialApplyState();if(R){D.insertChange(w,this._mChanges,R);}D.addChangeAndUpdateDependencies(w,v,this._mChanges);};
l.prototype._addRunTimeCreatedChangeAndUpdateDependencies=function(v,w){D.addRuntimeChangeAndUpdateDependencies(w,v,this._mChanges,this._mChangesInitial);};
l.prototype.getChangesMapForComponent=function(){return this._mChanges;};
l.prototype.getAllUIChanges=function(P){var v=u(this.getChangesMapForComponent().aChanges,P.includeDirtyChanges&&this.getDirtyChanges()).filter(function(w){return(Boolean(w)&&w.getFileType()==="change"&&a.compareAgainstCurrentLayer(w.getLayer(),P.layer)===0);});return v;};
l.prototype.isChangeMapCreated=function(){return this._bChangesMapCreated;};
l.prototype.changesHavingCorrectViewPrefix=function(P,v){var w=P.modifier;var x=P.appComponent;var y=v.getSelector();if(!y||!P){return false;}if(y.viewSelector){var z=w.getControlIdBySelector(y.viewSelector,x);return z===P.viewId;}var B=y.id;if(B){var E;if(v.getSelector().idIsLocal){if(x){E=x.getLocalId(P.viewId);}}else{E=P.viewId;}var I=0;var G;do{I=B.indexOf("--",I);G=B.slice(0,I);I++;}while(G!==E&&I>0);return G===E;}return false;};
l.prototype.getChangesForView=function(P){return this.getChangesForComponent(P).then(function(v){return v.filter(this.changesHavingCorrectViewPrefix.bind(this,P));}.bind(this));};
l.prototype.addChange=function(v,w){var x=this.addDirtyChange(v);this._addRunTimeCreatedChangeAndUpdateDependencies(w,x);this._mChangesEntries[x.getFileName()]=x;this._addPropagationListener(w);return x;};
l.prototype.addDirtyChange=function(v){var N;if(v instanceof C||v instanceof V){N=v;}else{N=new C(v);}if(this._aDirtyChanges.indexOf(N)===-1){this._aDirtyChanges.push(N);}return N;};
l.prototype._addPropagationListener=function(v){var w=U.getAppComponentForControl(v);if(w instanceof e){var x=function(P){return!P._bIsSapUiFlFlexControllerApplyChangesOnControl;};var N=w.getPropagationListeners().every(x);if(N){var y=sap.ui.require("sap/ui/fl/FlexControllerFactory");var z=y.create(this.getComponentName());var P=A.applyAllChangesForControl.bind(A,this.getChangesMapForComponent.bind(this),w,z);P._bIsSapUiFlFlexControllerApplyChangesOnControl=true;w.addPropagationListener(P);}}};
l.prototype._deleteNotSavedChanges=function(v,w,x){v.filter(function(y){return!w.some(function(z){return y.getId()===z.getId();});}).forEach(function(y){if(x){this.removeChange(y);}else{this.deleteChange(y);}}.bind(this));};
function o(v,w){var P=v.map(function(y){return y[w]();});var x=P.filter(function(y,I,P){return P.indexOf(y)===I;});return x.length===1;}
function s(v,w){var x=false;if(!v||w.length<2){return false;}if(!o(w,"getLayer")){return false;}var y=w[0].getLayer();if(y==="CUSTOMER"||y==="USER"){x=true;}var z=g.fromURL(window.location.href);if(z.has("sap-ui-xx-condense-changes")){x=z.get("sap-ui-xx-condense-changes")==="true";}return x;}
function p(v){var E=c.getInstanceOrUndef()&&c.getInstanceOrUndef().isCondensingEnabled();if(E&&!o(v,"getNamespace")){E=false;}return E;}
function q(v,w,x,y){this._massUpdateCacheAndDirtyState(w,x);this._deleteNotSavedChanges(v,w,y);}
function r(v){if(!v.length){return[];}var w=v[0].getLayer();var P=this._mChanges.aChanges.filter(function(x){return x.getState()===C.states.PERSISTED&&a.compareAgainstCurrentLayer(x.getLayer(),w)===0;});return P.concat(v);}
l.prototype.saveDirtyChanges=function(v,w,x,y){var z=x||this._aDirtyChanges;var R=r.call(this,z);var I=(p(R)&&s(v,R));var B=I?R:z;var E=B.slice(0);var G=z.slice(0);var H=this._getRequests(z);var P=this._getPendingActions(z);if(P.length===1&&H.length===1&&P[0]===C.states.NEW){var K=Promise.resolve(E);if(s(v,E)){K=k.condense(v,E);}return K.then(function(N){var O=H[0];var Q=z[0].getDefinition().layer;if(I){return d.condense({allChanges:B,condensedChanges:N,layer:Q,transport:O,isLegacyVariant:false,parentVersion:y}).then(function(T){q.call(this,B,N,w,true);return T;}.bind(this));}if(N.length){return d.write({layer:Q,flexObjects:this._prepareDirtyChanges(N),transport:O,isLegacyVariant:false,parentVersion:y}).then(function(T){q.call(this,B,N,w);return T;}.bind(this));}this._deleteNotSavedChanges(B,N);}.bind(this));}return this.saveSequenceOfDirtyChanges(G,w,y);};
l.prototype.saveSequenceOfDirtyChanges=function(v,w,x){var y;if(x){var N=v.filter(function(z){return z.getPendingAction()==="NEW";});y=[].concat(N).shift();}return v.reduce(function(P,z){return P.then(this._performSingleSaveAction(z,y,x)).then(this._updateCacheAndDirtyState.bind(this,z,w));}.bind(this),Promise.resolve());};
l.prototype._performSingleSaveAction=function(v,w,x){return function(){if(v.getPendingAction()==="NEW"){if(x!==undefined){x=v===w?x:sap.ui.fl.Versions.Draft;}return d.write({layer:v.getLayer(),flexObjects:[v.getDefinition()],transport:v.getRequest(),parentVersion:x});}if(v.getPendingAction()==="DELETE"){return d.remove({flexObject:v.getDefinition(),layer:v.getLayer(),transport:v.getRequest()});}};};
l.prototype._updateCacheAndDirtyState=function(v,w){if(!w){if(U.isChangeRelatedToVariants(v)){j.updateVariantsState({reference:this._mComponent.name,changeToBeAddedOrDeleted:v});}else if(v.getPendingAction()===C.states.NEW){v.setState(C.states.PERSISTED);b.addChange(this._mComponent,v.getDefinition());}else if(v.getPendingAction()===C.states.DELETED){b.deleteChange(this._mComponent,v.getDefinition());}else if(v.getPendingAction()===C.states.DIRTY){v.setState(C.states.PERSISTED);b.updateChange(this._mComponent,v.getDefinition());}}this._aDirtyChanges=this._aDirtyChanges.filter(function(E){return v.getId()!==E.getId();});};
l.prototype._massUpdateCacheAndDirtyState=function(v,w){v.forEach(function(x){this._updateCacheAndDirtyState(x,w);},this);};
l.prototype._getRequests=function(v){var R=[];v.forEach(function(w){var x=w.getRequest();if(R.indexOf(x)===-1){R.push(x);}});return R;};
l.prototype._getPendingActions=function(v){var P=[];v.forEach(function(w){var x=w.getPendingAction();if(P.indexOf(x)===-1){P.push(x);}});return P;};
l.prototype._prepareDirtyChanges=function(v){var w=[];v.forEach(function(x){w.push(x.getDefinition());});return w;};
l.prototype.getDirtyChanges=function(){return this._aDirtyChanges;};
l.prototype.deleteChange=function(v,R){var w=this._aDirtyChanges.indexOf(v);if(w>-1){if(v.getPendingAction()==="DELETE"){return;}this._aDirtyChanges.splice(w,1);this._deleteChangeInMap(v,R);return;}v.markForDeletion();this.addDirtyChange(v);this._deleteChangeInMap(v,R);};
l.prototype.removeChange=function(v){var w=this._aDirtyChanges.indexOf(v);if(w>-1){this._aDirtyChanges.splice(w,1);}this._deleteChangeInMap(v);};
l.prototype._deleteChangeInMap=function(v,R){var w=v.getId();D.removeChangeFromMap(this._mChanges,w);D.removeChangeFromDependencies(R?this._mChangesInitial:this._mChanges,w);};
function t(v,O){return(O.getRequest()==="$TMP"||O.getRequest()==="")&&O.getLayer()===v;}
l.prototype.transportAllUIChanges=function(R,v,w,x){return Promise.all([this.getChangesForComponent({currentLayer:w,includeCtrlVariants:true}),F.getCompVariantsMap(this.getComponentName())]).then(function(y){var z=y[0];var B=y[1];var E=[];for(var P in B){for(var I in B[P].byId){E.push(B[P].byId[I]);}}z=z.concat(E.filter(t.bind(this,w)));return d.publish({transportDialogSettings:{rootControl:R,styleClass:v},layer:w,reference:this.getComponentName(),localChanges:z,appVariantDescriptors:x});}.bind(this));};
l.prototype._getChangesFromMapByNames=function(N){return this._mChanges.aChanges.filter(function(v){return N.indexOf(v.getFileName())!==-1;});};
l.prototype.removeDirtyChanges=function(v,w,x,G,y){if(!x){h.error("The selectorId must be provided");return Promise.reject("The selectorId must be provided");}var z=this._aDirtyChanges;var B=z.filter(function(E){var H=true;if(E.getLayer()!==v){return false;}if(G&&E.getDefinition().support.generator!==G){return false;}var I=E.getSelector();H=x.getId()===J.getControlIdBySelector(I,w);if(y){H=H&&y.indexOf(E.getChangeType())!==-1;}return H;});B.forEach(function(E){var H=z.indexOf(E);z.splice(H,1);});return Promise.resolve(B);};
l.prototype.resetChanges=function(v,G,w,x){var y=w&&w.length>0;var z=x&&x.length>0;return this.getChangesForComponent({currentLayer:v,includeCtrlVariants:true}).then(function(B){var P={reference:this.getComponentName(),layer:v,changes:B};if(G){P.generator=G;}if(y){P.selectorIds=w;}if(z){P.changeTypes=x;}return d.reset(P);}.bind(this)).then(function(R){var B=[];if(w||x){var N=[];if(R&&R.response&&R.response.length>0){R.response.forEach(function(E){N.push(E.fileName);});}b.removeChanges(this._mComponent,N);B=this._getChangesFromMapByNames(N);}return B;}.bind(this));};
l.prototype.getResetAndPublishInfo=function(P){return d.getFlexInfo(P);};
return l;},true);
sap.ui.predefine('sap/ui/fl/ChangePersistenceFactory',["sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/ChangePersistence","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/changes/descriptor/Applier"],function(C,F,a,U,A,b){"use strict";var c={};c._instanceCache={};
c.getChangePersistenceForComponent=function(s){var o=c._instanceCache[s];if(!o){var d={name:s};o=new a(d);c._instanceCache[s]=o;}return o;};
c.getChangePersistenceForControl=function(o){var s;s=U.getComponentClassName(o);return c.getChangePersistenceForComponent(s);};
c.registerLoadComponentEventHandler=function(){C._fnLoadComponentCallback=this._onLoadComponent.bind(this);};
c._onLoadComponent=function(o,m){if(!U.isApplication(m)||!o.id){return Promise.resolve();}F.initialize({componentData:o.componentData||(o.settings&&o.settings.componentData),asyncHints:o.asyncHints,manifest:m,componentId:o.id});return b.applyChangesIncludedInManifest(m,A.getRuntimeStrategy());};
return c;},true);
sap.ui.predefine('sap/ui/fl/EventHistory',function(){"use strict";var E=function(){};E._aEventIds=["ControlForPersonalizationRendered"];E._aUnsubscribedEventIds=[];E._oHistory={};
E.start=function(){E._aEventIds.forEach(function(e){if(E._aUnsubscribedEventIds.indexOf(e)===-1){sap.ui.getCore().getEventBus().subscribe("sap.ui",e,E.saveEvent);E._oHistory[e]=[];}});};
E.saveEvent=function(c,e,p){var o={channelId:c,eventId:e,parameters:p.getId()};if(E._oHistory[e]){var b=E._oHistory[e].some(function(O){return(O.channelId===o.channelId&&O.eventId===o.eventId&&O.parameters===o.parameters);});if(!b){E._oHistory[e].push(o);}}};
E.getHistoryAndStop=function(e){sap.ui.getCore().getEventBus().unsubscribe("sap.ui",e,E.saveEvent);E._addUnsubscribedEvent(e);return E._oHistory[e]||[];};
E._addUnsubscribedEvent=function(e){if(E._aUnsubscribedEventIds.indexOf(e)===-1){E._aUnsubscribedEventIds.push(e);}};
return E;},true);
sap.ui.predefine('sap/ui/fl/FakeLrepConnector',["sap/ui/fl/write/_internal/connectors/ObjectPathConnector","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils"],function(O,a){"use strict";var F={};var b="sap.ui.fl";F.prototype={};
F.enableFakeConnector=function(i){this.setFlexibilityServicesAndClearCache("LocalStorageConnector",i);};
F.setFlexibilityServicesAndClearCache=function(s,i){this._oFlexibilityServices=sap.ui.getCore().getConfiguration().getFlexibilityServices();var c=[];if(i){O.setJsonPath(i);c.push({connector:"ObjectPathConnector"});}c.push({connector:s});sap.ui.getCore().getConfiguration().setFlexibilityServices(c);sap.ui.requireSync("sap/ui/fl/Cache").clearEntries();};
F.disableFakeConnector=function(){F.prototype={};sap.ui.requireSync("sap/ui/fl/Cache").clearEntries();if(this._oFlexibilityServices){sap.ui.getCore().getConfiguration().setFlexibilityServices(this._oFlexibilityServices);delete this._oFlexibilityServices;}};
F.forTesting={getNumberOfChanges:function(c,r){return c.loadFlexData({reference:r}).then(function(R){return R.reduce(function(n,o){return n+o.changes.length;},0);});},spyMethod:function(s,c,C,m){var S=s.spy(C,m);return function(n,i){i=i||0;var N=S.getCall(i).args[0].flexObjects.length;c.equal(N,n,m+" was called "+n+" times");};},clear:function(c,p){sap.ui.requireSync("sap/ui/fl/Cache").clearEntries();return c.reset(p);},setStorage:function(c,n){c.storage=n;},synchronous:{clearAll:function(s){var r=function(k){var i=k.includes(b);if(!i){return;}s.removeItem(k);};Object.keys(s).map(r);},store:function(s,k,i){var f=a.createFlexKey(k);var I=JSON.stringify(i);s.setItem(f,I);},getNumberOfChanges:function(s,r){var c=0;Object.keys(s).map(function(k){var i=k.includes(b);if(!i){return;}var f=JSON.parse(s.getItem(k));if(f.reference===r||f.reference+".Component"===r){c++;}});return c;}}};return F;},true);
sap.ui.predefine('sap/ui/fl/FlexController',["sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Change","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Versions","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/util/reflection/XmlTreeModifier","sap/ui/core/Component","sap/base/Log"],function(C,U,L,a,b,c,V,d,A,R,e,J,X,f,g){"use strict";
function r(o,i){return Promise.resolve().then(function(){if(i.length!==0){i.reverse();return R.revertMultipleChanges(i,{appComponent:o,modifier:J,flexController:this});}}.bind(this)).then(function(){if(o){var m=o.getModel(U.VARIANT_MODEL_NAME);if(m){i.forEach(function(k){var v=k.getVariantReference();if(v){m.removeChange(k);}});e.update({parameters:[],updateURL:true,updateHashEntry:true,model:m});}}return i;});}
var F=function(s){this._oChangePersistence=undefined;this._sComponentName=s||"";if(this._sComponentName){this._createChangePersistence();}};
F.prototype.getComponentName=function(){return this._sComponentName;};
F.prototype.setVariantSwitchPromise=function(p){this._oVariantSwitchPromise=p;};
F.prototype.waitForVariantSwitch=function(){if(!this._oVariantSwitchPromise){this._oVariantSwitchPromise=Promise.resolve();}return this._oVariantSwitchPromise;};
F.prototype.createBaseChange=function(o,i){var k;var l;if(!i){throw new Error("No application component found. To offer flexibility a valid relation to its owning component must be present.");}o.reference=this.getComponentName();o.packageName="$TMP";k=b.createInitialFileContent(o);l=new b(k);if(o.variantReference){l.setVariantReference(o.variantReference);}return l;};
F.prototype._createChange=function(o,i,k){var s=k&&(k.controlType||U.getControlType(k));var l=this.createBaseChange(o,i);return this._getChangeHandler(l,s,k,J).then(function(m){if(m){m.completeChangeContent(l,o,{modifier:J,appComponent:i,view:U.getViewForControl(k)});}else{throw new Error("Change handler could not be retrieved for change "+JSON.stringify(o)+".");}return l;}).catch(function(E){return Promise.reject(E);});};
F.prototype.createChangeWithExtensionPointSelector=function(o,E){return Promise.resolve().then(function(){if(!E){throw new Error("A flexibility change on extension point cannot be created without a valid extension point reference.");}var v=E.view;var i=U.getAppComponentForControl(v);o.selector={name:E.name,viewSelector:J.getSelector(v.getId(),i)};return i;}).then(function(i){return this._createChange(o,i);}.bind(this));};
F.prototype.createChangeWithControlSelector=function(o,i){var k;return new U.FakePromise().then(function(){if(!i){throw new Error("A flexibility change cannot be created without a targeted control.");}var s=i.id||i.getId();if(!o.selector){o.selector={};}k=i.appComponent||U.getAppComponentForControl(i);if(!k){throw new Error("No application component found. To offer flexibility, the control with the ID '"+s+"' has to have a valid relation to its owning application component.");}Object.assign(o.selector,J.getSelector(s,k));return k;}).then(function(k){return this._createChange(o,k,i);}.bind(this));};
F.prototype.addChange=function(o,i){return this.createChangeWithControlSelector(o,i).then(function(k){var l=U.getAppComponentForControl(i);k._ignoreOnce=true;this.addPreparedChange(k,l);k.setQueuedForApply();return k;}.bind(this));};
F.prototype.addPreparedChange=function(o,i){if(o.getVariantReference()){var m=i.getModel(U.VARIANT_MODEL_NAME);m.addChange(o);}this._oChangePersistence.addChange(o,i);return o;};
F.prototype.deleteChange=function(o,i){this._oChangePersistence.deleteChange(o);if(o.getVariantReference()){i.getModel(U.VARIANT_MODEL_NAME).removeChange(o);}};
F.prototype.applyChange=function(o,i){var p={modifier:J,appComponent:U.getAppComponentForControl(i),view:U.getViewForControl(i)};return A.applyChangeOnControl(o,i,p).then(function(k){if(!k.success){var E=k.error||new Error("The change could not be applied.");this._oChangePersistence.deleteChange(o,true);throw E;}return o;}.bind(this));};
function h(o,D,m,k,l){var p=j(o,k);if(!p){return[];}l.push(o);var s=o.getId();var q=D[s]&&D[s].dependencies||[];for(var i=0,n=q.length;i<n;i++){var t=U.getChangeFromChangesMap(m,q[i]);p=h(t,D,m,k,l);if(p.length===0){l=[];break;}delete D[s];}return l;}
function j(o,i){var s=o.getDependentControlSelectorList();s.push(o.getSelector());return!s.some(function(S){return!J.bySelector(S,i);});}
F.prototype.waitForChangesToBeApplied=function(s){var S;if(Array.isArray(s)){S=s;}else{S=[s];}var p=S.map(function(v){return this._waitForChangesToBeApplied(v);}.bind(this));return Promise.all(p).then(function(){return undefined;});};
F.prototype._waitForChangesToBeApplied=function(s){var o=s.id&&sap.ui.getCore().byId(s.id)||s;var m=this._oChangePersistence.getChangesMapForComponent();var p=[];var D=Object.assign({},m.mDependencies);var i=m.mChanges;var k=i[o.getId()]||[];var n=k.filter(function(t){return!t.isCurrentProcessFinished();},this);var l=s.appComponent||U.getAppComponentForControl(o);var q=[];n.forEach(function(t){var u=h(t,D,m.mChanges,l,[]);u.forEach(function(v){if(q.indexOf(v)===-1){q.push(v);}});});q.forEach(function(t){p=p.concat(t.addChangeProcessingPromises());},this);p.push(this.waitForVariantSwitch());return Promise.all(p);};
F.prototype.saveAll=function(o,s,D){var n=D?V.getVersionsModel({reference:U.normalizeReference(this._sComponentName),layer:L.CUSTOMER}).getProperty("/persistedVersion"):undefined;return this._oChangePersistence.saveDirtyChanges(o,s,undefined,n).then(function(i){if(D&&i&&i.response){var v=i.response;if(Array.isArray(v)){v=v[0];}V.onAllChangesSaved({reference:v.reference,layer:v.layer});}return i;});};
F.prototype.processXmlView=function(v,p){var o=f.get(p.componentId);var i=U.getAppComponentForControl(o);p.appComponent=i;p.modifier=X;p.view=v;return this._oChangePersistence.getChangesForView(p).then(A.applyAllChangesForXMLView.bind(A,p)).catch(this._handlePromiseChainError.bind(this,p.view));};
F.prototype._handlePromiseChainError=function(v,E){g.error("Error processing view "+E+".");return v;};
F.prototype._getChangeHandler=function(o,s,i,m){var k=o.getChangeType();var l=o.getLayer();return C.getInstance().getChangeHandler(k,s,i,m,l);};
F.prototype.getComponentChanges=function(p,i){return this._oChangePersistence.getChangesForComponent(p,i);};
F.prototype.checkForOpenDependenciesForControl=function(s,o){return this._oChangePersistence.checkForOpenDependenciesForControl(s,o);};
F.prototype._createChangePersistence=function(){this._oChangePersistence=c.getChangePersistenceForComponent(this.getComponentName());return this._oChangePersistence;};
F.prototype.resetChanges=function(l,G,o,s,i){return this._oChangePersistence.resetChanges(l,G,s,i).then(r.bind(this,o));};
F.prototype.removeDirtyChanges=function(l,o,i,G,k){return this._oChangePersistence.removeDirtyChanges(l,o,i,G,k).then(r.bind(this,o));};
F.prototype.applyVariantChanges=function(i,o){var k;return i.reduce(function(p,l){return p.then(function(){var P={modifier:J,appComponent:o};this._oChangePersistence._addRunTimeCreatedChangeAndUpdateDependencies(o,l);k=P.modifier.bySelector(l.getSelector(),o);if(k){return A.applyChangeOnControl(l,k,P);}g.error("A flexibility change tries to change a nonexistent control.");}.bind(this));}.bind(this),new U.FakePromise());};
F.prototype.saveSequenceOfDirtyChanges=function(D,o){return this._oChangePersistence.saveDirtyChanges(o,false,D);};
F.prototype.getResetAndPublishInfo=function(p){p.reference=this._sComponentName;return this._oChangePersistence.getResetAndPublishInfo(p);};
return F;},true);
sap.ui.predefine('sap/ui/fl/FlexControllerFactory',["sap/ui/fl/FlexController","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/variants/VariantModel","sap/base/Log","sap/ui/performance/Measurement"],function(F,U,L,A,a,V,b,M){"use strict";var c={};c._instanceCache={};c._componentInstantiationPromises=new WeakMap();
c.create=function(C){var f=c._instanceCache[C];if(!f){f=new F(C);c._instanceCache[C]=f;}return f;};
c.createForControl=function(C){try{var o=U.getAppComponentForControl(C);var s=U.getComponentClassName(o||C);return c.create(s);}catch(e){b.error(e.message,undefined,"sap.ui.fl.FlexControllerFactory");}};
function d(r,C){if(U.getUshellContainer()){return Promise.resolve(r);}var R=window.sessionStorage.getItem("sap.ui.rta.restart."+L.CUSTOMER);if(R){var s=U.getComponentClassName(C);if(R!==s&&R!=="true"){b.error("an application component was started "+"which does not match the component for which the restart was triggered:\n"+"Triggering component: "+R+"\n"+"Started component: "+s);return Promise.resolve(r);}window.sessionStorage.removeItem("sap.ui.rta.restart."+L.CUSTOMER);return new Promise(function(e){sap.ui.getCore().loadLibrary("sap.ui.rta",{async:true}).then(function(){sap.ui.require(["sap/ui/rta/api/startKeyUserAdaptation"],function(f){f({rootControl:C});e(r);});});});}return Promise.resolve(r);}
c.getChangesAndPropagate=function(C,v){if(U.isApplicationComponent(C)){var s=C.getId();var r=a.initialize({componentId:s,asyncHints:v.asyncHints}).then(_.bind(this,C));c._componentInstantiationPromises.set(C,r);return r;}else if(U.isEmbeddedComponent(C)){var o=U.getAppComponentForControl(C);if(o&&U.isApplicationComponent(o)){var i=Promise.resolve();if(c._componentInstantiationPromises.has(o)){i=c._componentInstantiationPromises.get(o);}return i.then(function(){var e=o.getModel(U.VARIANT_MODEL_NAME);if(!e){return _(o);}return e;}).then(function(e){C.setModel(e,U.VARIANT_MODEL_NAME);});}return Promise.resolve();}};
function _(o){var m=o.getManifestObject();var f=c.createForControl(o,m);return f._oChangePersistence.loadChangesMapForComponent(o).then(function(g){var p=A.applyAllChangesForControl.bind(A,g,o,f);p._bIsSapUiFlFlexControllerApplyChangesOnControl=true;o.addPropagationListener(p);var v=new V({},f,o);o.setModel(v,U.VARIANT_MODEL_NAME);M.end("flexProcessing");return v;}).then(function(r){return d(r,o);});}
return c;},true);
sap.ui.predefine('sap/ui/fl/LayerUtils',["sap/base/util/UriParameters","sap/ui/thirdparty/hasher","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(U,h,L,a){"use strict";var l=[L.BASE,L.VENDOR,L.PARTNER,L.CUSTOMER_BASE,L.CUSTOMER,L.PUBLIC,L.USER];var m={};l.forEach(function(s,i){m[s]=i;});
function g(p){return U.fromQuery(window.location.search).get(p);}
var b={_mLayersIndex:m,_sTopLayer:l[l.length-1],FL_MAX_LAYER_PARAM:"sap-ui-fl-max-layer",isValidLayer:function(s){return Object.keys(L).some(function(e){return e===s;});},isVendorLayer:function(){return this.getCurrentLayer()===L.VENDOR;},isCustomerDependentLayer:function(s){return([L.PUBLIC,L.CUSTOMER,L.CUSTOMER_BASE].indexOf(s)>-1);},isDeveloperLayer:function(s){return b.compareAgainstCurrentLayer(s,L.CUSTOMER)===-1;},doesCurrentLayerRequirePackage:function(){var c=this.getCurrentLayer();return(c===L.VENDOR)||(c===L.PARTNER)||(c===L.CUSTOMER_BASE);},getMaxLayer:function(){var p=b.getMaxLayerTechnicalParameter(h.getHash());return p||g(this.FL_MAX_LAYER_PARAM)||b._sTopLayer;},getLayerIndex:function(s){return this._mLayersIndex[s];},isOverMaxLayer:function(s){return this.isOverLayer(s,this.getMaxLayer());},isOverLayer:function(o,c){return this.getLayerIndex(o)>this.getLayerIndex(c);},compareAgainstCurrentLayer:function(s,c){var C=c||b.getCurrentLayer();if((this.getLayerIndex(C)>this.getLayerIndex(s))||!s){return-1;}else if(this.getLayerIndex(C)===this.getLayerIndex(s)){return 0;}return 1;},isLayerFilteringRequired:function(){return this._sTopLayer!==this.getMaxLayer();},isSapUiLayerParameterProvided:function(){return!!g("sap-ui-layer");},getCurrentLayer:function(){var s=g("sap-ui-layer")||"";return s.toUpperCase()||L.CUSTOMER;},filterChangeDefinitionsByMaxLayer:function(c){return c.filter(function(C){return!C.layer||!b.isOverMaxLayer(C.layer);});},filterChangeOrChangeDefinitionsByCurrentLayer:function(c,C){if(!C){return c;}return c.filter(function(o){var s=o.getLayer&&o.getLayer()||o.layer;return C===s;});},getMaxLayerTechnicalParameter:function(H){return a.ifUShellContainerThen(function(s){var p=s[0].parseShellHash(H)||{};if(p.params&&p.params.hasOwnProperty(this.FL_MAX_LAYER_PARAM)){return p.params[this.FL_MAX_LAYER_PARAM][0];}}.bind(this),["URLParsing"]);}};return b;});
sap.ui.predefine('sap/ui/fl/PreprocessorImpl',["sap/ui/core/Component","sap/ui/fl/Utils","sap/ui/fl/ChangePersistenceFactory","sap/base/Log"],function(C,U,a,L){"use strict";
function i(c){return c.getChangeType()==="codeExt";}
function b(c,o){var s=o.getSelector().controllerName;return c===s;}
var P=function(){};
P.prototype.getControllerExtensions=function(c,s,A){if(A){if(!s){L.warning("No component ID for determining the anchor of the code extensions was passed.");return Promise.resolve([]);}var o=C.get(s);var d=U.getAppComponentForControl(o);if(!d){L.warning("No application component for determining the anchor of the code extensions was identified.");return Promise.resolve([]);}if(!U.isApplication(d.getManifestObject())){return Promise.resolve([]);}var f=U.getComponentClassName(d);var e=a.getChangePersistenceForComponent(f);return e.getChangesForComponent().then(function(g){var E=g.filter(function(h){return i(h)&&b(c,h);}).map(function(h){return h.getModuleName();});return P.getExtensionModules(E);});}L.warning("Synchronous extensions are not supported by sap.ui.fl.PreprocessorImpl");return[];};
P.getExtensionModules=function(c){if(c.length===0){return Promise.resolve([]);}return new Promise(function(r){sap.ui.require(c,function(){var m=Array.prototype.slice.call(arguments);r(m);},function(e){L.error("Code Extension not found",e.message);r([]);});});};
return P;},true);
sap.ui.predefine('sap/ui/fl/RegistrationDelegator',["sap/ui/fl/FlexControllerFactory","sap/ui/core/Component","sap/ui/fl/registry/ChangeHandlerRegistration","sap/ui/fl/ChangePersistenceFactory","sap/ui/core/mvc/Controller","sap/ui/core/mvc/XMLView","sap/ui/core/ExtensionPoint","sap/ui/fl/EventHistory","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/changes/descriptor/Preprocessor","sap/ui/fl/PreprocessorImpl","sap/ui/fl/XmlPreprocessorImpl"],function(F,C,a,b,M,X,E,c,d,P){"use strict";var R={};
function _(){C._fnOnInstanceCreated=F.getChangesAndPropagate;}
function e(){a.registerPredefinedChangeHandlers();a.getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs();}
function f(){C._fnLoadComponentCallback=b._onLoadComponent.bind(b);}
function g(){M.registerExtensionProvider("sap.ui.fl.PreprocessorImpl");}
function h(){if(X.registerPreprocessor){X.registerPreprocessor("viewxml","sap.ui.fl.XmlPreprocessorImpl",true);}}
function i(){c.start();}
function j(){C._fnPreprocessManifest=P.preprocessManifest;}
function k(v){if(d.isFlexExtensionPointHandlingEnabled(v)){return"sap/ui/fl/apply/_internal/extensionPoint/Processor";}if(sap.ui.getCore().getConfiguration().getDesignMode()){return"sap/ui/fl/write/_internal/extensionPoint/Processor";}return undefined;}
function l(){E.registerExtensionProvider(k);}
R.registerAll=function(){i();e();f();g();_();h();j();l();};
return R;},true);
sap.ui.predefine('sap/ui/fl/Utils',["sap/ui/thirdparty/jquery","sap/ui/core/Component","sap/ui/core/util/reflection/BaseTreeModifier","sap/ui/thirdparty/hasher","sap/base/Log","sap/base/util/UriParameters","sap/base/util/uid","sap/base/strings/formatMessage","sap/ui/base/ManagedObject","sap/ui/core/mvc/View"],function(q,C,B,h,L,U,u,f,M,V){"use strict";
function a(c){if(c.length>0&&c.indexOf(".Component")<0){c+=".Component";}return c;}
var b={APP_ID_AT_DESIGN_TIME:"${pro"+"ject.art"+"ifactId}",VARIANT_MODEL_NAME:"$FlexVariants",formatAndLogMessage:function(l,m,v,c){var s=m.join(' ');s=f(s,v);L[l](s,c||"");},getXSRFTokenFromControl:function(c){var m;if(!c){return"";}if(c&&typeof c.getModel==="function"){m=c.getModel();return b._getXSRFTokenFromModel(m);}return"";},_getXSRFTokenFromModel:function(m){var H;if(!m){return"";}if(typeof m.getHeaders==="function"){H=m.getHeaders();if(H){return H["x-csrf-token"];}}return"";},getComponentClassName:function(c){var A;if(c){A=this.getAppComponentForControl(c);if(A){var v=this._getComponentStartUpParameter(A,"sap-app-id");if(v){return v;}if(A.getManifestEntry("sap.ui5")&&A.getManifestEntry("sap.ui5").appVariantId){return A.getManifestEntry("sap.ui5").appVariantId;}}}return b.getComponentName(A);},isVariantByStartupParameter:function(c){if(c){var A=this.getAppComponentForControl(c);if(A){return!!this._getComponentStartUpParameter(A,"sap-app-id");}}return false;},getAppComponentClassNameForComponent:function(c){return b.getComponentClassName(c);},getAppDescriptor:function(c){var m=null;var o=null;var d=null;if(c){o=this.getAppComponentForControl(c);if(o&&o.getMetadata){d=o.getMetadata();if(d&&d.getManifest){m=d.getManifest();}}}return m;},getSiteId:function(c){var s=null;var A=null;if(c){A=this.getAppComponentForControl(c);if(A){s=this._getComponentStartUpParameter(A,"hcpApplicationId");}}return s;},getSiteIdByComponentData:function(c){return this._getStartUpParameter(c,"hcpApplicationId");},isBinding:function(p){var i=false;if(p&&typeof p==="string"&&p.substring(0,1)==="{"&&p.slice(-1)==="}"){i=true;}return i;},isApplicationVariant:function(c){var F=b.getComponentClassName(c);var A=b.getAppComponentForControl(c);var s=b.getComponentName(A);return F!==s;},isChangeRelatedToVariants:function(c){return c.getFileType()==="ctrl_variant_change"||c.getFileType()==="ctrl_variant_management_change"||c.getFileType()==="ctrl_variant"||c.getVariantReference();},_getComponentStartUpParameter:function(c,p){var s=null;if(p){if(c&&c.getComponentData){s=this._getStartUpParameter(c.getComponentData(),p);}}return s;},_getStartUpParameter:function(c,p){if(c&&c.startupParameters&&p){if(Array.isArray(c.startupParameters[p])){return c.startupParameters[p][0];}}},getComponentName:function(c){var s="";if(c){s=c.getMetadata().getName();}return a(s);},_getComponent:function(c){var o;if(c){o=C.get(c);}return o;},_getComponentIdForControl:function(c){var s=b._getOwnerIdForControl(c);if(!s){if(c&&typeof c.getParent==="function"){var p=c.getParent();if(p){return b._getComponentIdForControl(p);}}}return s||"";},getComponentForControl:function(c){return b._getComponentForControl(c);},getAppComponentForControl:function(c){var o=c instanceof C?c:this._getComponentForControl(c);return this._getAppComponentForComponent(o);},getAppDescriptorComponentObjectForControl:function(c){var A=this.getAppComponentForControl(c);var m=A.getManifest();return{name:this.getAppIdFromManifest(m)};},_getComponentForControl:function(c){var o=null;var s=null;if(c){s=b._getComponentIdForControl(c);if(s){o=b._getComponent(s);}}return o;},_getAppComponentForComponent:function(c){var s=null;if(c&&c.getAppComponent&&c.getAppComponent()instanceof C){return c.getAppComponent();}if(c&&c.oComponentData&&c.oComponentData.appComponent){return c.oComponentData.appComponent;}if(c&&c.getManifestEntry){s=c.getManifestEntry("sap.app");}else{return c;}if(s&&s.type&&s.type!=="application"){if(c instanceof C){c=this._getComponentForControl(c);}return this.getAppComponentForControl(c);}return c;},getViewForControl:function(c){return b.getFirstAncestorOfControlWithControlType(c,sap.ui.core.mvc.View);},getFirstAncestorOfControlWithControlType:function(c,d){if(c instanceof d){return c;}if(c&&typeof c.getParent==="function"){c=c.getParent();return b.getFirstAncestorOfControlWithControlType(c,d);}},hasControlAncestorWithId:function(c,A){var o;if(c===A){return true;}o=sap.ui.getCore().byId(c);while(o){if(o.getId()===A){return true;}if(typeof o.getParent==="function"){o=o.getParent();}else{return false;}}return false;},_isView:function(c){return c instanceof V;},_getOwnerIdForControl:function(c){return C.getOwnerIdFor(c);},getClient:function(){var o;var c;o=this._getUriParameters();c=o.get("sap-client");return c||undefined;},_getUriParameters:function(){return U.fromQuery(window.location.search);},isHotfixMode:function(){var o;var i;o=this._getUriParameters();i=o.get("hotfix");return(i==="true");},convertBrowserLanguageToISO639_1:function(s){if(!s||typeof s!=="string"){return"";}var n=s.indexOf("-");if((n<0)&&(s.length<=2)){return s.toUpperCase();}if(n>0&&n<=2){return s.substring(0,n).toUpperCase();}return"";},getLrepUrl:function(){var F=sap.ui.getCore().getConfiguration().getFlexibilityServices();var l=F.find(function(s){return s.connector==="LrepConnector";});return l?l.url:"";},getCurrentLanguage:function(){var l=sap.ui.getCore().getConfiguration().getLanguage();return b.convertBrowserLanguageToISO639_1(l);},getControlType:function(c){var m;if(c&&typeof c.getMetadata==="function"){m=c.getMetadata();if(m&&typeof m.getElementName==="function"){return m.getElementName();}}},asciiToString:function(c){var d=c.split(",");var p="";q.each(d,function(i,e){p+=String.fromCharCode(e);});return p;},stringToAscii:function(s){var c="";for(var i=0;i<s.length;i++){c+=s.charCodeAt(i)+",";}c=c.substring(0,c.length-1);return c;},checkControlId:function(c,A){if(!A){c=c instanceof M?c:sap.ui.getCore().byId(c);A=b.getAppComponentForControl(c);}return B.checkControlId(c,A);},hasLocalIdSuffix:B.hasLocalIdSuffix,_getAllUrlParameters:function(){return window.location.search.substring(1);},getTechnicalParametersForComponent:function(c){return c&&c.getComponentData&&c.getComponentData()&&c.getComponentData().technicalParameters;},getParsedURLHash:function(){return b.ifUShellContainerThen(function(s){var p=s[0].parseShellHash(h.getHash());return p||{};},["URLParsing"])||{};},ifUShellContainerThen:function(c,s){var o=b.getUshellContainer();if(o){var S=s.map(function(d){return o.getService(d);});return c(S);}},isDebugEnabled:function(){var o=this._getUriParameters();var d=o.get("sap-ui-debug")||"";if(sap.ui.getCore().getConfiguration().getDebug()||d==="true"){return true;}var D=d.split(",");return D.indexOf("sap/ui/fl")!==-1||D.indexOf("sap/ui/fl/")!==-1;},getUrlParameter:function(p){return U.fromQuery(window.location.search).get(p);},getUshellContainer:function(){return sap.ushell&&sap.ushell.Container;},createDefaultFileName:function(n){var F=u().replace(/-/g,"_");if(n){F+='_'+n;}return F;},createNamespace:function(p,F){var s="changes";if(F==="ctrl_variant"){s="variants";}var r=p.reference.replace('.Component','');var n='apps/'+r+"/"+s+"/";return n;},buildLrepRootNamespace:function(s,S,p){var r="apps/";var e=new Error("Error in sap.ui.fl.Utils#buildLrepRootNamespace: ");if(!s){e.message+="for every scenario you need a base ID";throw e;}switch(S){case sap.ui.fl.Scenario.VersionedAppVariant:if(!p){e.message+="in a versioned app variant scenario you additionally need a project ID";throw e;}r+=s+"/appVariants/"+p+"/";break;case sap.ui.fl.Scenario.AppVariant:if(!p){e.message+="in an app variant scenario you additionally need a project ID";throw e;}r+=s+"/appVariants/"+p+"/";break;case sap.ui.fl.Scenario.AdaptationProject:if(!p){e.message+="in a adaptation project scenario you additionally need a project ID";throw e;}r+=s+"/adapt/"+p+"/";break;case sap.ui.fl.Scenario.FioriElementsFromScratch:case sap.ui.fl.Scenario.UiAdaptation:default:r+=s+"/";}return r;},_getComponentTypeFromManifest:function(m){return m&&m.getEntry&&m.getEntry("sap.app")&&m.getEntry("sap.app").type;},_getComponentTypeFromRawManifest:function(m){return m&&m["sap.app"]&&m["sap.app"].type;},isApplication:function(m,i){var c=i?b._getComponentTypeFromRawManifest(m):b._getComponentTypeFromManifest(m);return c==="application";},isApplicationComponent:function(c){return c instanceof C&&b.isApplication(c.getManifestObject());},isEmbeddedComponent:function(c){return c instanceof C&&b._getComponentTypeFromManifest(c.getManifestObject())==="component";},getFlexReference:function(m){if(m){if(m.getEntry("sap.ui5")){if(m.getEntry("sap.ui5").appVariantId){return m.getEntry("sap.ui5").appVariantId;}if(m.getEntry("sap.ui5").componentName){return a(m.getEntry("sap.ui5").componentName);}}if(m.getEntry("sap.app")&&m.getEntry("sap.app").id){return a(b.getAppIdFromManifest(m));}}L.warning("No Manifest received.");return"";},getAppIdFromManifest:function(m){if(m){var s=(m.getEntry)?m.getEntry("sap.app"):m["sap.app"];var A=s&&s.id;if(A===b.APP_ID_AT_DESIGN_TIME&&m.getComponentName){A=m.getComponentName();}return A;}throw new Error("No Manifest received, descriptor changes are not possible");},getODataServiceUriFromManifest:function(m){var s="";if(m){var S=(m.getEntry)?m.getEntry("sap.app"):m["sap.app"];if(S&&S.dataSources&&S.dataSources.mainService&&S.dataSources.mainService.uri){s=S.dataSources.mainService.uri;}}else{L.warning("No Manifest received.");}return s;},indexOfObject:function(A,o){var O=-1;A.some(function(c,i){var k;var K;if(!c){k=[];}else{k=Object.keys(c);}if(!o){K=[];}else{K=Object.keys(o);}var s=k.length===K.length;var d=s&&!k.some(function(e){return c[e]!==o[e];});if(d){O=i;}return d;});return O;},execPromiseQueueSequentially:function(p,t,A){if(p.length===0){if(A){return Promise.resolve();}return new b.FakePromise();}var P=p.shift();if(typeof P==="function"){try{var r=P();}catch(e){r=Promise.reject(e);}return r.then(function(){if(!A&&r instanceof Promise){A=true;}}).catch(function(e){var E="Error during execPromiseQueueSequentially processing occured";E+=e?": "+e.message:"";L.error(E);if(t){throw new Error(E);}}).then(function(){return this.execPromiseQueueSequentially(p,t,A);}.bind(this));}L.error("Changes could not be applied, promise not wrapped inside function.");return this.execPromiseQueueSequentially(p,t,A);},FakePromise:function(i,e,I){b.FakePromise.fakePromiseIdentifier="sap.ui.fl.Utils.FakePromise";this.vValue=i;this.vError=e;this.bContinueWithFakePromise=arguments.length<3||(I===b.FakePromise.fakePromiseIdentifier);var r=function(p,c){try{var R=c(p,b.FakePromise.fakePromiseIdentifier);if(R instanceof Promise||R instanceof b.FakePromise){return R;}return new b.FakePromise(R);}catch(E){var v=E;return new b.FakePromise(undefined,v);}};b.FakePromise.prototype.then=function(c){if(!this.bContinueWithFakePromise){return Promise.resolve(c(this.vValue));}if(!this.vError){return r(this.vValue,c);}return this;};b.FakePromise.prototype.catch=function(c){if(!this.bContinueWithFakePromise){return Promise.reject(c(this.vError));}if(this.vError){return r(this.vError,c);}return this;};if(this.vValue instanceof Promise||this.vValue instanceof b.FakePromise){return this.vValue;}},getChangeFromChangesMap:function(c,s){var r;Object.keys(c).forEach(function(d){c[d].some(function(o){if(o.getId()===s){r=o;return true;}});});return r;},requireAsync:function(m){var o=sap.ui.require(m);if(o){return Promise.resolve(o);}return new Promise(function(r,R){sap.ui.require([m],function(o){r(o);},function(e){R(e);});});},normalizeReference:function(r){return r.replace(/(.Component)$/g,"");},handleUrlParameters:function(p,P,s){if(this.hasParameterAndValue(P,s)){if(p.startsWith("?")){p=p.substr(1,p.length);}var F=p.split("&").filter(function(c){return c!==P+"="+s;});p="";if(F.length>0){p="?"+F.toString();}}else{p+=(p.length>0?'&':'?')+P+"="+s;}return p;},hasParameterAndValue:function(p,P){return this.getParameter(p)===P;},getParameter:function(p){var o=this.getUshellContainer();if(o){var P=this.getParsedURLHash();return P.params&&P.params[p]&&P.params[p][0];}var c=U.fromQuery(document.location.search);if(!c){return false;}return c.get(p);}};return b;},true);
sap.ui.predefine('sap/ui/fl/Variant',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/registry/Settings","sap/base/util/merge","sap/base/Log"],function(q,M,L,U,a,S,m,b){"use strict";
var V=M.extend("sap.ui.fl.Variant",{
constructor:function(f){M.apply(this);if(!q.isPlainObject(f)){b.error("Constructor : sap.ui.fl.Variant : oFile is not defined");}this._oDefinition=f;this._oOriginDefinition=m({},f);this._sRequest='';this._bUserDependent=(f.content.layer===L.USER);this._vRevertData=null;this.setState(V.states.NEW);},
metadata:{properties:{state:{type:"string"}}}
});
V.states={NEW:"NEW",PERSISTED:"NONE",DELETED:"DELETE",DIRTY:"UPDATE"};V.events={markForDeletion:"markForDeletion"};
V.prototype.setState=function(s){if(this._isValidState(s)){this.setProperty("state",s);}return this;};
V.prototype._isValidState=function(s){var c=false;Object.keys(V.states).some(function(k){if(V.states[k]===s){c=true;}return c;});if(!c){return false;}if((this.getState()===V.states.NEW)&&(s===V.states.DIRTY)){return false;}return true;};
V.prototype.isValid=function(){var i=true;if(typeof(this._oDefinition)!=="object"){i=false;}if(!this._oDefinition.content.fileType||this._oDefinition.content.fileType!=="ctrl_variant"){i=false;}if(!this._oDefinition.content.fileName){i=false;}if(!this._oDefinition.content.content.title){i=false;}if(!this._oDefinition.content.variantManagementReference){i=false;}if(!this._oDefinition.content.layer){i=false;}if(!this._oDefinition.content.originalLanguage){i=false;}return i;};
V.prototype.isVariant=function(){return true;};
V.prototype.getDefinitionWithChanges=function(){return this._oDefinition;};
V.prototype.getTitle=function(){if(this._oDefinition){return this._oDefinition.content.content.title;}};
V.prototype.getFileType=function(){if(this._oDefinition){return this._oDefinition.content.fileType;}};
V.prototype.getControlChanges=function(){return this._oDefinition.controlChanges;};
V.prototype.getOriginalLanguage=function(){if(this._oDefinition&&this._oDefinition.content.originalLanguage){return this._oDefinition.content.originalLanguage;}return"";};
V.prototype.getPackage=function(){return this._oDefinition.content.packageName;};
V.prototype.getNamespace=function(){return this._oDefinition.content.namespace;};
V.prototype.setNamespace=function(n){this._oDefinition.content.namespace=n;};
V.prototype.getId=function(){return this._oDefinition.content.fileName;};
V.prototype.getContent=function(){return this._oDefinition.content.content;};
V.prototype.setContent=function(c){this._oDefinition.content.content=c;this.setState(V.states.DIRTY);};
V.prototype.getVariantManagementReference=function(){return this._oDefinition.content.variantManagementReference;};
V.prototype.getVariantReference=function(){return this._oDefinition.content.variantReference;};
V.prototype.getOwnerId=function(){return this._oDefinition.content.support?this._oDefinition.content.support.user:"";};
V.prototype.getText=function(t){if(typeof(t)!=="string"){b.error("sap.ui.fl.Variant.getTexts : sTextId is not defined");}if(this._oDefinition.content.texts){if(this._oDefinition.content.texts[t]){return this._oDefinition.content.texts[t].value;}}return"";};
V.prototype.setText=function(t,n){if(typeof(t)!=="string"){b.error("sap.ui.fl.Variant.setTexts : sTextId is not defined");return;}if(this._oDefinition.content.texts){if(this._oDefinition.content.texts[t]){this._oDefinition.content.texts[t].value=n;this.setState(V.states.DIRTY);}}};
V.prototype.isReadOnly=function(){return this._isReadOnlyDueToLayer()||this._isReadOnlyWhenNotKeyUser();};
V.prototype._isReadOnlyWhenNotKeyUser=function(){if(this.isUserDependent()){return false;}var r=this.getDefinition().reference;if(!r){return true;}var s=S.getInstanceOrUndef();if(!s){return true;}return!s.isKeyUser();};
V.prototype._isReadOnlyDueToLayer=function(){var c;c=this._bUserDependent?L.USER:a.getCurrentLayer();return(this._oDefinition.content.layer!==c);};
V.prototype._isReadOnlyDueToOriginalLanguage=function(){var c;var o;o=this.getOriginalLanguage();if(!o){return false;}c=U.getCurrentLanguage();return(c!==o);};
V.prototype.markForDeletion=function(){this.setState(V.states.DELETED);};
V.prototype.setRequest=function(r){if(typeof(r)!=="string"){b.error("sap.ui.fl.Variant.setRequest : sRequest is not defined");}this._sRequest=r;};
V.prototype.getRequest=function(){return this._sRequest;};
V.prototype.getLayer=function(){return this._oDefinition.content.layer;};
V.prototype.getComponent=function(){return this._oDefinition.content.reference;};
V.prototype.setComponent=function(c){this._oDefinition.content.reference=c;};
V.prototype.getCreation=function(){return this._oDefinition.content.creation;};
V.prototype.isUserDependent=function(){return(this._bUserDependent);};
V.prototype.getPendingAction=function(){return this.getState();};
V.prototype.getDefinition=function(){return this._oDefinition.content;};
V.prototype.setResponse=function(r){var R=JSON.stringify(r);if(R){this._oDefinition=JSON.parse(R);this._oOriginDefinition=JSON.parse(R);this.setState(V.states.PERSISTED);}};
V.prototype.getFullFileIdentifier=function(){var l=this.getLayer();var n=this.getNamespace();var f=this.getDefinition().content.fileName;var F=this.getDefinition().content.fileType;return l+"/"+n+"/"+f+"."+F;};
V.prototype.getRevertData=function(){return this._vRevertData;};
V.prototype.setRevertData=function(d){this._vRevertData=d;};
V.prototype.resetRevertData=function(){this.setRevertData(null);};
V.createInitialFileContent=function(p){if(!p){p={};}var f=p.content.fileName||U.createDefaultFileName();var n=p.content.namespace||U.createNamespace(p.content,"ctrl_variant");var N={content:{fileName:f,fileType:"ctrl_variant",variantManagementReference:p.content.variantManagementReference,variantReference:p.content.variantReference||"",reference:p.content.reference||"",packageName:p.content.packageName||"",content:{title:p.content.content.title||""},self:n+f+"."+"ctrl_variant",layer:p.content.layer||(p.isUserDependent?L.USER:a.getCurrentLayer()),texts:p.content.texts||{},namespace:n,creation:"",originalLanguage:U.getCurrentLanguage(),conditions:{},support:{generator:p.generator||"Change.createInitialFileContent",service:p.service||"",user:"",sapui5Version:sap.ui.version}},controlChanges:p.controlChanges||[],variantChanges:{}};return N;};
return V;},true);
sap.ui.predefine('sap/ui/fl/XmlPreprocessorImpl',["sap/ui/core/Component","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Utils","sap/ui/fl/ChangePersistenceFactory","sap/base/Log"],function(C,F,U,a,L){"use strict";var X=function(){};
X.process=function(v,p){try{if(!p||p.sync){L.warning("Flexibility feature for applying changes on an XML view is only available for "+"asynchronous views; merge is be done later on the JS controls.");return(v);}p.viewId=p.id;var c=C.get(p.componentId);if(!c){L.warning("View is generated without a component. Flexibility features are not possible.");return Promise.resolve(v);}var A=U.getAppComponentForControl(c);if(!U.isApplication(A.getManifestObject())){return Promise.resolve(v);}var f=U.getComponentClassName(A);var o=F.create(f);return o.processXmlView(v,p).then(function(){L.debug("flex processing view "+p.id+" finished");return v;}).catch(function(){L.warning("Error happens when getting flex cache key! flexibility XML view preprocessing is skipped. "+"The processing will be done later on the JS controls.");return Promise.resolve(v);});}catch(e){var E="view "+p.id+": "+e;L.info(E);return Promise.resolve(v);}};
X.getCacheKey=function(p){var c=C.get(p.componentId);var A=U.getAppComponentForControl(c);if(U.isVariantByStartupParameter(A)){return Promise.resolve();}var f=U.getComponentClassName(A);var o=a.getChangePersistenceForComponent(f);return o.getCacheKey(A);};
return X;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/DelegateMediator',["sap/base/Log","sap/base/util/merge","sap/base/util/restricted/_pick","sap/ui/fl/Utils","sap/ui/core/util/reflection/JsControlTreeModifier"],function(L,m,_,f,J){"use strict";var D={};D._mDefaultDelegateItems={};D.types={READONLY:"readonly",WRITEONLY:"writeonly",COMPLETE:"complete"};
function g(C,M){if(M){return M;}if(C.getModel){var i=C.getModel();if(!i){return undefined;}return i.getMetadata().getName();}}
function a(C,M){M=g(C,M);var i=D._mDefaultDelegateItems[M];return(i||[]).map(function(r){r.payload={};return r;});}
function l(M,C,i){if(!i.length){return Promise.resolve([]);}var P=[];i.forEach(function(r){P.push(function(s){return f.requireAsync(r.name).then(function(t){r.instance=t||{};s.push(r);return s;}).catch(function(E){L.error("Failed to load the delegate for the control "+M.getId(C)+"\n"+E.message);return s;});});});return P.reduce(function(r,s){return r.then(s);},Promise.resolve([]));}
function b(i){return i&&typeof i==="function";}
function c(i){return i.delegateType===D.types.COMPLETE||(b(i.instance.getPropertyInfo)&&(b(i.instance.createLabel)||b(i.instance.createLayout)));}
function d(i){return i.delegateType===D.types.READONLY||b(i.instance.getPropertyInfo);}
function e(i){return i.delegateType===D.types.WRITEONLY||b(i.instance.createLabel)||b(i.instance.createLayout);}
function h(t,i){t.names.push(i.name);if(i.requiredLibraries){t.requiredLibraries=Object.assign(t.requiredLibraries||{},i.requiredLibraries);}if(i.payload&&!t.payload){t.payload=i.payload;}return t;}
function j(t,i){t=h(t,i);return m(t,{instance:_(i.instance,["getPropertyInfo","getRepresentedProperties"])});}
function k(t,i){t=h(t,i);return m(t,{instance:_(i.instance,["createLabel","createControlForProperty","createLayout"])});}
function n(t,i){t=h(t,i);return m(t,_(i,"instance"));}
function o(r){var R={names:[],instance:{},modelType:r.length&&r[0].modelType};var s=true;var w=true;for(var i=(r.length-1);i>=0;i--){var t=r[i];if(c(t)){if(s&&w){R=n(R,t);}else if(s){R=j(R,t);}else if(w){R=k(R,t);}break;}else if(d(t)&&s){R=j(R,t);s=false;}else if(e(t)&&w){R=k(R,t);w=false;}}return r.length?R:undefined;}
function v(C,M){return new Promise(function(r,i){if(!C){i(new Error("The control parameter is missing"));}if(!M){i(new Error("The modifier parameter is missing"));}if(!C){i(new Error("The input control should be available"));}if(M===J&&(!C.isA||!C.isA("sap.ui.base.ManagedObject"))){i(new Error("The input control should be a managed object"));}return r();});}
function p(P){return Object.values(D.types).some(function(s){return s===P.delegateType;});}
function q(P){var i=D._mDefaultDelegateItems[P.modelType]||[];var r=i.map(function(s){return s.delegateType;});return r.indexOf(D.types.COMPLETE)>-1||r.indexOf(P.delegateType)>-1||(P.delegateType===D.types.COMPLETE&&r.length);}
D.getKnownDefaultDelegateLibraries=function(){return["sap.ui.comp"];};
D.getRequiredLibrariesForDefaultDelegate=function(i,C,M){M=g(C,M);var r=D._mDefaultDelegateItems[M]||[];return r.reduce(function(R,s){var I=i.indexOf(s.name)>-1;return R.concat(Object.keys((I&&s.requiredLibraries)||{}));},[]);};
D.isDelegateRegistered=function(M){return!!D._mDefaultDelegateItems[M];};
D.registerDefaultDelegate=function(P){if(!(P.modelType&&P.delegate)){throw new Error("'modelType' and 'delegate' properties are required for registration!");}P.delegateType=P.delegateType||D.types.COMPLETE;if(P.delegateType&&!p(P)){throw new Error("default 'delegateType': "+P.delegateType+" is invalid!");}if(q(P)){throw new Error("modelType "+P.modelType+"is already defined!");}if(!D._mDefaultDelegateItems[P.modelType]){D._mDefaultDelegateItems[P.modelType]=[];}D._mDefaultDelegateItems[P.modelType].push({name:P.delegate,requiredLibraries:P.requiredLibraries,delegateType:P.delegateType,modelType:P.modelType});};
D.getDelegateForControl=function(C,M,s,S){return v(C,M).then(function(){return M.getFlexDelegate(C);}).then(function(i){var r=(S&&a(C,s))||[];if(i){r.push(i);}return l(M,C,r);}).then(o.bind(this));};
D.clear=function(){D._mDefaultDelegateItems={};};
return D;},false);
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/FlexCustomData',["sap/ui/core/CustomData"],function(){"use strict";var F={};F.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";F.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";F.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";F.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";
F.getAppliedCustomDataValue=function(c,C,m){var a=g(c,m,this._getCustomDataKey(C,F.appliedChangesCustomDataKey));return a.customDataValue;};
F.getParsedRevertDataFromCustomData=function(c,C,m){var s=this.getAppliedCustomDataValue(c,C,m);return s&&JSON.parse(s);};
F.hasChangeApplyFinishedCustomData=function(c,C,m){var a=m.getAggregation(c,"customData")||[];var b=[this._getCustomDataKey(C,F.appliedChangesCustomDataKey),this._getCustomDataKey(C,F.failedChangesCustomDataKeyJs),this._getCustomDataKey(C,F.notApplicableChangesCustomDataKey)];return a.some(function(o){var k=m.getProperty(o,"key");if(b.indexOf(k)>-1){return!!m.getProperty(o,"value");}});};
F.addAppliedCustomData=function(c,C,p,s){var a;var b=this._getCustomDataKey(C,F.appliedChangesCustomDataKey);if(s){a=JSON.stringify(C.getRevertData());}else{a="true";}w(c,b,a,p);};
F.addFailedCustomData=function(c,C,p,i){var s=this._getCustomDataKey(C,i);w(c,s,"true",p);};
F.destroyAppliedCustomData=function(c,C,m){var k=this._getCustomDataKey(C,F.appliedChangesCustomDataKey);var a=g(c,m,k);if(a.customData){m.destroy(a.customData);}};
F.getCustomDataIdentifier=function(s,e,x){if(s){return F.appliedChangesCustomDataKey;}if(!e){return F.notApplicableChangesCustomDataKey;}if(x){return F.failedChangesCustomDataKeyXml;}return F.failedChangesCustomDataKeyJs;};
F._getCustomDataKey=function(c,i){return i+"."+c.getId();};
function w(c,k,v,p){var C=g(c,p.modifier,k);if(!C.customData){p.modifier.createAndAddCustomData(c,k,v,p.appComponent);}else{p.modifier.setProperty(C.customData,"value",v);}}
function g(c,m,C){var a=m.getAggregation(c,"customData")||[];var r={};a.some(function(o){var k=m.getProperty(o,"key");if(k===C){r.customData=o;r.customDataValue=m.getProperty(o,"value");return true;}});return r;}
return F;},true);
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/Applier',["sap/ui/fl/Change"],function(C){"use strict";var a="$sap.ui.fl.changes";
function g(m){var b=m&&m.getEntry&&m.getEntry(a)&&m.getEntry(a).descriptor||[];return b.map(function(c){return new C(c);});}
var A={applyChanges:function(u,b,s){return s.registry().then(function(R){var c=b.map(function(o){return R[o.getChangeType()]&&R[o.getChangeType()]();});return Promise.all(c);}).then(function(c){c.forEach(function(o,i){try{var d=b[i];u=o.applyChange(u,d);if(!o.skipPostprocessing&&d.getTexts()){u=s.processTexts(u,d.getTexts());}}catch(e){s.handleError(e);}});return u;});},applyChangesIncludedInManifest:function(m,s){var d=g(m);var M=m.getJson();delete M[a];if(d.length>0){return this.applyChanges(M,d,s).then(function(){return;});}return Promise.resolve();}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory',["sap/ui/fl/requireAsync","sap/base/Log"],function(r,L){"use strict";var R={registry:function(){return r("sap/ui/fl/apply/_internal/changes/descriptor/Registration");},handleError:function(e){L.error(e);},processTexts:function(m,c){var M=JSON.stringify(m);Object.keys(c).forEach(function(t){if(c[t].value[""]){M=M.replace("{{"+t+"}}",c[t].value[""]);}else{L.error("Text change has to contain default language");}});return JSON.parse(M);}};var A={getRuntimeStrategy:function(){return R;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil',["sap/ui/thirdparty/URI"],function(U){"use strict";var A={formatBundleName:function(i,b){if(b.startsWith("/")){throw Error("Absolute paths are not supported");}var n=new U(i+"/"+b).normalize().path();return n.replace(/\//g,".").replace("..",".").replace(/.properties$/g,"");}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/Preprocessor',["sap/ui/fl/apply/_internal/changes/descriptor/Applier","sap/ui/fl/apply/_internal/changes/descriptor/ApplyStrategyFactory","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/performance/Measurement","sap/ui/fl/Utils"],function(A,a,F,M,b,U){"use strict";var P={preprocessManifest:function(m,c){if(!U.isApplication(m,true)||!c.id){return Promise.resolve(m);}b.start("flexStateInitialize","Initialization of flex state",["sap.ui.fl"]);var C=c.componentData||{};var r=M.getFlexReference({manifest:m,componentData:C});if(!M.getChangeManifestFromAsyncHints(c.asyncHints)){F.initialize({componentData:C,asyncHints:c.asyncHints,rawManifest:m,componentId:c.id,reference:r,partialFlexState:true}).then(b.end.bind(undefined,"flexStateInitialize"));return Promise.resolve(m);}return F.initialize({componentData:C,asyncHints:c.asyncHints,rawManifest:m,componentId:c.id,reference:r,partialFlexState:true}).then(function(){b.end("flexStateInitialize");b.start("flexAppDescriptorMerger","Client side app descriptor merger",["sap.ui.fl"]);var u=Object.assign({},m);var d=F.getAppDescriptorChanges(r);return A.applyChanges(u,d,a.getRuntimeStrategy());}).then(function(m){b.end("flexAppDescriptorMerger");return m;});}};return P;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/Registration',["sap/ui/fl/requireAsync"],function(r){"use strict";var R={appdescr_ui5_addLibraries:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary"),appdescr_app_setTitle:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle"),appdescr_ovp_changeCard:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard"),appdescr_ovp_addNewCard:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard"),appdescr_ovp_removeCard:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard"),appdescr_ui_generic_app_addNewObjectPage:r.bind(this,"sap/suite/ui/generic/template/manifestMerger/AddNewObjectPage"),appdescr_ui_generic_app_changePageConfiguration:r.bind(this,"sap/suite/ui/generic/template/manifestMerger/ChangePageConfiguration")};return R;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/RegistrationBuild',["sap/ui/fl/requireAsync","sap/ui/fl/apply/_internal/changes/descriptor/Registration"],function(r,R){"use strict";var a={appdescr_app_changeDataSource:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource"),appdescr_ui5_addNewModelEnhanceWith:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith"),appdescr_ui5_addComponentUsages:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages"),appdescr_ui5_setMinUI5Version:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version"),appdescr_fiori_setRegistrationIds:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds"),appdescr_ui5_setFlexExtensionPointEnabled:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled"),appdescr_ui5_addNewModel:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel"),appdescr_app_addAnnotationsToOData:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData"),appdescr_app_changeInbound:r.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound")};var b=Object.assign({},R);return Object.assign(b,a);});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData',["sap/ui/fl/util/DescriptorChangeCheck"],function(D){"use strict";var S=["BEGINNING","END"];
function i(M,s){return Object.keys(M).indexOf(s)>=0;}
function a(M,s){return!M[s].type||M[s].type==="OData";}
function b(M,C,s){return((M[s]&&M[s].type==="ODataAnnotation")||C[s]);}
function c(C,s){return C[s].type&&C[s].type==="ODataAnnotation";}
function d(C,s){return C.indexOf(s)>=0;}
function e(M,C){if(C){if(Object.keys(M).length>0){if(!i(M,C)){throw new Error("There is no dataSource '"+C+"' existing in the manifest. You can only add annotations to already existing dataSources in the manifest");}if(!a(M,C)){throw new Error("The dataSource '"+C+"' is existing in the manifest but is not type of 'OData'. The type of the dataSource in the manifest is '"+M[C].type+"'");}}else{throw new Error("There are no dataSources in the manifest at all");}}else{throw new Error("Invalid change format: The mandatory 'dataSourceId' is not defined. Please define the mandatory property 'dataSourceId' and refer it to an existing OData");}}
function f(C){if(C){if(C.length===0){throw new Error("Invalid change format: The 'annotations' array property is empty");}}else{throw new Error("Invalid change format: The mandatory 'annotations' array property is not defined. Please define the 'annotations' array property");}}
function g(C){if(!(S.indexOf(C)>=0)&&!(C===undefined)){throw new Error("The defined insert position '"+C+"' is not supported. The supported insert positions are: "+S.join("|"));}}
function h(C,l,o){if(C){if(Object.keys(C).length===0){throw new Error("The 'dataSource' object is empty");}Object.keys(C).forEach(function(s){D.checkIdNamespaceCompliance(s,o);if(!c(C,s)){throw new Error("The dataSource annotation '"+s+"' is type of '"+C[s].type+"'. Only dataSource annotations of type 'ODataAnnotation' is supported");}if(!d(l,s)){throw new Error("The annotation '"+s+"' is not part of 'annotations' array property. Please add the annotation '"+s+"' in the 'annotations' array property");}});}else{throw new Error("Invalid change format: The mandatory 'dataSource' object is not defined. Please define the mandatory 'dataSource' object");}}
function m(M,C,l,s,o){j(M[C],l,s);k(M,o);}
function j(M,C,s){if(!M["settings"]){M["settings"]={};}if(!M["settings"].annotations){M["settings"].annotations=[];}var n=M["settings"].annotations.filter(function(l){return(C.indexOf(l)<0);});M["settings"].annotations=n;if(s==="END"){M["settings"].annotations=M["settings"].annotations.concat(C);}else{M["settings"].annotations=C.concat(M["settings"].annotations);}}
function k(M,C){Object.assign(M,C);}
function p(M,C,l){l.forEach(function(s){if(!b(M,C,s)){throw new Error("The annotation '"+s+"' is part of 'annotations' array property but does not exists in the change property 'dataSource' and in the manifest (or it is not type of 'ODataAnnotation' in the manifest)");}});}
var A={applyChange:function(M,C){var s=C.getContent().dataSourceId;var l=C.getContent().annotations;var n=C.getContent().annotationsInsertPosition;var o=C.getContent().dataSource;e(M["sap.app"].dataSources,s);f(l);g(n);h(o,l,C);p(M["sap.app"]["dataSources"],o,l);m(M["sap.app"]["dataSources"],s,l,n,o);return M;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource',["sap/ui/fl/util/changePropertyValueByPath","sap/ui/fl/util/DescriptorChangeCheck"],function(c,D){"use strict";var S=["UPDATE","UPSERT"];var a=["uri","settings/maxAge"];var C={applyChange:function(m,o){var d=m["sap.app"].dataSources;var b=o.getContent();D.checkEntityPropertyChange(b,a,S);if(d){var e=d[b.dataSourceId];if(e){c(b.entityPropertyChange,e);}else{throw new Error("Nothing to update. DataSource with ID \""+b.dataSourceId+"\" does not exist.");}}else{throw Error("No sap.app/dataSource found in manifest.json");}return m;}};return C;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound',["sap/ui/fl/util/changePropertyValueByPath","sap/ui/fl/util/DescriptorChangeCheck"],function(c,D){"use strict";var S=["UPDATE","UPSERT"];var a=["title","subTitle","icon"];var C={applyChange:function(m,o){var b=m["sap.app"].crossNavigation;var d=o.getContent();D.checkEntityPropertyChange(d,a,S);if(b&&b.inbounds){var i=b.inbounds[d.inboundId];if(i){c(d.entityPropertyChange,i);}else{throw new Error("Nothing to update. Inbound with ID \""+d.inboundId+"\" does not exist.");}}else{throw new Error("sap.app/crossNavigation or sap.app/crossNavigation/inbounds sections have not been found in manifest.json");}return m;}};return C;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle',[],function(){"use strict";var S={applyChange:function(m){m["sap.app"].title="{{"+m["sap.app"].id+"_sap.app.title}}";return m;}};return S;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds',["sap/base/util/ObjectPath"],function(O){"use strict";var S={applyChange:function(m,c){O.set(["sap.fiori","registrationIds"],c.getContent().registrationIds,m);return m;}};return S;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard',[],function(){"use strict";var A={applyChange:function(m,c){var n=c.getContent();var o=m["sap.ovp"].cards;if("card"in n&&Object.keys(n.card).length>0&&!(Object.keys(n.card)in o)){Object.assign(o,n.card);}else{throw Error("No new card found");}return m;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard',["sap/base/util/ObjectPath"],function(O){"use strict";var C={applyChange:function(m,c){var o=c.getContent();var i=o.entityPropertyChange.operation==="UPSERT";var a=m["sap.ovp"].cards;var p=o.entityPropertyChange;if(Array.isArray(p)){throw Error("Expected value for oPropertyChange was an object");}if(!i){throw Error("This Operation is not supported");}if(o.cardId in a&&"propertyPath"in p){O.set([o.cardId,p.propertyPath],p.propertyValue,a);}else{throw Error("Change card settings was not found");}return m;}};return C;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard',[],function(){"use strict";var D={applyChange:function(m,c){var d=c.getContent();var o=m["sap.ovp"].cards;if(d.cardId in o){delete o[d.cardId];}else{throw Error("The card to be deleted was not found");}return m;}};return D;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages',[],function(){"use strict";var A={applyChange:function(m,c){var C=c.getContent().componentUsages;if(!m["sap.ui5"]["componentUsages"]){m["sap.ui5"]["componentUsages"]={};}var M=m["sap.ui5"].componentUsages;Object.keys(C).forEach(function(s){if(M[s]){throw new Error("Component usage '"+s+"' already exists");}else{M[s]=C[s];}});return m;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary',["sap/base/util/Version"],function(V){"use strict";
function _(m,c){var u={};if(c.minVersion){var M=new V(m.minVersion);u.minVersion=M.compareTo(c.minVersion)>=0?m.minVersion:c.minVersion;}if(c.lazy){u.lazy=m.lazy===c.lazy===true;}return u;}
var A={applyChange:function(m,c){if(!m["sap.ui5"]["dependencies"]["libs"]){m["sap.ui5"]["dependencies"]["libs"]={};}var M=m["sap.ui5"]["dependencies"]["libs"];var C=c.getContent().libraries;Object.keys(C).forEach(function(l){if(M[l]){M[l]=_(M[l],C[l]);}else{M[l]=C[l];}});return m;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel',[],function(){"use strict";var S=["OData","INA","XML","JSON","FHIR","http","WebSocket"];var a=S.concat(["ODataAnnotation"]);
function i(C,D,s){return!C[D].type||s.indexOf(C[D]["type"])>=0;}
function b(C,o){return k(C).some(function(D){return(!D.type||D["type"]==="OData")&&D["settings"]["annotations"].indexOf(o)>=0;});}
function c(M,C,D){return d(C,D,S)||e(M,D);}
function d(D,s,l){return h(D,s)&&i(D,s,l);}
function e(D,s){if(h(D,s)){if(D[s].type&&D[s]["type"]==="ODataAnnotation"){throw new Error("The already existing dataSource '"+s+"' in the manifest is type of 'ODataAnnotation'. A model must not reference to a dataSource which is of type 'ODataAnnotation'");}return true;}return false;}
function h(t,s){return t&&Object.keys(t).indexOf(s)>=0;}
function m(M,C,E){if(C){Object.keys(C).forEach(function(n){if(M[n]){throw new Error("The "+E+" '"+n+"' already exists");}M[n]=C[n];});}}
function f(M,C,r,s,l){if(!M[r][s]){M[r][s]={};}m(M[r][s],C.getContent()[l],l);return M[r][s];}
function g(C,o,D){if(C[D].type==="ODataAnnotation"){return true;}return k(o).some(function(M){return M.dataSource&&M["dataSource"]===D;});}
function j(C,M){return C[M].type||C[M].dataSource;}
function k(o){return Object.keys(o).map(function(O){return o[O];});}
var A={applyChange:function(M,C){var o=C.getContent().model;var l=C.getContent().dataSource;if(o){if(Object.keys(o).length!==1){throw new Error("There are currently '"+Object.keys(o).length+"' models in the change. Currently it is only allowed to add '1' model");}Object.keys(o).forEach(function(s){if(!j(o,s)){throw new Error("There is no 'dataSource' or 'type' in the change model defined. Please define either 'type' or 'dataSource' in property '"+s+"'");}if(o[s].dataSource){if(!c(M["sap.app"]["dataSources"],l,o[s]["dataSource"])){throw new Error("The defined dataSource '"+o[s]["dataSource"]+"' in the model does not exists as dataSource or must be allowed type of "+S.join("|"));}}});}else{throw new Error("No model defined");}if(l){Object.keys(l).forEach(function(D){if(!i(l,D,a)){throw new Error("The dataSource '"+D+"' has the type '"+l[D]["type"]+"', but only dataSources with the follwing types are supported: "+a.join("|"));}if(!g(l,o,D)){throw new Error("The dataSource in the change '"+D+"' is not used by any model in the change. A dataSource in the change must be used by model in the change");}if(l[D]["type"]==="ODataAnnotation"){if(!b(l,D)){throw new Error("There is no dataSource with type 'OData' defined which includes the annotation '"+D+"'");}}});}f(M,C,"sap.ui5","models","model");f(M,C,"sap.app","dataSources","dataSource");return M;}};return A;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith',["sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil","sap/base/util/ObjectPath"],function(A,O){"use strict";var a={applyChange:function(m,c){var M=c.getContent().modelId;var i=A.formatBundleName(m["sap.app"].id,c.getTexts().i18n);var o=m["sap.ui5"].models[M];if(o){if(o.type&&o.type==="sap.ui.model.resource.ResourceModel"){if(!(o.settings&&o.settings.enhanceWith)){O.set("settings.enhanceWith",[],o);}var e=o.settings.enhanceWith;e.push({bundleName:i});}}return m;},skipPostprocessing:true};return a;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled',["sap/base/util/ObjectPath"],function(O){"use strict";var S={applyChange:function(m,c){if(!c.getContent().flexExtensionPointEnabled){throw new Error("No flexExtensionPointEnabled in change content provided");}O.set(["sap.ui5","flexExtensionPointEnabled"],c.getContent().flexExtensionPointEnabled,m);return m;}};return S;});
sap.ui.predefine('sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version',["sap/base/util/Version"],function(V){"use strict";var S={applyChange:function(m,c){var C=new V(m["sap.ui5"].dependencies.minUI5Version);if(C.compareTo(c.getContent().minUI5Version)<=0){m["sap.ui5"].dependencies.minUI5Version=c.getContent().minUI5Version;}return m;}};return S;});
sap.ui.predefine('sap/ui/fl/apply/_internal/extensionPoint/Processor',["sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState","sap/ui/fl/Utils","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/base/SyncPromise","sap/base/util/merge"],function(A,F,E,U,J,S,m){"use strict";var P;
function e(C,r,i,n,N){return N(C,true).then(function(b){b.forEach(function(o,d){r.splice(i+d+n,0,o);});C.index+=n;return b.length-1;});}
function c(o,n,C){var N=[];var r=[];var i=0;var l;C.forEach(function(b,d){if(b._isExtensionPoint){b.targetControl=o.targetControl;b.aggregationName=o.aggregationName;b.fragmentId=o.fragmentId;b.index=d;if(l){l._nextSibling=b;}l=b;b.referencedExtensionPoint=o;N.push(function(){return e(b,r,d,i,n).then(function(f){i+=f;});});}else{r.push(b);}});if(N.length>0){return N.reduce(function(p,b){return p.then(b);},S.resolve()).then(function(){return r;});}return S.resolve(r);}
function a(o,s){var b=U.getAppComponentForControl(o.targetControl);var p={};var d=m({defaultContent:[]},o);p.appComponent=b;p.modifier=J;p.viewId=o.view.getId();p.componentId=b.getId();return P.registerExtensionPoint(d).then(F.initialize.bind(F,p)).then(E.enhanceExtensionPointChanges.bind(E,p,o)).then(P.createDefaultContent.bind(this,o,s,a)).then(P.addDefaultContentToExtensionPointInfo.bind(this,d,s));}
P={oExtensionPointRegistry:undefined,oRegistryPromise:Promise.resolve(),registerExtensionPoint:function(b){if(sap.ui.getCore().getConfiguration().getDesignMode()){if(P.oExtensionPointRegistry){P.oExtensionPointRegistry.registerExtensionPoint(b);return S.resolve();}P.oRegistryPromise=P.oRegistryPromise.then(function(){return new Promise(function(r,d){sap.ui.require(["sap/ui/fl/write/_internal/extensionPoint/Registry"],function(f){P.oExtensionPointRegistry=f;f.registerExtensionPoint(b);r();},function(o){d(o);});});});return P.oRegistryPromise;}return S.resolve();},createDefaultContent:function(o,s,n,C){if(C.length===0){return o.createDefault().then(c.bind(undefined,o,n)).then(function(b){if(!s){b.forEach(function(N,i){J.insertAggregation(o.targetControl,o.aggregationName,N,o.index+i,o.view);});o.ready(b);}return b;});}return S.resolve([]);},addDefaultContentToExtensionPointInfo:function(r,s,C){if(!s){r.defaultContent=r.defaultContent.concat(C);}return C;},applyExtensionPoint:function(o){var p=a(o,false);A.addPreConditionForInitialChangeApplying(p);return p;}};return P;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexObjects/CompVariant',["sap/base/util/restricted/_pick","sap/ui/fl/Change","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(_,C,L,S,a,U){"use strict";
function i(A){var u=U.getUshellContainer();var o=u&&u.getUser();return!o||o.getId().toUpperCase()===A.toUpperCase();}
function c(l,A,u,f){if(A){return f||l===A;}else if(l===L.USER){return true;}var s=S.getInstanceOrUndef();if(a.isSapUiLayerParameterProvided()){A=a.getCurrentLayer();}else if(!A){A=s.isPublicLayerAvailable()?L.PUBLIC:L.CUSTOMER;}var g=l===A;var h=s.isKeyUser()||i(u);return g&&h;}
function b(o){return!o||U.getCurrentLanguage()===o;}
function d(s,f){var o=S.getInstanceOrUndef();if(!o){return true;}if(!s||!f){return true;}var g=o.getSystem();var h=o.getClient();return g===s&&f===h;}
var e=C.extend("sap.ui.fl.apply._internal.flexObjects.Variant",{
metadata:{properties:{favorite:{type:"boolean",defaultValue:false},executeOnSelection:{type:"boolean",defaultValue:false},standardVariant:{type:"boolean",defaultValue:false},contexts:{type:"object",defaultValue:{}},persisted:{type:"boolean",defaultValue:true},name:{type:"string",defaultValue:""},content:{type:"object",defaultValue:{}}},aggregations:{revertInfo:{type:"sap.ui.fl.apply._internal.flexObjects.CompVariantRevertData",multiple:true,singularName:"revertInfo",defaultValue:[]},changes:{type:"sap.ui.fl.Change",multiple:true,defaultValue:[]}}},
constructor:function(f){C.apply(this,arguments);var E=f.content&&(f.content.executeOnSelect||f.content.executeOnSelection);if(f.executeOnSelection!==undefined){E=f.executeOnSelection;}this.setExecuteOnSelection(E);this.setContexts(f.contexts||{});this.setContent(f.content||{});this.setName(this.getText("variantName"));if(f.layer===L.VENDOR||f.layer===L.CUSTOMER_BASE){this.setFavorite(true);}if(f.favorite!==undefined){this.setFavorite(!!f.favorite);}if(f.persisted!==undefined){this.setPersisted(!!f.persisted);}}
});
e.STANDARD_VARIANT_ID="*standard*";
e.prototype.isRenameEnabled=function(l){return this.isEditEnabled(l)&&b(this.getOriginalLanguage())&&!this.getStandardVariant();};
e.prototype.isEditEnabled=function(A){return d(this.getSourceSystem(),this.getSourceClient())&&c(this.getLayer(),A,this.getOwnerId(),true)&&(A&&a.isDeveloperLayer(A)||!this.getStandardVariant());};
e.prototype.isDeleteEnabled=function(l){return d(this.getSourceSystem(),this.getSourceClient())&&c(this.getLayer(),l,this.getOwnerId())&&!this.getStandardVariant();};
e.prototype.storeFavorite=function(f){if(f!==undefined){this._oDefinition.favorite=f;}else{delete this._oDefinition.favorite;}this.setState(C.states.DIRTY);this.setFavorite(f);};
e.prototype.setContent=function(o){this.setProperty("content",o||{});};
e.prototype.getContent=function(){return this.getProperty("content");};
e.prototype.storeContent=function(o){this._oDefinition.content=o||{};this.setState(C.states.DIRTY);this.setContent(o);};
e.prototype.storeExecuteOnSelection=function(E){if(E!==undefined){this._oDefinition.executeOnSelection=E;}else{delete this._oDefinition.executeOnSelection;}delete this._oDefinition.content.executeOnSelection;this.setState(C.states.DIRTY);this.setExecuteOnSelection(E);};
e.prototype.storeName=function(n){this._oDefinition.texts.variantName.value=n;this.setState(C.states.DIRTY);this.setName(n);};
e.prototype.storeContexts=function(m){if(m!==undefined){this._oDefinition.contexts=m;}else{delete this._oDefinition.contexts;}this.setContexts(m);this.setState(C.states.DIRTY);};
e.createInitialFileContent=function(p){var n=C.createInitialFileContent(p);if(p.contexts){n.contexts=p.contexts;}if(p.favorite!==undefined){n.favorite=p.favorite;}if(p.executeOnSelection!==undefined){n.executeOnSelection=p.executeOnSelection;}return _(n,["changeType","namespace","service","content","reference","fileName","fileType","packageName","layer","favorite","executeOnSelection","selector","texts","support","contexts"]);};
return e;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData',["sap/ui/fl/apply/_internal/flexObjects/RevertData"],function(R){"use strict";return R.extend("sap.ui.fl.apply._internal.flexObjects.CompVariantRevertData",{metadata:{properties:{change:{type:"sap.ui.fl.Change"}}}});});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexObjects/RevertData',["sap/ui/base/ManagedObject"],function(M){"use strict";return M.extend("sap.ui.fl.apply._internal.flexObjects.RevertData",{metadata:{properties:{type:{type:"string"},content:{type:"object"}}}});});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexObjects/UpdatableChange',["sap/ui/fl/Change"],function(C){"use strict";
var U=C.extend("sap.ui.fl.apply._internal.flexObjects.UpdatableChange",{metadata:{aggregations:{revertInfo:{type:"sap.ui.fl.apply._internal.flexObjects.RevertData",multiple:true,singularName:"revertInfo",defaultValue:[]}}}});
U.prototype.popLatestRevertInfo=function(){var l=this.getRevertInfo().pop();this.removeRevertInfo(l);return l;};
return U;});
sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/ManifestUtils',["sap/ui/fl/Utils"],function(U){"use strict";
function a(c){if(c&&c.indexOf(".Component")<0){c+=".Component";}return c;}
function g(A){var f;A.requests.some(function(o){if(o.name==="sap.ui.fl.changes"){f=o;}});return f;}
var M={getFlexReferenceForControl:function(c){var A=U.getAppComponentForControl(c);return M.getFlexReference({manifest:A.getManifest(),componentData:A.getComponentData()});},getFlexReference:function(p){var m=p.manifest;var c=p.componentData||{};if(c.startupParameters){if(Array.isArray(c.startupParameters["sap-app-id"])){return c.startupParameters["sap-app-id"][0];}}var s=m.getEntry?m.getEntry("sap.ui5"):m["sap.ui5"];if(s){if(s.appVariantId){return s.appVariantId;}if(s.componentName){return a(s.componentName);}}return a(U.getAppIdFromManifest(m));},getCacheKeyFromAsyncHints:function(r,A){if(A&&A.requests&&Array.isArray(A.requests)){var f=g(A);if(f&&f.reference===r){return f.cachebusterToken||"<NO CHANGES>";}}},getChangeManifestFromAsyncHints:function(A){if(A&&A.requests&&Array.isArray(A.requests)){var f=g(A);if(f){return false;}}return true;},getBaseComponentNameFromManifest:function(m){var s=m.getEntry?m.getEntry("sap.ui5"):m["sap.ui5"];return s&&s.componentName||U.getAppIdFromManifest(m);},isFlexExtensionPointHandlingEnabled:function(v){var A=U.getAppComponentForControl(v);return!!(A&&A.getManifestEntry("sap.ui5")&&A.getManifestEntry("sap.ui5").flexExtensionPointEnabled);}};return M;});
sap.ui.predefine('sap/ui/fl/changeHandler/AddIFrame',["sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(r,g,c){"use strict";var A={};
A.applyChange=function(C,o,p){var m=p.modifier;var a=C.getDefinition();var v=p.view;var s=a.content.targetAggregation;var b=m.findAggregation(o,s);if(!b){throw new Error("The given Aggregation is not available in the given control: "+m.getId(o));}var i=g(C,o,p);var I=c(C,p,a.content.selector);m.insertAggregation(o,s,I,i,v);C.setRevertData([m.getId(I)]);};
A.revertChange=r;
A.completeChangeContent=function(C,s,p){var o=C.getDefinition();var m=p.modifier;var a=p.appComponent;["targetAggregation","baseId","url"].forEach(function(R){if(!Object.prototype.hasOwnProperty.call(s.content,R)){throw new Error("Attribute missing from the change specific content '"+R+"'");}});o.content=Object.assign(o.content||{},s.content);o.content.selector=m.getSelector(o.content.baseId,a);};
A.getChangeVisualizationInfo=function(C){return{affectedControls:[C.getContent().selector]};};
return A;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/AddXML',["sap/ui/fl/changeHandler/BaseAddXml"],function(B){"use strict";var A={};
A.applyChange=function(c,C,p){var o=c.getDefinition();var m={aggregationName:o.content.targetAggregation,index:o.content.index};B.applyChange(c,C,p,m);return true;};
A.revertChange=B.revertChange;
A.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}if(s.targetAggregation){C.content.targetAggregation=s.targetAggregation;}else{B._throwMissingAttributeError("targetAggregation");}if(s.index!==undefined){C.content.index=s.index;}else{B._throwMissingAttributeError("index");}B.completeChangeContent(c,s,C);};
return A;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/AddXMLAtExtensionPoint',["sap/ui/fl/changeHandler/BaseAddXml"],function(B){"use strict";var A={};
function c(e){var i=e.index;if(e.referencedExtensionPoint){i+=c(e.referencedExtensionPoint);}return i;}
A.applyChange=function(C,o,p){var v=p.view;var m=p.modifier;var s=C.getDefinition().selector;var e=(C.getExtensionPointInfo&&C.getExtensionPointInfo())||m.getExtensionPointInfo(s.name,v);if(!e){throw new Error("AddXMLAtExtensionPoint-Error: Either no Extension-Point found by name '"+(s&&s.name)+"' or multiple Extension-Points available with the given name in the view (view.id='"+(v&&m.getId(v))+"'). Multiple Extension-points with the same name in one view are not supported!");}(e.defaultContent||[]).forEach(function(a){if(a){m.destroy(a);}});e.defaultContent=[];e.index=c(e);if(m.targets==="xmlTree"){e.skipAdjustIndex=true;}var n=B.applyChange(C,o,p,e);if(e.ready){e.ready(n);}return true;};
A.revertChange=B.revertChange;
A.completeChangeContent=function(C,s){B.completeChangeContent(C,s);};
return A;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/Base',["sap/base/util/LoaderExtensions"],function(L){"use strict";var B={setTextInChange:function(c,k,t,T){if(!c.texts){c.texts={};}if(!c.texts[k]){c.texts[k]={};}c.texts[k].value=t;c.texts[k].type=T;},instantiateFragment:function(c,p){var m=c.getModuleName();if(!m){throw new Error("The module name of the fragment is not set. This should happen in the backend");}var v=p.viewId?p.viewId+"--":"";var P=c.getProjectId()||"";var f=(c.getExtensionPointInfo&&c.getExtensionPointInfo()&&c.getExtensionPointInfo().fragmentId)||"";var s=P&&f?".":"";var i=v+P+s+f;var M=p.modifier;var V=p.view;var F=L.loadResource(m,{dataType:"text"});try{return M.instantiateFragment(F,i,V);}catch(e){throw new Error("The following XML Fragment could not be instantiated: "+F+" Reason: "+e.message);}},markAsNotApplicable:function(n,a){var r={message:n};if(!a){throw r;}return Promise.reject(r);}};return B;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/BaseAddViaDelegate',["sap/ui/fl/changeHandler/Base","sap/ui/fl/apply/api/DelegateMediatorAPI","sap/base/util/merge","sap/base/util/ObjectPath"],function(B,D,m,O){"use strict";
function i(f){return typeof f==="function";}
function g(c){if(c.modelType){return c.modelType;}else if(c.oDataServiceVersion){return"sap.ui.model.odata.v2.ODataModel";}}
var a={createAddViaDelegateChangeHandler:function(A){function b(n){return n+A.fieldSuffix;}function c(C,S){if(i(A[S])){return!!A[S]({changeDefinition:C});}return!!A[S];}function s(C){return c(C,"skipCreateLabel");}function d(C){return c(C,"skipCreateLayout");}function f(C,p){var o=p.modifier.bySelector(C.getSelector(),p.appComponent);var M=g(C.getDefinition().content);return D.getDelegateForControl({control:o,modifier:p.modifier,modelType:M,supportsDefault:A.supportsDefault}).then(function(e){var k=!i(e.instance.createLayout);return k||d(C.getDefinition());});}function h(C,e,o){var k=m({},e);k.fieldSelector.id=b(k.fieldSelector.id);return o.createControlForProperty(k).then(function(S){if(s(C)){return S;}var n=e.modifier.getId(S.control);e.labelFor=n;return o.createLabel(e).then(function(l){return{label:l,control:S.control,valueHelp:S.valueHelp};});});}function j(C,e,p){var k=m({aggregationName:A.aggregationName,payload:e.payload||{},parentSelector:C.content.parentId},p);var o=e.instance;return Promise.resolve().then(function(){if(i(o.createLayout)&&!d(C)){return o.createLayout(k);}}).then(function(l){if(O.get("control",l)){l.layoutControl=true;return l;}return h(C,k,o);});}return{applyChange:function(C,o,p){var e=C.getDefinition();var k=p.appComponent;var l=e.content;var F=l.newFieldSelector;var n={appComponent:p.appComponent,view:p.view,fieldSelector:F,bindingPath:l.bindingPath,modifier:p.modifier,element:o};if(p.modifier.bySelector(F,k,p.view)){return B.markAsNotApplicable("Control to be created already exists:"+(F.id||F),true);}var r={newFieldSelector:F};C.setRevertData(r);var M=g(l);return D.getDelegateForControl({control:o,modifier:p.modifier,modelType:M,supportsDefault:A.supportsDefault}).then(function(q){return j(e,q,n);}).then(function(I){var q=m({},{control:o,innerControls:I,change:C},p);A.addProperty(q);if(I.valueHelp){var v=p.modifier.getSelector(p.modifier.getId(I.valueHelp),k);r.valueHelpSelector=v;}});},revertChange:function(C,o,p){var e=p.appComponent;var M=p.modifier;var F=C.getRevertData().newFieldSelector;var v=C.getRevertData().valueHelpSelector;var n=M.bySelector(F,e);var P=C.getDependentControl(A.parentAlias,p)||o;M.removeAggregation(P,A.aggregationName,n);M.destroy(n);if(v){var V=M.bySelector(v,e);M.removeAggregation(P,"dependents",V);M.destroy(V);}var k=m({},{control:o,change:C},p);if(i(A.revertAdditionalControls)){A.revertAdditionalControls(k);}C.resetRevertData();return true;},completeChangeContent:function(C,S,p){var o=p.appComponent;var k=C.getDefinition();if(!k.content){k.content={};}if(S.parentId){if(i(A.mapParentIdIntoChange)){A.mapParentIdIntoChange(C,S,p);}else{C.addDependentControl(S.parentId,A.parentAlias,p);}try{k.content.parentId=p.modifier.getSelector(S.parentId,o);}catch(e){}}else{throw new Error("mSpecificChangeInfo.parentId attribute required");}if(S.bindingPath){k.content.bindingPath=S.bindingPath;}else{throw new Error("mSpecificChangeInfo.bindingPath attribute required");}if(S.newControlId){k.content.newFieldSelector=p.modifier.getSelector(S.newControlId,o);}else{throw new Error("mSpecificChangeInfo.newControlId attribute required");}if(S.index===undefined){throw new Error("mSpecificChangeInfo.targetIndex attribute required");}else{k.content.newFieldIndex=S.index;}if(S.oDataServiceVersion){k.content.oDataServiceVersion=S.oDataServiceVersion;}if(S.modelType&&A.supportsDefault){k.content.modelType=S.modelType;}},getChangeVisualizationInfo:function(C){var r=C.getRevertData();if(r&&r.labelSelector){return{affectedControls:[r.labelSelector]};}return{affectedControls:[C.getContent().newFieldSelector]};},getCondenserInfo:function(C,p){return f(C,p).then(function(e){if(!e){return undefined;}if(!C.getContent().newFieldSelector||!C.getContent().parentId||!A.aggregationName){return undefined;}return{affectedControl:C.getContent().newFieldSelector,classification:sap.ui.fl.condenser.Classification.Create,targetContainer:C.getContent().parentId,targetAggregation:A.aggregationName,setTargetIndex:function(C,n){C.getContent().newFieldIndex=n;},getTargetIndex:function(C){return C.getContent().newFieldIndex;}};});}};}};return a;});
sap.ui.predefine('sap/ui/fl/changeHandler/BaseAddXml',["sap/ui/fl/changeHandler/Base","sap/base/util/LoaderExtensions","sap/ui/fl/changeHandler/common/revertAddedControls"],function(B,L,r){"use strict";var a={};
a.applyChange=function(c,C,p,m){var n=B.instantiateFragment(c,p);var M=p.modifier;var v=p.view;var A=m.aggregationName;var o=M.findAggregation(C,A);if(!o){a._destroyArrayOfControls(n);throw new Error("The given Aggregation is not available in the given control: "+M.getId(C));}var s=c.getModuleName();var f=L.loadResource(s,{dataType:"text"});var i=m.index;var R=[];n.forEach(function(N,I){if(!M.validateType(N,o,C,f,I)){a._destroyArrayOfControls(n);throw new Error("The content of the xml fragment does not match the type of the targetAggregation: "+o.type);}});n.forEach(function(N,I){M.insertAggregation(C,A,N,i+I,v,m.skipAdjustIndex);R.push({id:M.getId(N),aggregationName:A});});c.setRevertData(R);return n;};
a.revertChange=r;
a._throwMissingAttributeError=function(A){throw new Error("Attribute missing from the change specific content'"+A+"'");};
a._destroyArrayOfControls=function(c){c.forEach(function(C){if(C.destroy){C.destroy();}});};
a.completeChangeContent=function(c,s,C){if(!C){C=c.getDefinition();if(!C.content){C.content={};}}if(s.fragmentPath){C.content.fragmentPath=s.fragmentPath;}else{a._throwMissingAttributeError("fragmentPath");}var m=C.reference.replace(/\.Component/g,"").replace(/\./g,"/");m+="/changes/";m+=C.content.fragmentPath;c.setModuleName(m);};
return a;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/BaseRename',["sap/ui/fl/changeHandler/Base","sap/base/Log"],function(B,L){"use strict";var a={createRenameChangeHandler:function(r){r.changePropertyName=r.changePropertyName||"newText";return{applyChange:function(c,C,p){var m=p.modifier;var P=r.propertyName;var o=c.getDefinition();var t=o.texts[r.changePropertyName];var v=t.value;if(o.texts&&t&&typeof(v)==="string"){c.setRevertData(m.getPropertyBindingOrProperty(C,P));m.setPropertyBindingOrProperty(C,P,v);return true;}L.error("Change does not contain sufficient information to be applied: ["+o.layer+"]"+o.namespace+"/"+o.fileName+"."+o.fileType);},revertChange:function(c,C,p){var m=p.modifier;var P=r.propertyName;var o=c.getRevertData();if(o||o===""){m.setPropertyBindingOrProperty(C,P,o);c.resetRevertData();return true;}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");},completeChangeContent:function(c,s,p){var C=c.getDefinition();var b=r.changePropertyName;var t=r.translationTextType;var o=p.modifier.bySelector(c.getSelector(),p.appComponent);C.content.originalControlType=p.modifier.getControlType(o);if(typeof(s.value)==="string"){B.setTextInChange(C,b,s.value,t);}else{throw new Error("oSpecificChangeInfo.value attribute required");}},getCondenserInfo:function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:r.propertyName||r.changePropertyName};}};}};return a;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/BaseTreeModifier',["sap/ui/core/util/reflection/BaseTreeModifier"],function(B){"use strict";return B;});
sap.ui.predefine('sap/ui/fl/changeHandler/HideControl',["sap/base/Log",'sap/ui/fl/changeHandler/JsControlTreeModifier'],function(L,J){"use strict";var P="visible";var H={};
H.applyChange=function(c,C,p){c.setRevertData({originalValue:p.modifier.getVisible(C)});p.modifier.setVisible(C,false);return true;};
H.revertChange=function(c,C,p){var r=c.getRevertData();if(r){p.modifier.setVisible(C,r.originalValue);c.resetRevertData();}else{L.error("Attempt to revert an unapplied change.");return false;}return true;};
H.completeChangeContent=function(){};
H.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:P};};
H.getChangeVisualizationInfo=function(c,a){var s=c.getSelector();var e=J.bySelector(s,a);return{affectedControls:[s],displayControls:[e.getParent().getId()]};};
return H;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/JsControlTreeModifier',["sap/ui/core/util/reflection/JsControlTreeModifier"],function(J){"use strict";return J;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/MoveControls',["sap/base/Log"],function(L){"use strict";var M={};M.SOURCE_ALIAS="source";M.TARGET_ALIAS="target";M.MOVED_ELEMENTS_ALIAS="movedElements";
M._checkConditions=function(c,m,v,a){if(!c){throw new Error("No change instance");}var C=c.getContent();if(!C||!C.movedElements||C.movedElements.length===0){throw new Error("Change format invalid");}if(!C.source||!C.source.selector){throw new Error("No source supplied for move");}if(!C.target||!C.target.selector){throw new Error("No target supplied for move");}if(!m.bySelector(C.source.selector,a,v)){throw new Error("Move source parent not found");}if(!m.bySelector(C.target.selector,a,v)){throw new Error("Move target parent not found");}if(!C.source.selector.aggregation){throw new Error("No source aggregation supplied for move");}if(!C.target.selector.aggregation){throw new Error("No target aggregation supplied for move");}};
M._getElementControlOrThrowError=function(m,o,a,v){if(!m.selector&&!m.id){throw new Error("Change format invalid - moveElements element has no id attribute");}if(typeof m.targetIndex!=="number"){throw new Error("Missing targetIndex for element with id '"+m.selector.id+"' in movedElements supplied");}var c=o.bySelector(m.selector||m.id,a,v);if(!c){throw new Error("Control to move was not found. Id: '"+m.selector.id+"'");}return c;};
M._checkCompleteChangeContentConditions=function(s){if(!s.movedElements){throw new Error("mSpecificChangeInfo.movedElements attribute required");}if(s.movedElements.length===0){throw new Error("MovedElements array is empty");}s.movedElements.forEach(function(e){if(!e.id){throw new Error("MovedControls element has no id attribute");}if(typeof(e.sourceIndex)!=="number"){throw new Error("SourceIndex attribute at MovedElements element is no number");}if(typeof(e.targetIndex)!=="number"){throw new Error("TargetIndex attribute at MovedElements element is no number");}});};
M._getSpecificChangeInfo=function(m,s,a){delete s.source.publicAggregation;delete s.target.publicAggregation;var S=s.source.parent||m.bySelector(s.source.id,a);var t=s.target.parent||m.bySelector(s.target.id,a);var b=s.source.aggregation;var T=s.target.aggregation;var A={aggregation:s.source.aggregation,type:m.getControlType(S)};var c={aggregation:s.target.aggregation,type:m.getControlType(t)};var d={source:{id:S.getId(),aggregation:b,type:A.type,selector:m.getSelector(s.source.id,a,A)},target:{id:t.getId(),aggregation:T,type:c.type,selector:m.getSelector(s.target.id,a,c)},movedElements:s.movedElements};return d;};
M.applyChange=function(c,r,p){var m=p.modifier;var v=p.view;var a=p.appComponent;this._checkConditions(c,m,v,a);var C=c.getContent();var R=[];C.movedElements.forEach(function(b){var o=this._getElementControlOrThrowError(b,m,a,v);var s=m.getParent(o);var S=p.sourceAggregation||m.getParentAggregationName(o,s);var t=m.bySelector(C.target.selector,a,v);var T=p.targetAggregation||C.target.selector.aggregation;var i=m.findIndexInParentAggregation(o);var I=b.targetIndex;var d=false;if(i>-1){if(i===I&&S===T&&m.getParent(o)===t){i=b.sourceIndex;s=m.bySelector(C.source.selector,a,v);S=p.sourceAggregation||C.source.selector.aggregation;d=true;}R.unshift({index:i,aggregation:S,sourceParent:m.getSelector(s,a)});}if(!d){m.removeAggregation(s,S,o);m.insertAggregation(t,T,o,I,v);}},this);c.setRevertData(R);return true;};
M.revertChange=function(c,r,p){var m=p.modifier;var v=p.view;var a=p.appComponent;this._checkConditions(c,m,v,a);var C=c.getContent();var s=m.bySelector(C.source.selector,a,v);var S=C.source.selector.aggregation;var t=m.bySelector(C.target.selector,a,v);var T=C.target.selector.aggregation;var R=c.getRevertData();c.getContent().movedElements.reverse();C.movedElements.forEach(function(b,e){var o=this._getElementControlOrThrowError(b,m,a,v);if(!o){L.warning("Element to move not found");return;}var i=b.sourceIndex;if(R){var d=R[e];S=d.aggregation;i=d.index;s=m.bySelector(d.sourceParent,a,v);}m.removeAggregation(t,T,o);m.insertAggregation(s,S,o,i,v);},this);c.resetRevertData();return true;};
M.completeChangeContent=function(c,s,p){this._checkCompleteChangeContentConditions(s);var m=p.modifier;var a=p.appComponent;var C=c.getDefinition();s=this._getSpecificChangeInfo(m,s,a);C.content={movedElements:[],source:{selector:s.source.selector},target:{selector:s.target.selector}};s.movedElements.forEach(function(e){var E=e.element||m.bySelector(e.id,a);C.content.movedElements.push({selector:m.getSelector(E,a),sourceIndex:e.sourceIndex,targetIndex:e.targetIndex});});c.addDependentControl(s.source.id,M.SOURCE_ALIAS,p);c.addDependentControl(s.target.id,M.TARGET_ALIAS,p);c.addDependentControl(s.movedElements.map(function(e){return e.id;}),M.MOVED_ELEMENTS_ALIAS,p);};
M.getCondenserInfo=function(c){var C=c.getContent();var r=c.getRevertData()[0];return{affectedControl:C.movedElements[0].selector,classification:sap.ui.fl.condenser.Classification.Move,sourceContainer:r.sourceParent,targetContainer:C.target.selector,sourceIndex:r.index,sourceAggregation:r.aggregation,targetAggregation:C.target.selector.aggregation,setTargetIndex:function(c,n){c.getContent().movedElements[0].targetIndex=n;},getTargetIndex:function(c){return c.getContent().movedElements[0].targetIndex;}};};
M.getChangeVisualizationInfo=function(c){var C=c.getContent();return{affectedControls:[C.movedElements[0].selector],dependentControls:[C.source.selector]};};
return M;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/MoveElements',["sap/base/Log"],function(L){"use strict";var M={};M.CHANGE_TYPE="moveElements";
M.applyChange=function(c,s,p){function a(c,m,v,A){if(!c){throw new Error("No change instance");}var C=c.getContent();if(!C||!C.movedElements||C.movedElements.length===0){throw new Error("Change format invalid");}if(!c.getSelector().aggregation){throw new Error("No source aggregation supplied via selector for move");}if(!C.target||!C.target.selector){throw new Error("No target supplied for move");}if(!m.bySelector(C.target.selector,A,v)){throw new Error("Move target parent not found");}if(!C.target.selector.aggregation){throw new Error("No target aggregation supplied for move");}}function g(b,m,A,v){if(!b.selector&&!b.id){throw new Error("Change format invalid - moveElements element has no id attribute");}if(typeof b.targetIndex!=="number"){throw new Error("Missing targetIndex for element with id '"+b.selector.id+"' in movedElements supplied");}return m.bySelector(b.selector||b.id,A,v);}var m=p.modifier;var v=p.view;var A=p.appComponent;a(c,m,v,A);var C=c.getContent();var t=m.bySelector(C.target.selector,A,v);var S=c.getSelector().aggregation;var T=C.target.selector.aggregation;C.movedElements.forEach(function(b){var o=g(b,m,A,v);if(!o){L.warning("Element to move not found");return;}m.removeAggregation(s,S,o);m.insertAggregation(t,T,o,b.targetIndex,v);});return true;};
M.completeChangeContent=function(){throw new Error('Using deprecated change handler. Please consider of using \'MoveControls\' instead');};
M.getSpecificChangeInfo=function(m,s){var S=s.source.parent||m.bySelector(s.source.id);var t=s.target.parent||m.bySelector(s.target.id);var a=s.source.aggregation;var T=s.target.aggregation;var b={source:{id:S.getId(),aggregation:a,type:m.getControlType(S)},target:{id:t.getId(),aggregation:T,type:m.getControlType(t)},movedElements:s.movedElements};return b;};
return M;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/PropertyBindingChange',["sap/base/Log"],function(L){"use strict";var P={};
P.applyChange=function(c,C,p){var d=c.getDefinition();var s=d.content.property;var v=d.content.newBinding;var m=p.modifier;var o=m.getPropertyBindingOrProperty(C,s);c.setRevertData({originalValue:o});m.setPropertyBinding(C,s,v);};
P.revertChange=function(c,C,p){var r=c.getRevertData();if(r){var d=c.getDefinition();var s=d.content.property;var v=r.originalValue;var m=p.modifier;m.setPropertyBindingOrProperty(C,s,v);c.resetRevertData();}else{L.error("Attempt to revert an unapplied change.");return false;}return true;};
P.completeChangeContent=function(c,s){var C=c.getDefinition();if(!s.content){throw new Error("oSpecificChangeInfo attribute required");}C.content=s.content;};
P.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:c.getContent().property};};
return P;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/PropertyChange',["sap/ui/thirdparty/jquery","sap/ui/fl/Utils","sap/base/Log"],function(q,F,L){"use strict";var P={};
function i(p){return F.isBinding(p)||q.isPlainObject(p);}
function c(C,p,v,m){try{if(i(v)){m.setPropertyBinding(C,p,v);}else{m.setProperty(C,p,v);}}catch(e){throw new Error("Applying property changes failed: "+e);}}
P.applyChange=function(C,o,p){var d=C.getDefinition();var s=d.content.property;var v=d.content.newValue;var m=p.modifier;C.setRevertData({originalValue:m.getPropertyBindingOrProperty(o,s)});c(o,s,v,m);};
P.revertChange=function(C,o,p){var r=C.getRevertData();if(r){var d=C.getDefinition();var s=d.content.property;var v=r.originalValue;var m=p.modifier;c(o,s,v,m);C.resetRevertData();}else{L.error("Attempt to revert an unapplied change.");return false;}return true;};
P.completeChangeContent=function(C,s){var o=C.getDefinition();if(!s.content){throw new Error("oSpecificChangeInfo attribute required");}o.content=s.content;};
P.getCondenserInfo=function(C){return{affectedControl:C.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:C.getContent().property};};
return P;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/StashControl',["sap/ui/fl/LayerUtils"],function(L){"use strict";var S={};
S.applyChange=function(c,C,p){var s=p.modifier.getStashed(C);var o=p.modifier.findIndexInParentAggregation(C);this.setChangeRevertData(c,s,o);if(L.isDeveloperLayer(c.getLayer())){p.modifier.setStashed(C,true);}else{p.modifier.setVisible(C,false);}};
S.revertChange=function(c,C,p){var r=c.getRevertData();if(L.isDeveloperLayer(c.getLayer())){var u=p.modifier.setStashed(C,r.originalValue,p.appComponent);if(u){var U=p.modifier.findIndexInParentAggregation((u));if(U!==r.originalIndex){var P=p.modifier.getParent(u);var a=p.modifier.getParentAggregationName(u);p.modifier.removeAggregation(P,a,u);p.modifier.insertAggregation(P,a,u,r.originalIndex);}}}else{p.modifier.setVisible(C,!r.originalValue);}c.resetRevertData();};
S.completeChangeContent=function(){};
S.setChangeRevertData=function(c,v,o){c.setRevertData({originalValue:v,originalIndex:o});};
S.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:"stashed"};};
return S;});
sap.ui.predefine('sap/ui/fl/changeHandler/UnhideControl',["sap/base/Log"],function(L){"use strict";var P="visible";var U={};
U.applyChange=function(c,C,p){c.setRevertData({originalValue:p.modifier.getProperty(C,P)});p.modifier.setVisible(C,true);return true;};
U.revertChange=function(c,C,p){var r=c.getRevertData();if(r){p.modifier.setVisible(C,r.originalValue);c.resetRevertData();}else{L.error("Attempt to revert an unapplied change.");return false;}return true;};
U.completeChangeContent=function(){};
U.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:P};};
return U;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/UnstashControl',[],function(){"use strict";var U={};
U.applyChange=function(c,C,p){var m=c.getContent();var M=p.modifier;var s=false;c.setRevertData({originalValue:p.modifier.getStashed(C)});var u=M.setStashed(C,s,p.appComponent)||C;if(m.parentAggregationName){var t=m.parentAggregationName;var T=M.getParent(u);M.removeAggregation(T,t,u);M.insertAggregation(T,t,u,m.index,p.view);}return u;};
U.revertChange=function(c,C,p){var r=c.getRevertData();p.modifier.setStashed(C,r.originalValue);c.resetRevertData();};
U.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.content){C.content=s.content;}};
U.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:"stashed"};};
return U;});
sap.ui.predefine('sap/ui/fl/changeHandler/UpdateIFrame',["sap/base/util/extend"],function(e){"use strict";var U={};var u=["width","height","url"];
function g(m,i){var s={};u.forEach(function(p){var v=m.getProperty(i,p);if(v!==undefined){s[p]=v;}});return s;}
function a(m,i,s){var f=e({_settings:s},s);m.applySettings(i,f);}
U.applyChange=function(c,C,p){var m=p.modifier;var o=c.getDefinition();var b=m.getControlMetadata(C);if(b.getName()!=="sap.ui.fl.util.IFrame"){throw new Error("UpdateIFrame only for sap.ui.fl.util.IFrame");}c.setRevertData({originalSettings:g(m,C)});a(m,C,o.settings);};
U.revertChange=function(c,C,p){var r=c.getRevertData();if(r){a(p.modifier,C,r.originalSettings);c.resetRevertData();}else{throw new Error("Attempt to revert an unapplied change.");}};
U.completeChangeContent=function(c,s){var C=c.getDefinition();if(!s.content||!Object.keys(s.content).some(function(p){return u.indexOf(p)!==-1;})){throw new Error("oSpecificChangeInfo attribute required");}C.settings=s.content;};
return U;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/XmlTreeModifier',["sap/ui/core/util/reflection/XmlTreeModifier"],function(X){"use strict";return X;},true);
sap.ui.predefine('sap/ui/fl/changeHandler/common/createIFrame',["sap/ui/fl/util/IFrame"],function(){"use strict";return function(c,p,s){var m=p.modifier;var C=c.getDefinition();var v=p.view;var o=p.appComponent;var i={_settings:{}};["url","width","height"].forEach(function(a){var V=C.content[a];i[a]=V;i._settings[a]=V;});var I=m.createControl("sap.ui.fl.util.IFrame",o,v,s,i,false);return I;};});
sap.ui.predefine('sap/ui/fl/changeHandler/common/getTargetAggregationIndex',[],function(){"use strict";return function(c,C,p){var m=p.modifier;var o=c.getDefinition();var a=o.content.targetAggregation;var i=o.content.index;if(i===undefined){var A=m.getAggregation(C,a);i=A.length;}return i;};});
sap.ui.predefine('sap/ui/fl/changeHandler/common/revertAddedControls',["sap/ui/fl/Utils"],function(U){"use strict";return function(c,C,p){var m=p.modifier;var o=c.getDefinition();var a=o.content.targetAggregation;var v=p.view||U.getViewForControl(C);var A=p.appComponent;var r=c.getRevertData()||[];var b=r.map(function(R){var s;if(typeof R==="string"){s=R;}else{s=R.id;a=a||R.aggregationName;}return m.bySelector(s,A,v)||v&&v.createId&&m.bySelector(v.createId(s));});b.forEach(function(d){m.removeAggregation(C,a,d);if(d.destroy){d.destroy();}});c.resetRevertData();return true;};});
sap.ui.predefine('sap/ui/fl/codeExt/CodeExtManager',["sap/ui/fl/write/_internal/Storage","sap/ui/fl/Change"],function(S,C){"use strict";var a;a={createOrUpdateCodeExtChange:function(p,o){if(!p.content||!p.content.codeRef){throw new Error("no code reference passed for the code extension change");}if(!p.selector||!p.selector.id){throw new Error("no controller name passed for the code extension change");}if(!p.reference){throw new Error("no reference passed for the code extension change");}p.changeType=p.changeType||"codeExt";var c=C.createInitialFileContent(p);return S.write({layer:c.layer,transport:o.transportId,flexObjects:[c]});},createCodeExtChanges:function(c,o){c=c||[];if(c.length===0){return Promise.resolve();}var p=[];c.forEach(function(b){b.changeType=b.changeType||"codeExt";b.packageName=o.packageName;b.content={codeRef:o.codeRef};p.push(C.createInitialFileContent(b));});return S.write({layer:p[0].layer,transport:o.transportId,flexObjects:p});},deleteCodeExtChange:function(c,o){if(c.changeType!=="codeExt"||c.fileType!=="change"){throw new Error("the change is not of type 'code extension'");}if(!c.fileName){throw new Error("the extension does not contains a file name");}if(c.namespace===undefined){throw new Error("the extension does not contains a namespace");}return S.remove({layer:c.layer,transport:o.transportId,flexObject:c});}};return a;});
sap.ui.predefine('sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory',["sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/Change","sap/ui/fl/Utils","sap/base/util/merge"],function(C,a,F,b){"use strict";var D=function(m,i){this._mChangeFile=m;this._mChangeFile.packageName='';this._oInlineChange=i;};
D.prototype.submit=function(){this.store();var o=this._getChangePersistence(this._mChangeFile.reference);return o.saveDirtyChanges();};
D.prototype.store=function(){var s=this._mChangeFile.reference;var o=this._getChangePersistence(s);var d=this._getChangeToSubmit();o.addChange(d);return d;};
D.prototype._getChangePersistence=function(s){return C.getChangePersistenceForComponent(s);};
D.prototype._getChangeToSubmit=function(){var o=new a(this._getMap());return o;};
D.prototype._getMap=function(){var i=this._oInlineChange.getMap();this._mChangeFile.content=i.content;this._mChangeFile.texts=i.texts;return this._mChangeFile;};
D.prototype.getJson=function(){return b({},this._getMap());};
var c=function(){};
c.prototype.createNew=function(r,i,l,A,t){var s=function(_,I){if(_["setHostingIdForTextKey"]){_.setHostingIdForTextKey(I);}};s(i,r);var p={};p.changeType=i._getChangeType();p.componentName=r;p.reference=r;p.generator=t;p.support=i.getMap().support;p.layer=l||'CUSTOMER';var m=a.createInitialFileContent(p);return Promise.resolve(new D(m,i));};
return c;});
sap.ui.predefine('sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory',["sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/base/util/merge"],function(A,D,m){"use strict";
function _(c,p,t){var P=m({},{changeType:c},{content:p});if(t){P.texts=t;}return P;}
var a={};
a.getDescriptorChangeTypes=function(){return D.getChangeTypes();};
a.getCondensableDescriptorChangeTypes=function(){return D.getCondensableChangeTypes();};
a.createNew=function(c,p,t){var P=_(c,p,t);return A.createNew(P);};
a.createDescriptorInlineChange=function(d,p,t){var P=_(d,p,t);return A.createDescriptorInlineChange(P);};
a.create_ovp_addNewCard=function(p,t){var P=_("appdescr_ovp_addNewCard",p,t);return A.create_ovp_addNewCard(P);};
a.create_ovp_removeCard=function(p){var P=_("appdescr_ovp_removeCard",p);return A.create_ovp_removeCard(P);};
a.create_ovp_changeCard=function(p,t){var P=_("appdescr_ovp_changeCard",p,t);return A.create_ovp_changeCard(P);};
a.create_app_addNewInbound=function(p,t){var P=_("appdescr_app_addNewInbound",p,t);return A.create_app_addNewInbound(P);};
a.create_app_removeInbound=function(p){var P=_("appdescr_app_removeInbound",p);return A.create_app_removeInbound(P);};
a.create_app_removeAllInboundsExceptOne=function(p){var P=_("appdescr_app_removeAllInboundsExceptOne",p);return A.create_app_removeAllInboundsExceptOne(P);};
a.create_app_changeInbound=function(p,t){var P=_("appdescr_app_changeInbound",p,t);return A.create_app_changeInbound(P);};
a.create_app_addNewOutbound=function(p){var P=_("appdescr_app_addNewOutbound",p);return A.create_app_addNewOutbound(P);};
a.create_app_removeOutbound=function(p){var P=_("appdescr_app_removeOutbound",p);return A.create_app_removeOutbound(P);};
a.create_app_changeOutbound=function(p){var P=_("appdescr_app_changeOutbound",p);return A.create_app_changeOutbound(P);};
a.create_app_addNewDataSource=function(p){var P=_("appdescr_app_addNewDataSource",p);return A.create_app_addNewDataSource(P);};
a.create_app_removeDataSource=function(p){var P=_("appdescr_app_removeDataSource",p);return A.create_app_removeDataSource(P);};
a.create_app_changeDataSource=function(p){var P=_("appdescr_app_changeDataSource",p);return A.create_app_changeDataSource(P);};
var T={BEGINNING:"BEGINNING",END:"END"};
a.create_app_addAnnotationsToOData=function(p){var P=_("appdescr_app_addAnnotationsToOData",p);return A.create_app_addAnnotationsToOData(P);};
a.create_app_setTitle=function(p,t){if(!t){t={"":p};p={};}var P=_("appdescr_app_setTitle",p,t);return A.create_app_setTitle(P);};
a.create_app_setSubTitle=function(p,t){if(!t){t={"":p};p={};}var P=_("appdescr_app_setSubTitle",p,t);return A.create_app_setSubTitle(P);};
a.create_app_setShortTitle=function(p,t){if(!t){t={"":p};p={};}var P=_("appdescr_app_setShortTitle",p,t);return A.create_app_setShortTitle(P);};
a.create_app_setDescription=function(p,t){if(!t){t={"":p};p={};}var P=_("appdescr_app_setDescription",p,t);return A.create_app_setDescription(P);};
a.create_app_setInfo=function(p,t){if(!t){t={"":p};p={};}var P=_("appdescr_app_setInfo",p,t);return A.create_app_setInfo(P);};
a.create_app_setAch=function(p){var P=_("appdescr_app_setAch",p);return A.create_app_setAch(P);};
a.create_app_setDestination=function(p){var P=_("appdescr_app_setDestination",p);return A.create_app_setDestination(P);};
a.create_app_setKeywords=function(p,t){var P=_("appdescr_app_setKeywords",p,t);return A.create_app_setKeywords(P);};
a.create_app_addTechnicalAttributes=function(p){var P=_("appdescr_app_addTechnicalAttributes",p);return A.create_app_addTechnicalAttributes(P);};
a.create_app_removeTechnicalAttributes=function(p){var P=_("appdescr_app_removeTechnicalAttributes",p);return A.create_app_removeTechnicalAttributes(P);};
a.create_app_addCdsViews=function(p){var P=_("appdescr_app_addCdsViews",p);return A.create_app_addCdsViews(P);};
a.create_app_removeCdsViews=function(p){var P=_("appdescr_app_removeCdsViews",p);return A.create_app_removeCdsViews(P);};
a.create_flp_setConfig=function(p){var P=_("appdescr_flp_setConfig",p);return A.create_flp_setConfig(P);};
a.create_ui5_addNewModel=function(p){var P=_("appdescr_ui5_addNewModel",p);return A.create_ui5_addNewModel(P);};
a.create_ui5_removeModel=function(p){var P=_("appdescr_ui5_removeModel",p);return A.create_ui5_removeModel(P);};
a.create_ui5_addNewModelEnhanceWith=function(p,t){var P=_("appdescr_ui5_addNewModelEnhanceWith",p,t);return A.create_ui5_addNewModelEnhanceWith(P);};
a.create_ui5_replaceComponentUsage=function(p){var P=_("appdescr_ui5_replaceComponentUsage",p);return A.create_ui5_replaceComponentUsage(P);};
a.create_ui5_addLibraries=function(p){var P=_("appdescr_ui5_addLibraries",p);return A.create_ui5_addLibraries(P);};
a.create_ui5_setMinUI5Version=function(p){var P=_("appdescr_ui5_setMinUI5Version",p);return A.create_ui5_setMinUI5Version(P);};
a.create_smb_addNamespace=function(p){var P=_("appdescr_smb_addNamespace",p);return A.create_smb_addNamespace(P);};
a.create_smb_changeNamespace=function(p){var P=_("appdescr_smb_changeNamespace",p);return A.create_smb_changeNamespace(P);};
a.create_ui_generic_app_setMainPage=function(p,t){var P=_("appdescr_ui_generic_app_setMainPage",p,t);return A.create_ui_generic_app_setMainPage(P);};
a.create_ui_setIcon=function(p){var P=_("appdescr_ui_setIcon",p);return A.create_ui_setIcon(P);};
a.create_ui_setDeviceTypes=function(p){var P=_("appdescr_ui_setDeviceTypes",p);return A.create_ui_setDeviceTypes(P);};
a.create_url_setUri=function(p){var P=_("appdescr_url_setUri",p);return A.create_url_setUri(P);};
a.create_fiori_setRegistrationIds=function(p){var P=_("appdescr_fiori_setRegistrationIds",p);return A.create_fiori_setRegistrationIds(P);};
a.create_ui5_setFlexExtensionPointEnabled=function(p){var P=_("appdescr_ui5_setFlexExtensionPointEnabled",p);return A.create_ui5_setFlexExtensionPointEnabled(P);};
return a;});
sap.ui.predefine('sap/ui/fl/descriptorRelated/api/DescriptorVariantFactory',["sap/ui/fl/write/_internal/appVariant/AppVariantFactory"],function(A){"use strict";var D={};
D.createNew=function(p){return D.createAppVariant(p);};
D.createAppVariant=function(p){return A.prepareCreate(p);};
D.createForExisting=function(i){return A.prepareUpdate({id:i});};
D.createDeletion=function(i){return A.prepareDelete({id:i});};
return D;});
sap.ui.predefine('sap/ui/fl/descriptorRelated/internal/Utils',[],function(){"use strict";var U=function(){};
U.prototype.getNameAndNameSpace=function(i,r){return{fileName:"manifest",namespace:"apps/"+r+"/appVariants/"+i+"/"};};
U.prototype.checkEntityPropertyChange=function(p){this.checkParameterAndType(p,"entityPropertyChange","object");if(p.entityPropertyChange instanceof Array){for(var i=0;i<p.entityPropertyChange.length;i++){var c=p.entityPropertyChange[i];this.checkEntityPropertyChangeContent(c);}}else if(p.entityPropertyChange instanceof Object){this.checkEntityPropertyChangeContent(p.entityPropertyChange);}};
U.prototype.checkEntityPropertyChangeContent=function(c){this.checkParameterAndType(c,"propertyPath","string");this.checkParameterAndType(c,"operation","string");if(['INSERT','UPDATE','UPSERT','DELETE'].indexOf(c.operation)===-1){throw new Error("Parameter \"entityPropertyChange.operation\" needs to be one of 'INSERT', 'UPDATE', 'UPSERT', 'DELETE'");}if(c.propertyValue===undefined&&c.operation!=='DELETE'){throw new Error("No parameter \"entityPropertyChange.propertyValue\" provided");}};
U.prototype.checkParameterAndType=function(p,P,t){if(t==="array"){if(p===undefined||p[P]===undefined||!Array.isArray(p[P])){throw new Error("No parameter \""+P+"\" of type "+t+" provided");}}else if(p===undefined||p[P]===undefined||typeof p[P]!==t){throw new Error("No parameter \""+P+"\" of type "+t+" provided");}};
U.prototype.checkTexts=function(t){if(t!==undefined&&typeof t!=="object"){throw new Error("Wrong format for provided \"texts\" parameter");}};
U.prototype.checkTransportRequest=function(t){if(!/^[A-Z0-9]{1,20}$/.test(t)&&t!=='ATO_NOTIFICATION'){throw new Error("Wrong format for provided \"sTransportRequest\" parameter");}};
U.prototype.checkPackage=function(p){if(!/^[A-Z0-9/_]{1,30}$/.test(p)&&p!=="$TMP"){throw new Error("Wrong format for provided \"sPackage\" parameter");}};
return new U();},true);
sap.ui.predefine('sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage',["sap/base/util/each","sap/base/Log","sap/ui/fl/registry/ChangeRegistryItem","sap/ui/fl/registry/Settings","sap/ui/fl/requireAsync"],function(e,L,C,S,r){"use strict";var a={};var R={};var A={};var p={};
function b(s,v){var o={};if(!v||!v.changeHandler){o.changeHandler=v;}else{o=v;}if(o.changeHandler==="default"){o.changeHandler=p.defaultChangeHandlers[s];}else if(Object.keys(p.developerChangeHandlers).includes(s)){throw Error("You can't use a custom change handler for the following Developer Mode change type: "+s+". Please use 'default' instead.");}return o;}
function c(D){A={};e(D,function(s,o){var h=new C({controlType:"defaultActiveForAll",changeHandler:o,layers:S.getDeveloperModeLayerPermissions(),changeType:s});A[s]=h;});}
function d(s,h,o){var l=Object.assign({},S.getDefaultLayerPermissions());if(o.layers){e(o.layers,function(i,j){if(l[i]===undefined){throw Error("The Layer '"+i+"' is not supported. Please only use supported layers");}l[i]=j;});}var P={controlType:s,changeHandler:o.changeHandler,layers:l,changeType:h};return new C(P);}
function f(s,h,o){var i=d(s,h,o);R[s]=R[s]||{};R[s][h]=i;}
function g(s,m){var P=Promise.resolve(m);var h="ChangeHandlerStorage.registerChangeHandlersForControl.skip_next_then";if(typeof m==="string"){P=r(m+".flexibility").catch(function(E){L.error("Flexibility change handler registration failed.\nControlType: "+s+"\n"+E.message);return Promise.resolve(h);});}return P.then(function(v){if(v!==h){e(v,function(i,j){var o=b(i,j);f(s,i,o);});}}).catch(function(E){L.error(E.message);});}
a.registerPredefinedChangeHandlers=function(D,m){p.defaultChangeHandlers=D;p.developerChangeHandlers=m;c(m);};
a.registerChangeHandlersForLibrary=function(m){var P=[];e(m,function(s,v){P.push(g(s,v));});return Promise.all(P);};
a.getRegistryItem=function(s,h){return R[s]&&R[s][h];};
a.getDeveloperModeChangeChangeRegistryItem=function(s){return A[s];};
a.isChangeHandlerRegistered=function(s,h){return Object.keys(R[s]||{}).includes(h);};
a.clearAll=function(){R={};A={};p={};};
a.registerChangeHandlersForControl=function(s,m){return g(s,m);};
return a;});
sap.ui.predefine('sap/ui/fl/library',["sap/ui/fl/RegistrationDelegator","sap/ui/fl/Utils","sap/ui/fl/Layer","sap/ui/core/library","sap/m/library"],function(R,U,L){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.fl",version:"1.90.1",controls:["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"],dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/fl/designtime/library.designtime",extensions:{flChangeHandlers:{"sap.ui.fl.util.IFrame":"sap/ui/fl/util/IFrame"},"sap.ui.support":{diagnosticPlugins:["sap/ui/fl/support/Flexibility"],publicRules:true}}});sap.ui.fl.Scenario={AppVariant:"APP_VARIANT",VersionedAppVariant:"VERSIONED_APP_VARIANT",AdaptationProject:"ADAPTATION_PROJECT",FioriElementsFromScratch:"FE_FROM_SCRATCH",UiAdaptation:"UI_ADAPTATION"};sap.ui.fl.Versions={Original:-1,Draft:0,UrlParameter:"sap-ui-fl-version"};sap.ui.fl.condenser={Classification:{LastOneWins:"lastOneWins",Reverse:"reverse",Move:"move",Create:"create",Destroy:"destroy"}};R.registerAll();
function _(){var u=U.getUshellContainer();if(u){return u.getLogonSystem().isTrial();}return false;}
if(_()){sap.ui.getCore().getConfiguration().setFlexibilityServices([{connector:"LrepConnector",url:"/sap/bc/lrep",layers:[]},{connector:"LocalStorageConnector",layers:[L.CUSTOMER,L.PUBLIC,L.USER]}]);}return sap.ui.fl;});
sap.ui.predefine('sap/ui/fl/registry/ChangeHandlerRegistration',["sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/changeHandler/AddXML","sap/ui/fl/changeHandler/AddXMLAtExtensionPoint","sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/MoveControls","sap/ui/fl/changeHandler/MoveElements","sap/ui/fl/changeHandler/PropertyBindingChange","sap/ui/fl/changeHandler/PropertyChange","sap/ui/fl/changeHandler/StashControl","sap/ui/fl/changeHandler/UnhideControl","sap/ui/fl/changeHandler/UnstashControl"],function(C,a,A,b,H,M,c,P,d,S,U,e){"use strict";var D={hideControl:H,moveElements:c,moveControls:M,stashControl:S,unhideControl:U,unstashControl:e};var m={addXML:A,addXMLAtExtensionPoint:b,propertyBindingChange:P,propertyChange:d};var f={getChangeHandlersOfLoadedLibsAndRegisterOnNewLoadedLibs:function(){var o=sap.ui.getCore();var g=o.getLoadedLibraries();var p=[];Object.values(g).forEach(function(l){if(l.extensions&&l.extensions.flChangeHandlers){p.push(this._registerFlexChangeHandlers(l.extensions.flChangeHandlers));}}.bind(this));o.attachLibraryChanged(this._handleLibraryRegistrationAfterFlexLibraryIsLoaded.bind(this));return Promise.all(p);},_registerFlexChangeHandlers:function(F){if(F){return C.registerChangeHandlersForLibrary(F);}return Promise.resolve();},_handleLibraryRegistrationAfterFlexLibraryIsLoaded:function(l){if(l.getParameter("operation")==="add"){var L=l.getParameter("metadata");var o=L.sName;if(L&&L.extensions&&L.extensions.flChangeHandlers){var F=L.extensions.flChangeHandlers;var r=this._registerFlexChangeHandlers(F);a.addRegistrationPromise(o,r);return r;}}return Promise.resolve();},registerPredefinedChangeHandlers:function(){a.getInstance().registerPredefinedChangeHandlers(D,m);C.registerPredefinedChangeHandlers(D,m);}};return f;});
sap.ui.predefine('sap/ui/fl/registry/ChangeRegistry',["sap/base/util/each","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/registry/ChangeRegistryItem","sap/ui/fl/registry/Settings","sap/ui/fl/Utils","sap/ui/fl/requireAsync","sap/base/Log"],function(e,C,a,S,U,r,L){"use strict";var b=function(){};b._instance=undefined;b.prototype._oDefaultChangeHandlers={};b.prototype._mDeveloperModeChangeHandlers={};var R={};
b.prototype.registerPredefinedChangeHandlers=function(d,D){this._oDefaultChangeHandlers=d;this._mDeveloperModeChangeHandlers=D;};
b.addRegistrationPromise=function(k,p){R[k]=p;p.catch(function(){}).then(function(){delete R[k];});};
b.waitForChangeHandlerRegistration=function(k){if(R[k]){return R[k].catch(function(){});}return new U.FakePromise();};
b.getInstance=function(){if(!b._instance){b._instance=new b();}return b._instance;};
b.prototype.registerControlsForChanges=function(c){var p=[];e(c,function(s,v){var m={};if(Array.isArray(v)){v.forEach(function(o){m[o.changeType]=o.changeHandler;});}else{m=v;}p.push(C.registerChangeHandlersForControl(s,m));});return Promise.all(p);};
b.prototype._getInstanceSpecificChangeRegistryItem=function(c,o,m){var s=m&&m.getChangeHandlerModulePath(o);if(typeof s!=="string"){return new U.FakePromise(undefined);}return r(s).then(function(d){var v=d[c];if(!v){return undefined;}var f=this._getChangeHandlerEntry(c,v);var g={changeType:c,changeHandler:f.changeHandler,layers:f.layers};var h=m.getControlType(o);var i=this._createChangeRegistryItemForSimpleChange(h,g);return i;}.bind(this)).catch(function(E){L.error("Flexibility registration for control "+m.getId(o)+" failed to load module "+s+"\n"+E.message);return undefined;});};
b.prototype._getChangeHandlerEntry=function(c,v){var o={};var d=Object.keys(this._mDeveloperModeChangeHandlers);if(!v||!v.changeHandler){o.changeHandler=v;}else{o=v;}if(o.changeHandler==="default"){o.changeHandler=this._oDefaultChangeHandlers[c];}else if(d.indexOf(c)>-1){throw Error("You can't use a custom change handler for the following Developer Mode change types: "+d.toString()+". Please use 'default' instead.");}return o;};
b.prototype.getChangeHandler=function(c,s,o,m,l){return this._getInstanceSpecificChangeRegistryItem(c,o,m).then(function(d){var f=d||this._getRegistryItem(s,c);if(!f){throw Error("No Change handler registered for the Control and Change type");}if(!this._isRegistryItemValidForLayer(f,l)){throw Error("Change type "+c+" not enabled for layer "+l);}return f.getChangeHandler();}.bind(this));};
b.prototype._createChangeRegistryItemForSimpleChange=function(c,s){var l=Object.assign({},S.getDefaultLayerPermissions());var o=s.layers;if(o){Object.keys(o).forEach(function(d){if(l[d]===undefined){throw Error("The Layer '"+d+"' is not supported. Please only use supported layers");}l[d]=o[d];});}return new a({controlType:c,changeHandler:s.changeHandler,layers:l,changeType:s.changeType});};
b.prototype._getRegistryItem=function(c,s){var o=C.getRegistryItem(c,s);if(o){return o;}var d=C.getDeveloperModeChangeChangeRegistryItem(s);if(d){return d;}};
b.prototype._isRegistryItemValidForLayer=function(o,l){var c=o.getLayers();return!!c[l];};
return b;});
sap.ui.predefine('sap/ui/fl/registry/ChangeRegistryItem',["sap/base/Log","sap/ui/fl/requireAsync","sap/ui/fl/Utils"],function(L,r,U){"use strict";var C=function(p){if(!p.changeHandler){L.error("sap.ui.fl.registry.ChangeRegistryItem: changeHandler required");}if(!p.changeType){L.error("sap.ui.fl.registry.ChangeRegistryItem: changeType required");}if(!p.layers){L.error("sap.ui.fl.registry.ChangeRegistryItem: layers required");}if(!p.controlType){L.error("sap.ui.fl.registry.ChangeRegistryItem: ControlType required");}this._controlType=p.controlType;this._changeType=p.changeType;this._changeHandler=p.changeHandler;this._layers=p.layers;};
C.prototype.getChangeTypeName=function(){return this._changeType;};
C.prototype.getControlType=function(){return this._controlType;};
C.prototype.getLayers=function(){return this._layers;};
C.prototype.getChangeHandler=function(){var p=new U.FakePromise();if(typeof this._changeHandler==="string"){p=r(this._changeHandler.replace(/\./g,"/")).then(function(c){this._changeHandler=c;}.bind(this));}return p.then(function(){if(!this._changeHandler||typeof this._changeHandler.completeChangeContent!=="function"||typeof this._changeHandler.applyChange!=="function"||typeof this._changeHandler.revertChange!=="function"){return Promise.reject(new Error("The ChangeHandler is either not available or does not have all required functions"));}return this._changeHandler;}.bind(this));};
return C;});
sap.ui.predefine('sap/ui/fl/registry/Settings',["sap/ui/fl/write/_internal/Storage","sap/base/Log"],function(S,L){"use strict";var a=function(s){if(!s){throw new Error("no flex settings provided");}if(s.isVariantSharingEnabled===undefined){s.isVariantSharingEnabled=true;}this._oSettings=s;};
a.attachEvent=function(e,c){a._oEventProvider.attachEvent(e,c);};
a.detachEvent=function(e,c){a._oEventProvider.detachEvent(e,c);};
a.getInstance=function(){if(a._instance){return Promise.resolve(a._instance);}if(a._oLoadSettingsPromise){return a._oLoadSettingsPromise;}return a._loadSettings();};
a._loadSettings=function(){var l=S.loadFeatures().then(function(s){if(!s){L.error("The request for flexibility settings failed; A default response is generated and returned to consuming APIs");s={isKeyUser:false,isVariantSharingEnabled:false,isVariantPersonalizationEnabled:true,isAtoAvailable:false,isAtoEnabled:false,isAppVariantSaveAsEnabled:false,isCondensingEnabled:false,isProductiveSystem:true,isPublicLayerAvailable:false,isVariantAdaptationEnabled:false,versioning:{},_bFlexChangeMode:false,_bFlexibilityAdaptationButtonAllowed:false};}return a._storeInstance(s);});a._oLoadSettingsPromise=l;return l;};
a._storeInstance=function(s){if(!a._instance){a._instance=new a(s);}return a._instance;};
a.getInstanceOrUndef=function(){return a._instance;};
a.getDefaultLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,PUBLIC:false,USER:false};};
a.getDeveloperModeLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:false,PUBLIC:false,USER:false};};
a.prototype._getBooleanProperty=function(p){return this._oSettings[p]||false;};
a.prototype.isKeyUser=function(){return this._getBooleanProperty("isKeyUser");};
a.prototype.isPublicLayerAvailable=function(){return this._getBooleanProperty("isPublicLayerAvailable");};
a.prototype.isVariantAdaptationEnabled=function(){return this._getBooleanProperty("isVariantAdaptationEnabled");};
a.prototype.isAppVariantSaveAsEnabled=function(){return this._getBooleanProperty("isAppVariantSaveAsEnabled");};
a.prototype.isVersioningEnabled=function(l){return!!(this._oSettings.versioning[l]||this._oSettings.versioning["ALL"]);};
a.prototype.isModelS=function(){return this._getBooleanProperty("isAtoAvailable");};
a.prototype.isAtoEnabled=function(){return this._getBooleanProperty("isAtoEnabled");};
a.prototype.isAtoAvailable=function(){return this._getBooleanProperty("isAtoAvailable");};
a.prototype.isProductiveSystem=function(){return this._getBooleanProperty("isProductiveSystem");};
a.prototype.isVariantSharingEnabled=function(){return this._getBooleanProperty("isVariantSharingEnabled");};
a.prototype.isVariantPersonalizationEnabled=function(){return this._getBooleanProperty("isVariantPersonalizationEnabled");};
a.prototype.isCondensingEnabled=function(){return this._getBooleanProperty("isCondensingEnabled");};
a.prototype.getSystem=function(){return this._oSettings.system;};
a.prototype.getClient=function(){return this._oSettings.client;};
return a;},true);
sap.ui.predefine('sap/ui/fl/registry/SimpleChanges',["sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/UnhideControl","sap/ui/fl/changeHandler/StashControl","sap/ui/fl/changeHandler/UnstashControl","sap/ui/fl/changeHandler/MoveElements","sap/ui/fl/changeHandler/MoveControls","sap/ui/fl/changeHandler/PropertyChange","sap/ui/fl/changeHandler/PropertyBindingChange"],function(H,U,S,a,M,b,P,c){"use strict";var d={hideControl:{changeType:"hideControl",changeHandler:H},unhideControl:{changeType:"unhideControl",changeHandler:U},stashControl:{changeType:"stashControl",changeHandler:S},unstashControl:{changeType:"unstashControl",changeHandler:a},moveElements:{changeType:"moveElements",changeHandler:M},moveControls:{changeType:"moveControls",changeHandler:b},propertyChange:{changeType:"propertyChange",changeHandler:P},propertyBindingChange:{changeType:"propertyBindingChange",changeHandler:c}};return d;},true);
sap.ui.predefine('sap/ui/fl/transport/TransportDialog',["sap/ui/fl/write/_internal/transport/TransportDialog"],function(I){"use strict";
var T=I.extend("sap.ui.fl.transport.TransportDialog");
return T;});
sap.ui.predefine('sap/ui/fl/transport/TransportSelection',["sap/ui/fl/write/_internal/transport/TransportSelection"],function(T){"use strict";return T;},true);
sap.ui.predefine('sap/ui/fl/util/DescriptorChangeCheck',["sap/base/util/includes","sap/ui/fl/Layer"],function(i,L){"use strict";
function c(e,s,S){if(Array.isArray(e)){e.forEach(function(d){f(d,s,S);});}else{f(e,s,S);}}
function f(C,s,S){if(!C.propertyPath){throw new Error("Invalid change format: The mandatory 'propertyPath' is not defined. Please define the mandatory property 'propertyPath'");}if(!C.operation){throw new Error("Invalid change format: The mandatory 'operation' is not defined. Please define the mandatory property 'operation'");}if(!C.propertyValue){throw new Error("Invalid change format: The mandatory 'propertyValue' is not defined. Please define the mandatory property 'propertyValue'");}if(!i(s,C.propertyPath)){throw new Error("Changing "+C.propertyPath+" is not supported. The supported 'propertyPath' is: "+s.join("|"));}if(!i(S,C.operation)){throw new Error("Operation "+C.operation+" is not supported. The supported 'operation' is "+S.join("|"));}}
function a(C,s,S){var d=Object.keys(C).filter(function(k){return k.endsWith("Id");}).shift();if(!C[d]){throw new Error("Mandatory \""+d+"\" parameter is not provided.");}if(!C.entityPropertyChange){throw new Error("Changes for \""+C[d]+"\" are not provided.");}c(C.entityPropertyChange,s,S);}
var l={};l[L.CUSTOMER]="customer.";l[L.CUSTOMER_BASE]="customer.";l[L.PARTNER]="partner.";l[L.VENDOR]=null;
function b(I,C){var s=C.getLayer();if(!s){throw new Error("Mandatory layer parameter is not provided.");}var p=g(s);if(p===null){Object.keys(l).forEach(function(k){if(l[k]&&I.startsWith(l[k])){throw new Error("Id "+I+" must not start with reserved "+l[k]);}});}else{if(!I.startsWith(p)){throw new Error("Id "+I+" must start with "+p);}}}
function g(s){var p=l[s];if(p===undefined){throw new Error("Layer "+s+" not supported.");}return p;}
return{checkEntityPropertyChange:a,checkIdNamespaceCompliance:b,getNamespacePrefixForLayer:g};});
sap.ui.predefine('sap/ui/fl/util/IFrame.flexibility',["sap/ui/fl/changeHandler/UpdateIFrame"],function(U){"use strict";return{updateIFrame:U,hideControl:"default"};});
sap.ui.predefine('sap/ui/fl/util/IFrame',["../library","sap/ui/core/Control","sap/ui/model/json/JSONModel","./getContainerUserInfo","sap/base/util/extend","sap/ui/core/library","./IFrameRenderer"],function(l,C,J,g,e){"use strict";
function u(v){if(v.parts&&v.formatter){return v.formatter.apply(null,v.parts.map(function(p){if(p.model){return"{"+p.model+">"+p.path+"}";}return"{"+p.path+"}";}));}return v;}
var I=C.extend("sap.ui.fl.util.IFrame",{
metadata:{library:"sap.ui.fl",properties:{url:{type:"sap.ui.core.URI",group:"Misc",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},title:{type:"string",group:"Misc",defaultValue:undefined},_settings:{type:"object",group:"Data",defaultValue:null}},designtime:"sap/ui/fl/designtime/util/IFrame.designtime"},
init:function(){if(C.prototype.init){C.prototype.init.apply(this,arguments);}this._oUserModel=new J(g());this.setModel(this._oUserModel,"$user");},
applySettings:function(s){C.prototype.applySettings.apply(this,arguments);if(s){var m=this.getProperty("_settings")||{};if(s._settings){e(m,s._settings);}else{Object.keys(s).filter(function(p){return!!s[p];}).forEach(function(p){m[p]=u(s[p]);});}this.setProperty("_settings",m);}},
exit:function(){if(this._oUserModel){this._oUserModel.destroy();delete this._oUserModel;}}
});
return I;});
sap.ui.predefine('sap/ui/fl/util/IFrameRenderer',[],function(){"use strict";
function _(r,d,v){if(v!==""||v.toLowerCase()==="auto"){r.style(d,v);}}
var I={apiVersion:2};
I.render=function(r,i){r.openStart("iframe",i);_(r,"width",i.getWidth());_(r,"height",i.getHeight());r.style("display","block");r.style("border","none");r.attr("sandbox","allow-forms allow-popups allow-scripts");r.attr("src",i.getUrl());var t=i.getTitle();if(t){r.attr("title",t);}r.openEnd();r.close("iframe");};
return I;},true);
sap.ui.predefine('sap/ui/fl/util/ManagedObjectModel',["sap/ui/core/Element","sap/ui/model/base/ManagedObjectModel"],function(E,M){"use strict";
function c(n){return n.charAt(0).toUpperCase()+n.slice(1);}
var a=E.extend("sap.ui.fl.util.ManagedObjectModel",{
metadata:{library:"sap.ui.fl",properties:{data:{type:"object"},name:{type:"string",defaultValue:"$sap.ui.fl.ManagedObjectModel"}},associations:{object:{type:"sap.ui.core.Element"}}},
constructor:function(){E.apply(this,arguments);this._oManagedObjectModel=new M(sap.ui.getCore().byId(this.getObject()),this.getData());["data","name","object"].forEach(function(n){this["set"+c(n)]=function(){throw new Error("sap.ui.fl.util.ManagedObjectModel: Can't change the value of `"+n+"` after the object is initialized. Please recreate the object with correct values in the constructor.");};},this);}
});
a.prototype.setParent=function(n){var o=this.getParent();if(o){o.setModel(null,this.getName());}if(n){n.setModel(this._oManagedObjectModel,this.getName());}E.prototype.setParent.apply(this,arguments);};
a.prototype.exit=function(){this._oManagedObjectModel.destroy();};
return a;});
sap.ui.predefine('sap/ui/fl/util/changePropertyValueByPath',["sap/base/util/ObjectPath"],function(O){"use strict";
function s(e,r){var p=e.propertyPath.split("/");var v=O.get(p,r);if(v&&e.operation==="INSERT"){throw new Error("Path has already a value. 'INSERT' operation is not appropriate.");}if(!v&&e.operation==="UPDATE"){throw new Error("Path does not contain a value. 'UPDATE' operation is not appropriate.");}O.set(p,e.propertyValue,r);}
return function(c,r){if(Array.isArray(c)){c.forEach(function(e){s(e,r);});}else{s(c,r);}};});
sap.ui.predefine('sap/ui/fl/util/getContainerUserInfo',["sap/ui/fl/Utils","sap/base/Log"],function(U,L){"use strict";
function e(v){if(!v){return"";}return v;}
return function(){return U.ifUShellContainerThen(function(s){var u=s[0];if(!u){return{};}var o=u.getUser();if(!o){return{};}try{var E=e(o.getEmail());var d;if(E){d=e(/@(.*)/.exec(E)[1]);}else{d="";}return{fullName:e(o.getFullName()),firstName:e(o.getFirstName()),lastName:e(o.getLastName()),email:E,domain:d};}catch(a){L.error("Unexpected exception when reading shell user info: "+a.toString());}},["UserInfo"])||{};};});
sap.ui.predefine('sap/ui/fl/variants/context/Component',["sap/ui/core/UIComponent"],function(U){"use strict";return U.extend("sap.ui.fl.variants.context.Component",{metadata:{manifest:"json"},getSelectedContexts:function(){var s=this.getModel("selectedContexts").getProperty("/selected");var S=s.map(function(r){return r.id;});return{role:S};},setSelectedContexts:function(s){var S=s.role.map(function(r){return{id:r,description:""};});var o=this.getModel("selectedContexts");o.setProperty("/selected",S);o.refresh(true);},hasErrorsAndShowErrorMessage:function(){var r=this.getRootControl();var R=r.byId("restrictedRadioButton");var s=this.getModel("selectedContexts").getProperty("/selected");var i=R.getSelected()&&s.length===0;r.getController().showErrorMessage(i);return i;}});});
sap.ui.predefine('sap/ui/fl/variants/context/controller/ContextVisibility.controller',["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/fl/write/_internal/Storage","sap/ui/fl/Layer","sap/m/MessageStrip","sap/ui/core/MessageType","sap/base/util/restricted/_isEqual"],function(C,F,W,L,M,a,_){"use strict";
function b(m){var d={layer:L.CUSTOMER,type:"role"};return Object.assign({},d,m);}
function c(s){var p={layer:L.CUSTOMER,flexObjects:s};return W.loadContextDescriptions(p).then(function(r){if(r.role&&r.role.length===s.role.length){this.oSelectedContextsModel.setProperty("/selected",r.role);}}.bind(this));}
function l(){return F.load({id:this.getView().getId(),name:"sap.ui.fl.variants.context.view.fragment.AddContextDialog",controller:this}).then(function(d){this.getView().addDependent(d);d._oList.attachUpdateStarted(this._updateStartedHandler.bind(this));d._oList.attachSelectionChange(this._onSelectionChange.bind(this));return d;}.bind(this));}
function g(m,p){return W.getContexts(b(m)).then(function(r){if(p){r.values=p.concat(r.values);}this.oContextsModel.setData(r);this.oContextsModel.refresh(true);}.bind(this));}
function i(I){return{id:I.getTitle(),description:I.getDescription()};}
return C.extend("sap.ui.fl.variants.context.controller.ContextVisibility",{onInit:function(){this.oSelectedContextsModel=this.getView().getModel("selectedContexts");this.oContextsModel=this.getView().getModel("contexts");this.oI18n=this.getView().getModel("i18n").getResourceBundle();},onBeforeRendering:function(){this.oSelectedContextsModel.refresh(true);var s=this.getOwnerComponent().getSelectedContexts();var h=s.role.length>0;this.byId("selectedContextsList").setVisible(h);if(h){return c.call(this,s);}return Promise.resolve();},_onSelectionChange:function(e){var s=i(e.getParameter("listItem"));if(e.getParameter("selected")===true){this.oCurrentSelection.push(s);}else{this.oCurrentSelection=this.oCurrentSelection.filter(function(I){return!_(I,s);});}},isSelected:function(I,s){return s.some(function(S){return S.id===I.id;});},formatSelectedIndex:function(s){return s.length===0?0:1;},formatTooltip:function(d){if(!this.oI18n){this.oI18n=this.getView().getModel("i18n").getResourceBundle();}return d.length===0?this.oI18n.getText("NO_DESCRIPTION"):d;},onSelectRestrictedRadioButton:function(e){e.getSource().setSelected(true);var f=e.getParameters()&&e.getParameters().selected;this.byId("selectedContextsList").setVisible(f);},onSelectPublicRadioButton:function(){this.oSelectedContextsModel.setProperty("/selected",[]);this.showErrorMessage(false);},_appendDataFromBackend:function(){var r=this.oContextsModel.getProperty("/values");if(this.oContextsModel.getProperty("/lastHitReached")===false){var m={$skip:r.length};return g.call(this,m,r);}return Promise.resolve(r);},_updateStartedHandler:function(e){if(e.getParameter&&e.getParameter("reason")==="Growing"){return this._appendDataFromBackend();}return Promise.resolve();},_addContexts:function(d){d.clearSelection();this.oCurrentSelection=this.oSelectedContextsModel.getProperty("/selected")||[];return g.call(this,{}).then(function(){return d.open();});},onAddContextsHandler:function(){if(!this._oDialog){this._oDialog=l.call(this);}return this._oDialog.then(function(d){return this._addContexts(d);}.bind(this));},onSearch:function(e){e.getSource().clearSelection();var m={$filter:e.getParameter("value")};return g.call(this,m);},onSelectContexts:function(){this.oSelectedContextsModel.setProperty("/selected",this.oCurrentSelection);this.oCurrentSelection=[];this.showErrorMessage(false);},onDeleteContext:function(e){var I=this.oSelectedContextsModel.getProperty("/selected");var t=e.getParameter("listItem");var n=I.filter(function(d){return d.id!==t.getTitle();});this.oSelectedContextsModel.setProperty("/selected",n);var o=e.getSource();o.attachEventOnce("updateFinished",o.focus,o);},removeAll:function(){this.oSelectedContextsModel.setProperty("/selected",[]);},showErrorMessage:function(s){var e=this.getView().getId()+"--noSelectedRolesError";var E=sap.ui.getCore().byId(e);if(E){E.destroy();}if(s){E=new M(e,{text:this.oI18n.getText("SELECTED_ROLES_ERROR"),type:a.Error,showIcon:true});this.byId("visibilityPanel").insertContent(E,1);}},isRemoveAllEnabled:function(s){return s.length!==0;}});});
sap.ui.predefine('sap/ui/fl/write/_internal/appVariant/AppVariantFactory',["sap/ui/fl/write/_internal/appVariant/AppVariant","sap/ui/thirdparty/jquery","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge"],function(A,q,U,L,m){"use strict";
function _(p){if(!p.url){p.url="/sap/bc/lrep";}return L.appVariant.load(p);}
var a={};
a.load=function(p){if(p.id===undefined||typeof p.id!=="string"){throw new Error("Parameter "+p.id+" must be provided of type string");}return _({reference:p.id}).then(function(r){var o=r.response;if(!q.isPlainObject(o)){o=JSON.parse(o);}p=m({},p,o);return new A(p);});};
a.prepareCreate=function(p){try{U.checkParameterAndType(p,"reference","string");U.checkParameterAndType(p,"id","string");if(p.version){U.checkParameterAndType(p,"version","string");}if(!p.layer){p.layer='CUSTOMER';}else{U.checkParameterAndType(p,"layer","string");}if(p.skipIam){U.checkParameterAndType(p,"skipIam","boolean");}if(p.transport){U.checkTransportRequest(p.transport);}if(p.package){U.checkPackage(p.package);}}catch(e){return Promise.reject(e);}p.content=[];var o=new A(p);o.setMode("NEW");return Promise.resolve(o);};
a.prepareUpdate=function(p){return a.load(p).then(function(o){o.setMode("EXISTING");return o;});};
a.prepareDelete=function(p){return((p.isForSmartBusiness)?Promise.resolve(new A(p)):a.load(p)).then(function(o){o.setMode("DELETION");return o;});};
return a;});
sap.ui.predefine('sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory',["sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange"],function(U,A){"use strict";
function _(p){if(!p.texts){p.texts={"":p.content};p.content={};}}
function a(p){var o=new A(p);return Promise.resolve(o);}
var b={};
b.createNew=function(p){var o=new A(p);return Promise.resolve(o);};
b.createDescriptorInlineChange=function(p){var t=p.changeType.replace("appdescr","create");return this[t](p);};
b.create_ovp_addNewCard=function(p){U.checkParameterAndType(p.content,"card","object");return a(p);};
b.create_ovp_removeCard=function(p){U.checkParameterAndType(p.content,"cardId","string");return a(p);};
b.create_ovp_changeCard=function(p){U.checkParameterAndType(p.content,"cardId","string");U.checkEntityPropertyChange(p.content);return a(p);};
b.create_app_addNewInbound=function(p){U.checkParameterAndType(p.content,"inbound","object");return a(p);};
b.create_app_removeInbound=function(p){U.checkParameterAndType(p.content,"inboundId","string");return a(p);};
b.create_app_removeAllInboundsExceptOne=function(p){U.checkParameterAndType(p.content,"inboundId","string");return a(p);};
b.create_app_changeInbound=function(p){U.checkParameterAndType(p.content,"inboundId","string");U.checkEntityPropertyChange(p.content);return a(p);};
b.create_app_addNewOutbound=function(p){U.checkParameterAndType(p.content,"outbound","object");return a(p);};
b.create_app_removeOutbound=function(p){U.checkParameterAndType(p.content,"outboundId","string");return a(p);};
b.create_app_changeOutbound=function(p){U.checkParameterAndType(p.content,"outboundId","string");U.checkEntityPropertyChange(p.content);return a(p);};
b.create_app_addNewDataSource=function(p){U.checkParameterAndType(p.content,"dataSource","object");return a(p);};
b.create_app_removeDataSource=function(p){U.checkParameterAndType(p.content,"dataSourceId","string");return a(p);};
b.create_app_changeDataSource=function(p){U.checkParameterAndType(p.content,"dataSourceId","string");U.checkEntityPropertyChange(p.content);return a(p);};
var T={BEGINNING:"BEGINNING",END:"END"};
b.create_app_addAnnotationsToOData=function(p){U.checkParameterAndType(p.content,"dataSourceId","string");U.checkParameterAndType(p.content,"annotations","array");U.checkParameterAndType(p.content,"dataSource","object");return a(p);};
b.create_app_setTitle=function(p){_(p);return a(p).then(function(d){d.setHostingIdSuffix("_sap.app.title");return d;});};
b.create_app_setSubTitle=function(p){_(p);return a(p).then(function(d){d.setHostingIdSuffix("_sap.app.subTitle");return d;});};
b.create_app_setShortTitle=function(p){_(p);return a(p).then(function(d){d.setHostingIdSuffix("_sap.app.shortTitle");return d;});};
b.create_app_setDescription=function(p){_(p);return a(p).then(function(d){d.setHostingIdSuffix("_sap.app.description");return d;});};
b.create_app_setInfo=function(p){_(p);return a(p).then(function(d){d.setHostingIdSuffix("_sap.app.info");return d;});};
b.create_app_setAch=function(p){U.checkParameterAndType(p.content,"ach","string");return a(p);};
b.create_app_setDestination=function(p){U.checkParameterAndType(p.content,"destination","object");return a(p);};
b.create_app_setKeywords=function(p){U.checkParameterAndType(p.content,"keywords","array");return a(p);};
b.create_app_addTechnicalAttributes=function(p){U.checkParameterAndType(p.content,"technicalAttributes","array");return a(p);};
b.create_app_removeTechnicalAttributes=function(p){U.checkParameterAndType(p.content,"technicalAttributes","array");return a(p);};
b.create_app_addCdsViews=function(p){U.checkParameterAndType(p.content,"cdsViews","array");return a(p);};
b.create_app_removeCdsViews=function(p){U.checkParameterAndType(p.content,"cdsViews","array");return a(p);};
b.create_flp_setConfig=function(p){U.checkParameterAndType(p.content,"config","object");return a(p);};
b.create_ui5_addNewModel=function(p){U.checkParameterAndType(p.content,"model","object");return a(p);};
b.create_ui5_removeModel=function(p){U.checkParameterAndType(p.content,"modelId","string");return a(p);};
b.create_ui5_addNewModelEnhanceWith=function(p){U.checkParameterAndType(p.content,"modelId","string");return a(p);};
b.create_ui5_replaceComponentUsage=function(p){U.checkParameterAndType(p.content,"componentUsageId","string");U.checkParameterAndType(p.content,"componentUsage","object");return a(p);};
b.create_ui5_addLibraries=function(p){U.checkParameterAndType(p.content,"libraries","object");return a(p);};
b.create_ui5_addComponentUsages=function(p){U.checkParameterAndType(p.content,"componentUsages","object");return a(p);};
b.create_ui5_setMinUI5Version=function(p){U.checkParameterAndType(p.content,"minUI5Version","string");return a(p);};
b.create_smb_addNamespace=function(p){U.checkParameterAndType(p.content,"smartBusinessApp","object");return a(p);};
b.create_smb_changeNamespace=function(p){U.checkParameterAndType(p.content,"smartBusinessApp","object");return a(p);};
b.create_ui_generic_app_setMainPage=function(p){U.checkParameterAndType(p.content,"page","object");return a(p);};
b.create_ui_setIcon=function(p){U.checkParameterAndType(p.content,"icon","string");return a(p);};
b.create_ui_setDeviceTypes=function(p){U.checkParameterAndType(p.content,"deviceTypes","object");return a(p);};
b.create_url_setUri=function(p){U.checkParameterAndType(p.content,"uri","string");return a(p);};
b.create_fiori_setRegistrationIds=function(p){U.checkParameterAndType(p.content,"registrationIds","array");return a(p);};
b.create_ui5_setFlexExtensionPointEnabled=function(p){U.checkParameterAndType(p.content,"flexExtensionPointEnabled","boolean");U.checkParameterAndType(p,"changeType","string");return a(p);};
return b;});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/Condenser',["sap/base/util/each","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/write/_internal/condenser/classifications/LastOneWins","sap/ui/fl/write/_internal/condenser/classifications/Reverse","sap/ui/fl/write/_internal/condenser/UIReconstruction","sap/ui/fl/write/_internal/condenser/Utils","sap/ui/fl/Change","sap/ui/fl/Utils","sap/ui/performance/Measurement"],function(e,i,c,J,C,d,L,R,U,f,g,F,M){"use strict";var h={};var j="unclassified";var N={lastOneWins:L,reverse:R};
function k(S,a){return a.classification===sap.ui.fl.condenser.Classification.Create&&S[sap.ui.fl.condenser.Classification.Move];}
function l(S,a){return a.classification===sap.ui.fl.condenser.Classification.Move&&S[sap.ui.fl.condenser.Classification.Destroy];}
function m(a,b){return b.classification===sap.ui.fl.condenser.Classification.Create&&a[sap.ui.fl.condenser.Classification.Destroy];}
function n(a,b,D,E){if(!l(a,D)&&!m(a,D)){var G=D.classification;if(!a[G]){D.change=E;E.condenserState="select";a[G]=[D];}else{E.condenserState="delete";}a[G][0].updateChange=E;}if(k(a,D)||m(a,D)){if(a[sap.ui.fl.condenser.Classification.Move]){a[sap.ui.fl.condenser.Classification.Move].forEach(function(D){D.change.condenserState="delete";});delete a[sap.ui.fl.condenser.Classification.Move];}if(a[sap.ui.fl.condenser.Classification.Destroy]){a[sap.ui.fl.condenser.Classification.Destroy].forEach(function(D){D.change.condenserState="delete";});delete a[sap.ui.fl.condenser.Classification.Destroy];}}U.addChange(b,D);}
function o(T,a,I,b,D){if(!T[b.type]){T[b.type]={};}var E=T[b.type];if(b.type===f.NOT_INDEX_RELEVANT){if(!E[b.classification]){E[b.classification]={};}var P=E[b.classification];N[b.classification].addToChangesMap(P,b.uniqueKey,D);}else{I.push(D);n(E,a,b,D);}}
function p(T,K,a){if(!T[K]){T[K]=[];}T[K].push(a);a.condenserState="select";}
function q(a,b){var D=J.getControlIdBySelector(b.getSelector(),a);var E=C.byId(D);if(E){var P={modifier:J,appComponent:a,view:F.getViewForControl(E)};var G=d.getControlIfTemplateAffected(b,E,P);return Promise.resolve(d.getChangeHandler(b,G,P)).then(function(H){if(H&&typeof H.getCondenserInfo==="function"){return H.getCondenserInfo(b,P);}});}return Promise.resolve();}
function r(a,b,D,E){var G=b!==undefined?b.affectedControl:J.getControlIdBySelector(D.getSelector(),E);if(!a[G]){a[G]={};}return a[G];}
function s(a,b,D,I,E){return E.reduce(function(P,G){return P.then(t.bind(this,a,b,D,I,G));}.bind(this),Promise.resolve());}
function t(a,b,D,I,E){return q(a,E).then(function(G){v(G,a);var T=r(b,G,E,a);if(G!==undefined){u(G);o(T,D,I,G,E);}else{p(T,j,E);b[j]=true;}});}
function u(a){if(N[a.classification]){a.type=f.NOT_INDEX_RELEVANT;}else{a.type=f.INDEX_RELEVANT;}}
function v(a,b){["affectedControl","sourceContainer","targetContainer"].forEach(function(P){if(a&&a[P]){a[P]=J.getControlIdBySelector(a[P],b);}});}
function w(O,a){e(O,function(K,S){if(N[K]&&N[K].getChangesFromMap){N[K].getChangesFromMap(O,K).forEach(function(b){a.push(b);});}else if(i(S)){return w(S,a);}else if(Array.isArray(S)){S.forEach(function(b){if(b instanceof g){a.push(b);}else{a.push(b.change);}});}});return a;}
function x(a){return w(a,[]);}
function y(a,b){e(a,function(K,S){if(i(S)){y(S,b);}else if(Array.isArray(S)){S.forEach(function(O){if(!(O instanceof g)){b.push(O);}});}});return b;}
function z(D,E){E.sort(function(a,b){return D.indexOf(a)-D.indexOf(b);});}
function A(a,I){var b=a.map(function(D){return D.getId();});I.forEach(function(D){if(b.indexOf(D.getId())===-1){a.push(D);}});}
function B(a,b){a.forEach(function(D){var E=D.updateChange;if(E&&E.getState()!==g.states.NEW){var G=D.change;if(E.getFileName()!==G.getFileName()){var H=G.getContent();E.setContent(H);G.condenserState="delete";b=b.map(function(I){if(I.getFileName()===G.getFileName()){return E;}return I;});}else{E.setState(g.states.DIRTY);}E.condenserState="update";}});return b;}
h.condense=function(a,b){M.start("Condenser_overall","Condenser overall - CondenserClass",["sap.ui.fl","Condenser"]);var D={};var E={};var G=[];var H=[];var I=[];b.slice(0).reverse().forEach(function(K){if(K instanceof g&&K.isApplyProcessFinished()){I.push(K);}else{H.push(K);}});M.start("Condenser_defineMaps","defining of maps - CondenserClass",["sap.ui.fl","Condenser"]);return s(a,D,E,G,I).then(function(){M.end("Condenser_defineMaps");var K=D[j];if(!K){U.compareAndUpdate(D,E);}var O=x(D);if(K){G.forEach(function(S){S.condenserState="select";});A(O,G);}O=O.concat(H);z(b,O);if(!K){M.start("Condenser_handleIndexRelatedChanges","handle index related changes - CondenserClass",["sap.ui.fl","Condenser"]);var P=y(D,[]);M.start("Condenser_sort","sort index related changes - CondenserClass",["sap.ui.fl","Condenser"]);var Q=U.sortIndexRelatedChanges(E,P);M.end("Condenser_sort");U.swapChanges(Q,O);O=B(P,O);M.end("Condenser_handleIndexRelatedChanges");}M.end("Condenser_overall");return O;});};
return h;});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/UIReconstruction',["sap/base/util/restricted/_isEqual","sap/base/util/each","sap/ui/fl/write/_internal/condenser/classifications/Create","sap/ui/fl/write/_internal/condenser/classifications/Destroy","sap/ui/fl/write/_internal/condenser/classifications/Move","sap/ui/fl/write/_internal/condenser/Utils"],function(_,e,C,D,M,U){"use strict";var d={};var I={create:C,destroy:D,move:M};
function f(a,c){e(a,function(O,b){e(b,function(r,t){c(b,O,t,r);});});}
function s(E,O,N){E.splice(N,0,E.splice(O,1)[0]);}
function g(a,c){var b={};f(a,function(r,t,v,A){var T=v[U.TARGET_UI];T.forEach(function(w){c.forEach(function(x){if(w===x.affectedControl){if(!b[t]){b[t]={};}var y=b[t];if(!y[A]){y[A]=[];}var z=y[A];z.push(x);}});});});return b;}
function h(c){return!c.some(function(E){return E.classification!==sap.ui.fl.condenser.Classification.Create;});}
function i(E){return!E.some(function(v){return U.isUnknown(v);});}
function j(c){return c.getTargetIndex(c.change);}
function k(c){c.sort(function(a,b){var r=j(a);var N=j(b);return r-N;});}
function l(E){return!E.some(function(v){return!U.isUnknown(v);});}
function m(a,c){var b=c.targetContainer;var A=c.affectedControl;var t=c.getTargetIndex(c.change);var r=a[b][c.targetAggregation];U.extendArrayWithPlaceholders(r,undefined,t);var S=r.indexOf(A);s(r,S,t);}
function n(a,b){var c;if(a.length<b.length){c=b.slice(a.length);if(!l(c)){return false;}b=b.slice(0,a.length);}else if(a.length>b.length){c=a.slice(b.length,a.length);if(!l(c)){return false;}a=a.slice(0,b.length);}return _(a,b);}
function o(c,a,b,t,r){var v={};r.forEach(function(w){var c=w.targetContainer;if(!v[c]){v[c]={};}var x=v[c];if(!x[a]){x[a]=U.initializeArrayWithPlaceholders(0,b.length-1);}I[w.classification].simulate(x[a],w,b);});r.forEach(function(w){if(w.classification===sap.ui.fl.condenser.Classification.Move){m(v,w);}});var S=v[c][a];if(n(t,S)){return true;}return false;}
function u(r,a){f(a,function(b,c,t){t[U.TARGET_UI].forEach(function(T,v){if(!U.isUnknown(T)){var w=r[T];var S=w[U.INDEX_RELEVANT];e(S,function(x,y){if(x!==sap.ui.fl.condenser.Classification.Destroy){y.forEach(function(z){z.setTargetIndex(z.change,v);z.change.condenserState="select";});}});}});});}
function p(r,a){f(a,function(b,c,t,K){var v=t[U.INITIAL_UI];var T=t[U.TARGET_UI];if(n(v,T)){T.forEach(function(w){var x=r[w];if(x!==undefined){e(x[U.INDEX_RELEVANT],function(y,z){z.forEach(function(A){A.change.condenserState="delete";});});delete x[U.INDEX_RELEVANT];}});delete b[K];}});}
function q(r,a){f(a,function(b,c,t){var v=t[U.INITIAL_UI];var T=t[U.TARGET_UI];v.forEach(function(w,x){var y=r[w];if(!y||!y[U.INDEX_RELEVANT]){var P=U.PLACEHOLDER+x;var z=T.indexOf(w);if(z>=0){T[z]=P;}}});});}
d.swapChanges=function(S,a){var b=S.map(function(c){return a.indexOf(c);}).sort();S.forEach(function(c){a[b.shift()]=c;});};
d.sortIndexRelatedChanges=function(a,c){var S=[];var b=g(a,c);f(b,function(A,r,c,t){var T=a[r][t][U.TARGET_UI];var v=a[r][t][U.INITIAL_UI];if(i(T)||h(c)){k(c);}else if(!o(r,t,v,T,c)){var w=false;var x=c.length;while(x!==0&&!w){var O=0;var N=1;while(N<c.length&&!w){s(c,O,N);w=o(r,t,v,T,c);O++;N++;}x--;}}c.forEach(function(y){S=S.concat(y.change);});});return S;};
d.addChange=function(a,c){I[c.classification].addToReconstructionMap(a,c);};
d.compareAndUpdate=function(r,a){p(r,a);q(r,a);u(r,a);};
return d;});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/Utils',["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core"],function(J,C){"use strict";var U={};U.TARGET_UI="targetUI";U.INITIAL_UI="initialUI";U.PLACEHOLDER="X";U.INDEX_RELEVANT="indexRelevant";U.NOT_INDEX_RELEVANT="notIndexRelevant";
function g(s,t){return(Math.max(s,t)||0)+1;}
U.getInitialUIContainerElementIds=function(u,c,a,b){if(!u[c]){u[c]={};}var m=u[c];if(!m[a]){m[a]={};}var d=m[a];if(!d[U.TARGET_UI]){d[U.TARGET_UI]=b;}if(!d[U.INITIAL_UI]){d[U.INITIAL_UI]=b.slice(0);}return d[U.INITIAL_UI];};
U.getContainerElementIds=function(c,a){var o=C.byId(c);var b=J.getAggregation(o,a);return b.map(function(e){return e.getId();});};
U.initializeArrayWithPlaceholders=function(t,s){var l=g(s,t);return Array(l).fill(U.PLACEHOLDER).map(function(p,i){return p+i;});};
U.extendArrayWithPlaceholders=function(e,s,t){var l=g(s,t);if(e.length<l){var u;for(var i=e.length;i<=l;i++){u=U.PLACEHOLDER+(e.length);e.splice(e.length,0,u);}}};
U.extendElementsArray=function(e,s,t,a){U.extendArrayWithPlaceholders(e,s,t);var c=e.indexOf(a);var u=e.indexOf(U.PLACEHOLDER+s);if(c!==s&&s!==undefined){if(c>=0){U.shiftElement(e,c,s);}else if(u>-1){e[u]=a;}else if(U.isUnknown(e[s])){e[s]=a;}}};
U.shiftElement=function(e,o,n){e.splice(n,0,e.splice(o,1)[0]);};
U.isUnknown=function(v){if(v!==undefined&&v.indexOf(U.PLACEHOLDER)===0){var r=v.slice(1,v.length);var p=parseInt(r);if(isNaN(p)){return false;}return true;}return false;};
return U;});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/classifications/Create',["sap/ui/core/Core","sap/ui/fl/write/_internal/condenser/Utils"],function(C,a){"use strict";return{addToReconstructionMap:function(u,c){var A=C.byId(c.affectedControl);var s=A&&A.sParentAggregationName||c.targetAggregation;var t=a.getContainerElementIds(c.targetContainer,s);var b=a.getInitialUIContainerElementIds(u,c.targetContainer,c.targetAggregation,t);var i=b.indexOf(c.affectedControl);if(i>-1){b.splice(i,1);}},simulate:function(c,o){c.splice(o.getTargetIndex(o.change),0,o.affectedControl);}};});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/classifications/Destroy',["sap/ui/fl/write/_internal/condenser/Utils"],function(C){"use strict";return{addToReconstructionMap:function(u,c){var t=C.getContainerElementIds(c.targetContainer,c.targetAggregation);var a=C.getInitialUIContainerElementIds(u,c.targetContainer,c.targetAggregation,t);if(a.length-1<c.sourceIndex){while(a.length-1<c.sourceIndex){var i=a.length;a.splice(a.length,0,C.PLACEHOLDER+i);}a[c.sourceIndex]=c.affectedControl;}else{a.splice(c.sourceIndex,0,c.affectedControl);}},simulate:function(c,o,i){var I=c.indexOf(o.affectedControl);if(I===-1){var u=C.PLACEHOLDER+i.indexOf(o.affectedControl);I=c.indexOf(u);}if(I>-1){c.splice(I,1);}}};});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/classifications/LastOneWins',[],function(){"use strict";return{addToChangesMap:function(p,u,c){if(!p[u]){p[u]=[c];c.condenserState="select";}else{c.condenserState="delete";}}};});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/classifications/Move',["sap/ui/fl/write/_internal/condenser/Utils"],function(C){"use strict";return{addToReconstructionMap:function(u,c){var s=C.getContainerElementIds(c.sourceContainer,c.sourceAggregation);var t=C.getContainerElementIds(c.targetContainer,c.targetAggregation);var a;var T;if(c.targetContainer===c.sourceContainer&&c.targetAggregation===c.sourceAggregation){a=C.getInitialUIContainerElementIds(u,c.targetContainer,c.targetAggregation,t);T=a.indexOf(c.affectedControl);C.shiftElement(a,T,c.sourceIndex);}else{a=C.getInitialUIContainerElementIds(u,c.targetContainer,c.targetAggregation,t);T=a.indexOf(c.affectedControl);a.splice(T,1);a=C.getInitialUIContainerElementIds(u,c.sourceContainer,c.sourceAggregation,s);a.splice(c.sourceIndex,0,c.affectedControl);}},simulate:function(c,o,i){var a=o.affectedControl;var s=i.indexOf(a);C.extendElementsArray(c,s,undefined,a);}};});
sap.ui.predefine('sap/ui/fl/write/_internal/condenser/classifications/Reverse',["sap/base/util/each"],function(e){"use strict";return{addToChangesMap:function(p,u,c){if(!p[u]){p[u]=[];}p[u].push(c);},getChangesFromMap:function(o,u){var c=[];e(o[u],function(k,r){r.reverse();var C;r.forEach(function(a,i){if(C&&C.getChangeType()!==a.getChangeType()){C=null;r[i].condenserState="delete";r[i-1].condenserState="delete";}else{C=a;if(i>0){r[i-1].condenserState="delete";}r[i].condenserState="select";}});if(C){c.push(C);}});return c;}};});
sap.ui.predefine('sap/ui/fl/write/_internal/extensionPoint/Processor',["sap/ui/fl/apply/_internal/extensionPoint/Processor","sap/base/util/merge"],function(A,m){"use strict";
function a(e,s){var E=m({defaultContent:[]},e);return A.registerExtensionPoint(E).then(A.createDefaultContent.bind(this,e,s,a,[])).then(A.addDefaultContentToExtensionPointInfo.bind(this,E,s));}
var P={applyExtensionPoint:function(e){return a(e,false);}};return P;});
sap.ui.predefine('sap/ui/fl/write/_internal/extensionPoint/Registry',["sap/ui/base/ManagedObjectObserver","sap/ui/core/util/reflection/JsControlTreeModifier"],function(M,J){"use strict";var E={};var o={};var e={};var m={};
function a(f){var p=f.object.getId();e[p].forEach(function(g){m[g.view.getId()][g.name].bParentIsDestroyed=true;});}
function b(f){var p=f.object.getId();e[p].forEach(function(g){var A=g.aggregationName;if(A===f.name){var C=J.getAggregation(f.object,A);var h=[].concat(C||[]).map(function(i){return i.getId();});if(f.mutation==="insert"){if(h.indexOf(f.child.getId())<g.index){g.index++;}}else if(g.aggregation.indexOf(f.child.getId())<g.index){g.index--;}g.aggregation=h;}});}
function c(f){if(f.type==="destroy"){a(f);}else{b(f);}}
function s(p,A){var P=p.getId();if(!o[P]){var O=new M(c.bind(this));O.observe(p,{aggregations:[A],destroy:true});o[P]={observer:O,aggregations:[A]};}else{var i=o[P].observer.isObserved(p,{aggregations:[A]});if(!i){o[P].aggregations.push(A);o[P].observer.observe(p,{aggregations:o[P].aggregations,destroy:true});}}}
function d(p,A,f){var v=f.view.getId();var g=J.getAggregation(p,A);var C=[].concat(g||[]).map(function(h){return h.getId();});var P=p.getId();if(!e[P]){e[P]=[];}if(!m[v]){m[v]={};}f.aggregation=C;e[P].push(f);m[v][f.name]=f;}
E.registerExtensionPoint=function(f){var p=f.targetControl;var A=f.aggregationName;s(p,A);d(p,A,f);};
E.getExtensionPointInfo=function(f,v){return m[v.getId()]&&m[v.getId()][f];};
E.getExtensionPointInfoByViewId=function(v){return m[v]||{};};
E.getExtensionPointInfoByParentId=function(p){return e[p]||[];};
E.clear=function(){Object.keys(o).forEach(function(p){o[p].observer.disconnect();o[p].observer.destroy();});o={};e={};m={};};
return E;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess',["sap/ui/fl/registry/Settings","sap/ui/fl/Utils","sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory","sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation"],function(S,U,A,a){"use strict";var _=null;var b=null;
function g(){if(!b){return A.getInstance(_).then(function(e){b=e;return e;});}return Promise.resolve(b);}
var c={};
c.getTexts=function(){return g(_).then(function(e){return e.getTexts().then(function(t){return t;});});};
c.isExtensibilityEnabled=function(C){var s=U.getComponentClassName(C);if(!s){return Promise.resolve(false);}return S.getInstance(s).then(function(o){return o.isModelS();});};
c.getExtensionData=function(){return g(_).then(function(e){return e.getExtensionData().then(function(E){return E;});});};
c.onControlSelected=function(C){if(C!==_){_=C;b=null;}};
c.onTriggerCreateExtensionData=function(){return g().then(function(e){return e.getNavigationUri().then(function(n){if(n){c.openNewWindow(n);}});});};
c.openNewWindow=function(u){window.open(u,"_blank","noopener noreferrer");};
c.isServiceOutdated=function(s){return a.isServiceOutdated(s);};
c.setServiceValid=function(s){a.setServiceValid(s);};
c.setServiceInvalid=function(s){a.setServiceInvalid(s);};
return c;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation',["sap/ui/fl/Utils","sap/ui/util/Storage","sap/ui/fl/write/_internal/fieldExtensibility/UriParser"],function(U,S,a){"use strict";var b={};var _="sap.ui.fl.fieldExt.Access";var c=1*7*24*60*60*1000;
function d(){return Date.now();}
function e(){return b.getLocalStorage();}
function f(){return e()&&e().isSupported();}
function g(){if(!f()){return{};}var s=e().get(_);if(!s){return{};}return JSON.parse(s);}
function h(s){return s.expirationDate<=d();}
function i(s){return g()[s.serviceKey]||null;}
function j(s){var E=d()+c;var o=m();var p=k(s);return{serviceKey:o.getName()+o.getClient()+p.serviceName+p.serviceVersion,expirationDate:E};}
function k(s){if(typeof s==="string"){return a.parseServiceUri(s);}return s;}
function l(){return m();}
function m(){var u=U.getUshellContainer();return u&&u.getLogonSystem();}
function n(D){if(f()){e().put(_,JSON.stringify(D));}}
b.getLocalStorage=function(){return new S(S.Type.local);};
b.isServiceOutdated=function(s){if(!l()){return false;}var o=i(j(s));if(o){if(h(o)){this.setServiceValid(s);return false;}return true;}return false;};
b.setServiceValid=function(s){if(l()){var D=g();delete D[j(s).serviceKey];n(D);}};
b.setServiceInvalid=function(s){if(l()){var D=g();var I=j(s);D[I.serviceKey]=I;n(D);}};
return b;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/UriParser',[],function(){"use strict";var s={v2:"v2",v4:"v4"};
function p(S){var r=/.*sap\/opu\/odata\/([^\/]+)\/([^\/]+)/i;var R=/([^;]+);v=(\d{1,4})/i;var o="sap/opu/odata";var b;if(S.toLowerCase().indexOf(o)!==-1){var c=S.match(r);if(!c||c.length!==3){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV2ServiceUri: Malformed service URI (Invalid service name)");}if(c[1].toLowerCase()!=="sap"){b="/"+c[1]+"/"+c[2];}else{b=c[2];}}else{if(S.length>0&&S.lastIndexOf("/")+1===S.length){S=S.substring(0,S.length-1);}b=S.substring(S.lastIndexOf("/")+1);}if(b.indexOf(";v=")!==-1){var v=b.match(R);if(!v||v.length!==3){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV2ServiceUri: Malformed service URI (Invalid version)");}return{serviceName:v[1],serviceVersion:v[2],serviceType:s.v2};}return{serviceName:b,serviceVersion:"0001",serviceType:s.v2};}
function a(S){var r=/^\/?sap\/opu\/odata4((?:\/[^/]+){5})(\/[^/]+){1}(\/.*)?/i;var b=S.match(r);if(!b||b.length!==4){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV4ServiceUri: Malformed service URI");}var n=b[1].split("/");n.splice(0,3);var R=/(\d{1,4})/i;var v=b[2].match(R);return{serviceName:n.join("/"),serviceVersion:v[1],serviceType:s.v4};}
var U={};U.mServiceType=s;U.sODataV4ResourcePathPrefix="sap/opu/odata4/";
U.parseServiceUri=function(S){if(S.toLowerCase().indexOf(this.sODataV4ResourcePathPrefix)!==-1){return a(S);}return p(S);};
return U;});
sap.ui.predefine('sap/ui/fl/write/_internal/fieldExtensibility/Utils',["sap/base/Log","sap/base/security/encodeURL","sap/ui/core/Core","sap/ui/thirdparty/jquery"],function(L,a,C,q){"use strict";var p={v2:"v2",v4:"v4"};
function _(x){var m=[];try{var E=JSON.parse(x.responseText);if(E&&E.error&&E.error.message&&E.error.message.value){m.push({severity:"error",text:E.error.message.value});}else{m.push({severity:"error",text:x.responseText});}}catch(e){}return m;}
function b(o){var B=null;var e=o.getBindingContext?o.getBindingContext():null;if(e&&e.getPath){B=e.getPath();}if(!B){L.warning("Control not bound to a path");}return B;}
function c(m,B){return m.metadataLoaded().then(function(){var e=m.oMetadata._getEntitySetByPath(B);return e?e.name:null;});}
function d(m,B){var M=m.getMetaModel();var s=M.getMetaPath(B);return M.requestObject(s).then(function(e){var S=M.fetchEntityContainer().getResult();var E=S[S.$EntityContainer];var k=Object.keys(E).filter(function(l){return E[l]===e;});return k.length>0&&k[0];});}
function f(m,B){return m.metadataLoaded().then(function(){var e=m.oMetadata._getEntityTypeByPath(B);return e?e.name:null;});}
function g(m,B){var M=m.getMetaModel();var s=M.getMetaPath(B);return M.requestObject(s).then(function(e){var S=e.$Type.split(".");return S[S.length-1];});}
function h(m){var s=null;if(m&&m.sServiceUrl){s=m.sServiceUrl;}if(!s){L.warning("Model has no Service Uri");}return s;}
function i(m){if(m){if(m.isA("sap.ui.model.odata.v2.ODataModel")){return p.v2;}else if(m.isA("sap.ui.model.odata.v4.ODataModel")){return p.v4;}}return null;}
function j(o){if(o){var m=o.getModel?o.getModel():null;if(i(m)){return m;}L.warning("Unsupported model type or protocol");return null;}L.warning("No Control passed");return null;}
var U={};
U.checkControlPrerequisites=function(o){if(o){var m=j(o);var s=h(m);var B=b(o);return Boolean(s&&B);}L.warning("No Control passed");return false;};
U.executeRequest=function(r,P){var F=r+this.getUriParameters(P);return new Promise(function(R){var s={type:"GET",async:true,dataType:"json"};q.ajax(F,s).done(function(D){var o=D&&D.d;R({errorOccurred:false,result:o});}).fail(function(e){R({errorOccurred:true,errorMessages:_(e),statusCode:e.status});});});};
U.getBoundEntitySet=function(o){var m=j(o);var P=i(m);if(P===p.v2){return c(m,b(o));}else if(P===p.v4){return d(m,b(o));}return Promise.resolve(null);};
U.getBoundEntityType=function(o){var m=j(o);var P=i(m);if(P===p.v2){return f(m,b(o));}else if(P===p.v4){return g(m,b(o));}return Promise.resolve(null);};
U.getCrossAppNavigationService=function(){if(sap.ushell&&sap.ushell.Container){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation");}return Promise.resolve(null);};
U.getNavigationUriForIntent=function(I){return U.getCrossAppNavigationService().then(function(o){if(o&&o.hrefForExternal){return o.hrefForExternal(I);}return Promise.resolve(null);});};
U.getServiceUri=function(o){var m=j(o);return h(m);};
U.getText=function(t){return C.getLibraryResourceBundle("sap.ui.fl").getText(t);};
U.getUriParameters=function(P){if(!P){return"";}var u=[];Object.keys(P).forEach(function(n){if(n){var v="'"+a(P[n]||"")+"'";u.push(a(n)+"="+v);}});return u.length===0?"":"?"+u.join("&");};
U.isNavigationSupportedForIntents=function(I){return U.getCrossAppNavigationService().then(function(o){if(o&&o.isNavigationSupported){return o.isNavigationSupported(I).then(function(r){return r.map(function(R){return R&&R.supported===true;});});}return Promise.resolve(I.map(function(){return false;}));});};
return U;});
sap.ui.predefine('sap/ui/fl/write/_internal/transport/TransportDialog',["sap/m/List","sap/m/InputListItem","sap/m/Button","sap/m/ComboBox","sap/m/Dialog","sap/m/Input","sap/m/MessageToast","sap/ui/core/ListItem","sap/ui/fl/write/_internal/transport/Transports"],function(L,I,B,C,D,a,M,b,T){"use strict";
var c=D.extend("sap.ui.fl.write._internal.transport.TransportDialog",{
metadata:{library:"sap.ui.fl",properties:{pkg:{type:"string",group:"Misc",defaultValue:null},transports:{type:"any",group:"Misc",defaultValue:null},lrepObject:{type:"any",group:"Misc",defaultValue:null},hidePackage:{type:"boolean",group:"Misc",defaultValue:null}},events:{ok:{},cancel:{}}},
renderer:{}
});
c.prototype.init=function(){D.prototype.init.apply(this);this._oResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE"));this._oPackageLabel=null;this._oPackage=this._createPackageField();this._oTransport=this._createTransportCombo();this.addContent(this._createContentList());this._createButtons();this.setEscapeHandler(function(p){this.fireCancel();p.resolve();}.bind(this));};
c.prototype._createContentList=function(){this._oPackageListItem=new I({label:this._oResources.getText("TRANSPORT_DIALOG_PACKAGE"),content:[this._oPackage]});this._oTransportListItem=new I({label:this._oResources.getText("TRANSPORT_DIALOG_TRANSPORT"),content:[this._oTransport]});return new L({items:[this._oPackageListItem,this._oTransportListItem]});};
c.prototype._createButtons=function(){var t=this;this.addButton(new B({text:this._oResources.getText("TRANSPORT_DIALOG_LOCAL_OBJECT"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_LOCAL_OBJECT"),press:function(){t._onLocal();}}));this.addButton(new B({text:this._oResources.getText("TRANSPORT_DIALOG_OK"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_OK"),enabled:false,press:function(){t._onOkay();}}));this.addButton(new B({text:this._oResources.getText("TRANSPORT_DIALOG_CANCEL"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_CANCEL"),press:function(){t.fireCancel();t.close();t.destroy();}}));};
c.prototype._onLocal=function(){this.fireOk({selectedTransport:"",selectedPackage:this.getPkg()||"$TMP",dialog:true});this.close();this.destroy();};
c.prototype._onOkay=function(){var t=this._oTransport.getSelectedKey();if(this._checkOkay(t)){this.fireOk({selectedTransport:t,selectedPackage:this.getPkg()||this._oPackage.getValue(),dialog:true});this.close();this.destroy();}else{this.getButtons()[1].setEnabled(false);this._oTransport.setValueState(sap.ui.core.ValueState.Error);this._oTransport.setValueStateText(this.getTitle());}};
c.prototype._checkOkay=function(t){if(t){return true;}return false;};
c.prototype._createTransportCombo=function(){var t=this;return new C({showSecondaryValues:true,enabled:false,tooltip:this._oResources.getText("TRANSPORT_DIALOG_TRANSPORT_TT"),width:"100%",selectionChange:function(){if(t._oPackageListItem.getVisible()&&!t._oPackage.getValue()){return;}t.getButtons()[1].setEnabled(true);t._oTransport.setValueState(sap.ui.core.ValueState.None);},change:function(e){var f=function(i){if((i&&e.mParameters.newValue!==i.getText())||!i){return true;}return false;};if(e&&e.mParameters&&e.mParameters.newValue){if(f(t._oTransport.getSelectedItem())){t.getButtons()[1].setEnabled(false);t._oTransport.setValueState(sap.ui.core.ValueState.Error);t._oTransport.setValueStateText(t._oResources.getText("TRANSPORT_DIALOG_TRANSPORT_TT"));}}}});};
c.prototype._createPackageField=function(){var t=this;return new a({tooltip:this._oResources.getText("TRANSPORT_DIALOG_PACKAGE_TT"),width:"100%",change:function(){var p;var o;o=t._createObjectInfo();p=T.getTransports(o);p.then(function(r){t._onPackageChangeSuccess(r);},function(r){t._onPackageChangeError(r);});},liveChange:function(e){if(e.mParameters.liveValue&&e.mParameters.liveValue.length>3){t._oTransport.setEnabled(true);}}});};
c.prototype._createObjectInfo=function(){var o;var r={"package":this._oPackage.getValue()||""};o=this.getProperty("lrepObject");if(o){if(o.name){r.name=o.name;}if(o.type){r.type=o.type;}if(o.namespace){r.namespace=o.namespace;}}return r;};
c.prototype._onPackageChangeSuccess=function(t){if(t){if(t.localonly){this._oTransport.setEnabled(false);this.getButtons()[1].setEnabled(true);}else if(t.transports&&t.transports.length>0){this._oTransport.setEnabled(true);this._setTransports(t);}else if(t.errorCode){this.getButtons()[1].setEnabled(false);this._oPackage.setValueState(sap.ui.core.ValueState.Error);this._oPackage.setValueStateText(this._oResources.getText("TRANSPORT_DIALOG_"+t.errorCode));this._setTransports(t);}else{M.show(this._oResources.getText("TRANSPORT_DIALOG_NO_TRANSPORTS"));}}};
c.prototype._setTransports=function(t){var l;var d;l=this._hasLock(t.transports);if(l){d=[l];}else{d=t.transports;}this.setTransports(d);if(d&&d.length===1){this._oTransport.setValue(d[0].description,true);this.getButtons()[1].setEnabled(true);}if(!d||d.length===0){this._oTransport.setSelectedKey(null);this._oTransport.setValueState(sap.ui.core.ValueState.None);this.getButtons()[1].setEnabled(false);}};
c.prototype._onPackageChangeError=function(r){M.show(r);this.setTransports([]);};
c.prototype._hasLock=function(t){var o;var l=t.length;while(l--){o=t[l];if(o.locked){return o;}}return null;};
c.prototype.setPkg=function(p){if(p&&!this.getProperty("pkg")){this.setProperty("pkg",p);this._oPackage.setValue(p);this._oPackage.setEnabled(false);this._oTransport.setEnabled(true);this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE_SIMPLE"));this.getButtons()[0].setVisible(false);}return this;};
c.prototype.setTransports=function(s){var i;var l=0;var o;if(s){this.setProperty("transports",s);this._oTransport.removeAllItems();l=s.length;for(i=0;i<l;i++){o=s[i];this._oTransport.addItem(new b({key:o.transportId,text:o.transportId,additionalText:o.description}));}if(l===1){this._oTransport.setSelectedKey(s[0].transportId);this.getButtons()[1].setEnabled(true);}if(l>0){this._oTransport.setEnabled(true);}}return this;};
c.prototype.setLrepObject=function(o){if(o&&!this.getProperty("lrepObject")){this.setProperty("lrepObject",o);}return this;};
c.prototype.setHidePackage=function(h){this.setProperty("hidePackage",h);this._oPackageListItem.setVisible(!h);if(h){this.getButtons()[0].setEnabled(h);this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE_SIMPLE"));}return this;};
return c;},true);
sap.ui.predefine('sap/ui/fl/write/_internal/transport/TransportSelection',["sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/write/_internal/transport/Transports","sap/ui/fl/write/_internal/transport/TransportDialog","sap/ui/fl/registry/Settings","sap/ui/core/BusyIndicator"],function(F,L,a,T,b,c,B){"use strict";var d=function(){};
d.prototype.selectTransport=function(o,O,e,C,f,s){if(!F.getLrepUrl()){O(this._createEventObject(o,{transportId:""}));return;}var r=function(o,O,e,C,s,A){T.getTransports(o).then(function(g){if(this._checkDialog(g,A)){this._openDialog({hidePackage:!L.doesCurrentLayerRequirePackage(),pkg:o.package,transports:g.transports,lrepObject:this._toLREPObject(o)},O,e,C,s);}else{var t=(!g.localonly&&A)?{transportId:"ATO_NOTIFICATION"}:this._getTransport(g);O(this._createEventObject(o,t));}}.bind(this),function(R){e(R);});};var l=L.getCurrentLayer();if(l&&((l===a.CUSTOMER)||(l===a.CUSTOMER_BASE))){c.getInstance().then(function(S){if(S.isAtoEnabled()){if(!(o&&o.name&&o.namespace&&o.type)){var t={transportId:"ATO_NOTIFICATION"};O(this._createEventObject(o,t));}else{r.apply(this,[o,O,e,C,s,true]);}}else{r.apply(this,[o,O,e,C,s,false]);}}.bind(this));}else{r.apply(this,[o,O,e,C,s,false]);}};
d.prototype._createEventObject=function(o,t){return{mParameters:{selectedTransport:t.transportId,selectedPackage:o["package"],dialog:false},getParameters:function(){return this.mParameters;},getParameter:function(n){return this.mParameters[n];}};};
d.prototype._toLREPObject=function(o){var O={};if(o.namespace){O.namespace=o.namespace;}if(o.name){O.name=o.name;}if(o.type){O.type=o.type;}return O;};
d.prototype._openDialog=function(C,o,e,f,s){var D=new b(C);D.attachOk(o);D.attachCancel(e);D.addStyleClass(s);if(f){D.addStyleClass("sapUiSizeCompact");}else{D.removeStyleClass("sapUiSizeCompact");}D.open();B.hide();return D;};
d.prototype._getTransport=function(t){var o;if(!t.localonly){o=this._hasLock(t.transports);}else{o={transportId:""};}return o;};
d.prototype._checkDialog=function(t,A){if(t){if(t.localonly||this._hasLock(t.transports)||(!t.localonly&&A)){return false;}}return true;};
d.prototype._hasLock=function(t){var l=t.length;while(l--){var o=t[l];if(o.locked){return o;}}return false;};
d.prototype.setTransports=function(C,o){var i=C.length-1;var t=this;var s=function(C,i,o,e,f){if(i>=0){var g=C[i];if(f===true){if(g.getDefinition().packageName!=="$TMP"){g.setRequest(e);}i--;return s(C,i,o,e,f);}if(g.getDefinition().packageName!=="$TMP"){return t.openTransportSelection(g,o).then(function(h){if(h==="cancel"){return Promise.reject("cancel");}g.setRequest(h.transport);if(h.fromDialog===true){e=h.transport;f=true;}i--;return s(C,i,o,e,f);},function(){return null;});}i--;return s(C,i,o,e,f);}return Promise.resolve();};return s(C,i,o);};
d.prototype.openTransportSelection=function(C,o,s){var t=this;return new Promise(function(r,e){var O=function(R){if(R&&R.getParameters){var g=R.getParameters().selectedTransport;var p=R.getParameters().selectedPackage;var h=R.getParameters().dialog;var i={transport:g,packageName:p,fromDialog:h};r(i);}else{r({});}};var E=function(g){if(g.sId==='cancel'){r(g.sId);}else{e(g);}};var f={};if(C){f["package"]=C.getPackage();f.namespace=C.getNamespace();f.name=C.getId();f.type=C.getDefinition().fileType;}t.selectTransport(f,O,E,false,o,s);});};
d.prototype.checkTransportInfo=function(t){return t&&t.transport&&t.packageName!=="$TMP";};
d.prototype._prepareChangesForTransport=function(t,A,e,C){var f=T.convertToChangeTransportData(A,e);var o={};o.package=t.packageName;o.transportId=t.transport;o.changeIds=f;o.reference=C.reference;o.layer=C.layer;return T.makeChangesTransportable(o).then(function(){A.forEach(function(g){if(g.getPackage()==='$TMP'){var D=g.getDefinition();D.packageName=t.packageName;g.setResponse(D);}});});};
return d;});
sap.ui.predefine('sap/ui/fl/write/_internal/transport/Transports',["sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/Utils","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils"],function(A,F,I,W){"use strict";var R={ACTION_GET_TRANSPORTS:"/actions/gettransports/",ACTION_MAKE_CHANGE_TRANSPORTABLE:"/actions/make_changes_transportable/",ACTION_GET_TOKEN:"/actions/getcsrftoken/"};return{getTransports:function(p){if(F.getClient()){p["sap-client"]=F.getClient();}var g=I.getUrl(R.ACTION_GET_TRANSPORTS,{url:F.getLrepUrl()},p);g=decodeURIComponent(g);return I.sendRequest(g,"GET").then(function(r){if(r.response){if(!r.response.localonly){r.response.localonly=false;}if(!r.response.errorCode){r.response.errorCode="";}return Promise.resolve(r.response);}return Promise.reject('response is empty');});},makeChangesTransportable:function(p){if(!p.transportId){return Promise.reject(new Error("no transportId provided as attribute of mParameters"));}if(!p.changeIds){return Promise.reject(new Error("no changeIds provided as attribute of mParameters"));}if(!p.reference){return Promise.reject(new Error("no reference provided as attribute of mParameters"));}var u=F.getClient()?{"sap-client":F.getClient()}:{};var m=I.getUrl(R.ACTION_MAKE_CHANGE_TRANSPORTABLE,{url:F.getLrepUrl()},u);var t=I.getUrl(R.ACTION_GET_TOKEN,{url:F.getLrepUrl()});var r=W.getRequestOptions(A,t,p,"application/json; charset=utf-8","json");return W.sendRequest(m,"POST",r);},convertToChangeTransportData:function(l,a){var t=[];var i;if(a&&a.length){for(i=0;i<a.length;i++){var o=a[i];var p={};p.namespace=o.getNamespace();p.fileName=o.getDefinition().fileName;p.fileType=o.getDefinition().fileType;t.push(p);}}var b=l.length;for(i=0;i<b;i++){var c=l[i];var d={};d.namespace=c.getNamespace();d.fileName=c.getId();d.fileType=c.getDefinition().fileType;t.push(d);}return t;}};},true);
sap.ui.require.preload({
	"sap/ui/fl/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.fl","type":"library","embeds":["support/apps/contentbrowser","support/apps/uiFlexibilityDiagnostics","variants/context"],"applicationVersion":{"version":"1.90.1"},"title":"SAPUI5 library with sap.ui.fl controls.","description":"SAPUI5 library with sap.ui.fl controls.","ach":"CA-UI5-FL","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.90","libs":{"sap.ui.core":{"minVersion":"1.90.1"},"sap.m":{"minVersion":"1.90.1"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.fl.variants.VariantManagement","sap.ui.fl.util.IFrame"]}}}}',
	"sap/ui/fl/variants/context/manifest.json":'{"_version":"1.28.0","sap.app":{"id":"sap.ui.fl.variants.context","type":"component","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"","description":"","resources":"resources.json","ach":"CA-UI5-ABA-AIDX"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.ui.fl.variants.context.view.ContextVisibility","type":"XML","async":true,"id":"ContextVisibility"},"dependencies":{"minUI5Version":"1.87.0","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.ui.fl.variants.context.i18n.i18n"}},"contexts":{"type":"sap.ui.model.json.JSONModel"},"selectedContexts":{"type":"sap.ui.model.json.JSONModel"}}}}',
	"sap/ui/fl/variants/context/view/ContextVisibility.view.xml":'<mvc:View controllerName="sap.ui.fl.variants.context.controller.ContextVisibility" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m"><Panel id="visibilityPanel"><headerToolbar><Toolbar id="visibilityToolbar"><Label id="visibilityToolbarLabel" labelFor="visibilityRadioButtonGroup" text="{i18n&gt;RADIO_BUTTON_GROUP_LABEL}" design="Bold"/></Toolbar></headerToolbar><content><RadioButtonGroup id="visibilityRadioButtonGroup" selectedIndex="{path:\'selectedContexts&gt;/selected\',formatter:\'.formatSelectedIndex\'}"><RadioButton id="publicRadioButton" text="{i18n&gt;RADIO_BUTTON_PUBLIC}" select=".onSelectPublicRadioButton"/><RadioButton id="restrictedRadioButton" text="{i18n&gt;RADIO_BUTTON_RESTRICTED}" select=".onSelectRestrictedRadioButton"/></RadioButtonGroup><List id="selectedContextsList" visible="false" noDataText="{i18n&gt;NO_SELECTED_ROLES}" mode="Delete" delete=".onDeleteContext" growing="true" items="{selectedContexts&gt;/selected}"><headerToolbar><Toolbar style="Clear" id="restrictedToolbar"><Label labelFor="selectedContextsList" text="{i18n&gt;SELECTED_CONTEXT_LIST_TITLE}" design="Bold" required="true" wrapping="true"/><ToolbarSpacer/><Button id="removeAllButton" text="{i18n&gt;REMOVE_ALL_BUTTON}" press=".removeAll" enabled="{path:\'selectedContexts&gt;/selected\',formatter:\'.isRemoveAllEnabled\'}"/><Button id="addContextsButton" ariaHasPopup="Dialog" text="{i18n&gt;ADD_CONTEXTS_BUTTON}" press=".onAddContextsHandler"/></Toolbar></headerToolbar><StandardListItem title="{selectedContexts&gt;id}" tooltip="{path:\'selectedContexts&gt;description\',formatter:\'.formatTooltip\'}"/></List></content></Panel></mvc:View>',
	"sap/ui/fl/variants/context/view/fragment/AddContextDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog id="selectContexts" noDataText="{i18n&gt;NO_DATA}" multiSelect="true" resizable="true" draggable="true" growing="true" growingThreshold="50" title="{i18n&gt;SELECT_ROLE_DIALOG_TITLE}" search=".onSearch" confirm=".onSelectContexts" items="{contexts&gt;/values}"><StandardListItem title="{contexts&gt;id}" description="{path:\'contexts&gt;description\',formatter:\'.formatTooltip\'}" wrapping="true" selected="{parts:[\'contexts&gt;\',\'selectedContexts&gt;/selected\'],formatter:\'.isSelected\'}"/></SelectDialog></core:FragmentDefinition>'
},"sap/ui/fl/library-preload"
);
//# sourceMappingURL=library-preload.js.map