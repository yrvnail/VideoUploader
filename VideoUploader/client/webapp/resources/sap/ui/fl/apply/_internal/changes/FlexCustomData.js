/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/CustomData"],function(){"use strict";var F={};F.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";F.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";F.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";F.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";F.getAppliedCustomDataValue=function(c,C,m){var a=g(c,m,this._getCustomDataKey(C,F.appliedChangesCustomDataKey));return a.customDataValue;};F.getParsedRevertDataFromCustomData=function(c,C,m){var s=this.getAppliedCustomDataValue(c,C,m);return s&&JSON.parse(s);};F.hasChangeApplyFinishedCustomData=function(c,C,m){var a=m.getAggregation(c,"customData")||[];var b=[this._getCustomDataKey(C,F.appliedChangesCustomDataKey),this._getCustomDataKey(C,F.failedChangesCustomDataKeyJs),this._getCustomDataKey(C,F.notApplicableChangesCustomDataKey)];return a.some(function(o){var k=m.getProperty(o,"key");if(b.indexOf(k)>-1){return!!m.getProperty(o,"value");}});};F.addAppliedCustomData=function(c,C,p,s){var a;var b=this._getCustomDataKey(C,F.appliedChangesCustomDataKey);if(s){a=JSON.stringify(C.getRevertData());}else{a="true";}w(c,b,a,p);};F.addFailedCustomData=function(c,C,p,i){var s=this._getCustomDataKey(C,i);w(c,s,"true",p);};F.destroyAppliedCustomData=function(c,C,m){var k=this._getCustomDataKey(C,F.appliedChangesCustomDataKey);var a=g(c,m,k);if(a.customData){m.destroy(a.customData);}};F.getCustomDataIdentifier=function(s,e,x){if(s){return F.appliedChangesCustomDataKey;}if(!e){return F.notApplicableChangesCustomDataKey;}if(x){return F.failedChangesCustomDataKeyXml;}return F.failedChangesCustomDataKeyJs;};F._getCustomDataKey=function(c,i){return i+"."+c.getId();};function w(c,k,v,p){var C=g(c,p.modifier,k);if(!C.customData){p.modifier.createAndAddCustomData(c,k,v,p.appComponent);}else{p.modifier.setProperty(C.customData,"value",v);}}function g(c,m,C){var a=m.getAggregation(c,"customData")||[];var r={};a.some(function(o){var k=m.getProperty(o,"key");if(k===C){r.customData=o;r.customDataValue=m.getProperty(o,"value");return true;}});return r;}return F;},true);
