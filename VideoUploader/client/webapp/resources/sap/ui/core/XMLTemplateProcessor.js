/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/base/DataType','sap/ui/base/ManagedObject','sap/ui/core/CustomData','sap/ui/core/Component','./mvc/View','./mvc/ViewType','./mvc/XMLProcessingMode','./mvc/EventHandlerResolver','./ExtensionPoint','./StashedControlSupport','sap/ui/base/SyncPromise','sap/base/Log','sap/base/util/ObjectPath','sap/base/util/values','sap/base/assert','sap/base/security/encodeXML','sap/base/util/LoaderExtensions','sap/base/util/JSTokenizer','sap/base/util/isEmptyObject'],function(q,D,M,C,a,V,b,X,E,c,S,d,L,O,v,f,g,h,J,k){"use strict";function l(e,i,N,j,R){var p=M.bindingParser(i,j,true,false,false,false,R);if(p&&typeof p==="object"){return p;}var G=i=p||i;var H=D.getType(e);if(H){if(H instanceof D){G=H.parseValue(i,{context:j,locals:R});if(!H.isValid(G)){L.error("Value '"+i+"' is not valid for type '"+H.getName()+"'.");}}}else{throw new Error("Property "+N+" has unknown type "+e);}return typeof G==="string"?M.bindingParser.escape(G):G;}function m(e){return e.localName||e.nodeName;}var n="http://www.w3.org/1999/xhtml";var o="http://www.w3.org/2000/xmlns/";var r="http://www.w3.org/2000/svg";var s="sap.ui.core";var t="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1";var u="http://schemas.sap.com/sapui5/extension/sap.ui.core.support.Support.info/1";var w="http://schemas.sap.com/sapui5/extension/sap.ui.core.xmlcomposite/1";var U="http://schemas.sap.com/sapui5/extension/sap.ui.core.Internal/1";var P="http://schemas.sap.com/sapui5/preprocessorextension/";function x(e,i){function j(G,H,I,K,N){var Q,R,W=[];for(Q=G.firstChild;Q;Q=Q.nextSibling){R=i(G,H,I,Q,false,K,N);if(R){W.push(R.unwrap());}}return d.resolve(W);}function p(G,H,I,K,N){var Q,R=Promise.resolve(),W=[K];for(Q=G.firstChild;Q;Q=Q.nextSibling){R=R.then(i.bind(null,G,H,I,Q,false,K,N));W.push(R);}return Promise.all(W);}return e?p:j;}var y={};y.loadTemplate=function(e,i){var R=e.replace(/\./g,"/")+("."+(i||"view")+".xml");return h.loadResource(R).documentElement;};y.loadTemplatePromise=function(e,i){var R=e.replace(/\./g,"/")+("."+(i||"view")+".xml");return h.loadResource(R,{async:true}).then(function(j){return j.documentElement;});};y.parseViewAttributes=function(e,j,p){var G=j.getMetadata().getAllProperties();for(var i=0;i<e.attributes.length;i++){var H=e.attributes[i];if(H.name==='controllerName'){j._controllerName=H.value;}else if(H.name==='resourceBundleName'){j._resourceBundleName=H.value;}else if(H.name==='resourceBundleUrl'){j._resourceBundleUrl=H.value;}else if(H.name==='resourceBundleLocale'){j._resourceBundleLocale=H.value;}else if(H.name==='resourceBundleAlias'){j._resourceBundleAlias=H.value;}else if(H.name==='class'){j.addStyleClass(H.value);}else if(!p[H.name]&&G[H.name]){p[H.name]=l(G[H.name].type,H.value,H.name,j._oContainingView.oController);}}};y.enrichTemplateIds=function(e,i){y.enrichTemplateIdsPromise(e,i,false);return e;};y.enrichTemplateIdsPromise=function(e,i,j){return F(e,i,true,j).then(function(){return e;});};y.parseTemplate=function(e,i){return y.parseTemplatePromise(e,i,false).unwrap();};y.parseTemplatePromise=function(i,j,G,H){return F(i,j,false,G,H).then(function(){var p=d.resolve(arguments[0]);if(j.isA("sap.ui.core.Fragment")){return p;}var I=arguments;if(j.isA("sap.ui.core.mvc.View")&&j._epInfo&&j._epInfo.all.length>0){p=T(G,j,{"content":j._epInfo.all});}return p.then(function(){if(Array.isArray(I[0])){I[0]=I[0].filter(function(e){return!e._isExtensionPoint;});}return I[0];});});};function z(R){var e,i=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/;if(!R||typeof R!=="object"){e="core:require in XMLView can't be parsed to a valid object";}else{Object.keys(R).some(function(K){if(!i.test(K)){e="core:require in XMLView contains invalid identifier: '"+K+"'";return true;}if(!R[K]||typeof R[K]!=="string"){e="core:require in XMLView contains invalide value '"+R[K]+"'under key '"+K+"'";return true;}});}return e;}function A(j,p){var G=j.getAttributeNS(s,"require"),R,H,I;if(G){try{R=J.parseJS(G);}catch(e){L.error("Require attribute can't be parsed on Node: ",j.nodeName);throw e;}I=z(R);if(I){throw new Error(I+" on Node: "+j.nodeName);}if(!k(R)){H={};if(p){return new Promise(function(K,N){var Q=Object.keys(R).reduce(function(i,W){H[W]=sap.ui.require(R[W]);return i&&H[W]!==undefined;},true);if(Q){K(H);return;}sap.ui.require(v(R),function(){var W=arguments;Object.keys(R).forEach(function(Y,i){H[Y]=W[i];});K(H);},N);});}else{Object.keys(R).forEach(function(K){H[K]=sap.ui.requireSync(R[K]);});return d.resolve(H);}}}}function T(e,i,j){var G=d.resolve();if(!k(j)){var H=[];var R;if(e){G=new Promise(function(p){R=p;});}Object.keys(j).forEach(function(I){var K=j[I];K.forEach(function(N){N.targetControl=i;var Q=sap.ui.require(N.providerClass);if(Q){H.push(Q.applyExtensionPoint(N));}else{var p=new Promise(function(W,Y){sap.ui.require([N.providerClass],function(Z){W(Z);},Y);}).then(function(W){return W.applyExtensionPoint(N);});H.push(p);}});});if(e){Promise.all(H).then(R);}}return G;}function B(e,i,p){var j=p;for(var G=0;G<100;G++){var R=e.lookupNamespaceURI(j);if(R==null||R===i){return j;}j=p+G;}throw new Error("Could not find an unused namespace prefix after 100 tries, giving up");}function F(p,G,H,I,K){var R=[],N=B(p,U,"__ui5"),Q=A(p,I)||d.resolve();p.setAttributeNS(o,"xmlns:"+N,U);I=I&&!!G._sProcessingMode;L.debug("XML processing mode is "+(G._sProcessingMode||"default")+".","","XMLTemplateProcessor");L.debug("XML will be processed "+I?"asynchronously":"synchronously"+".","","XMLTemplateProcessor");var W=sap.ui.getCore().getConfiguration().getDesignMode();if(W){G._sapui_declarativeSourceInfo={xmlNode:p,xmlRootNode:G._oContainingView===G?p:G._oContainingView._sapui_declarativeSourceInfo.xmlRootNode};}var Y=G.sViewName||G._sFragmentName;if(!Y){var Z=G;var $=0;while(++$<1000&&Z&&Z!==Z._oContainingView){Z=Z._oContainingView;}Y=Z.sViewName;}if(G.isSubView()){d1(p,true,false,Q);}else{if(p.localName==="View"&&p.namespaceURI!=="sap.ui.core.mvc"){L.warning("XMLView root node must have the 'sap.ui.core.mvc' namespace, not '"+p.namespaceURI+"'"+(Y?" (View name: "+Y+")":""));}e1(p,false,false,Q);}var i=0;function _(){for(;i<R.length;i++){var e=R[i];if(e&&typeof e.then==='function'){return e.then(a1).then(_);}}return R;}function a1(e){var j=[i,1].concat(e);Array.prototype.splice.apply(R,j);}return Q.then(_);function b1(e){return e;}function c1(e){return G._oContainingView.createId(e);}function d1(p,e,j,m1){if(p.nodeType===1){var n1=m(p);if(p.namespaceURI===n||p.namespaceURI===r){R.push("<"+n1+" ");var o1=false;for(var i=0;i<p.attributes.length;i++){var p1=p.attributes[i];var q1=p1.value;if(p1.name==="id"){o1=true;q1=k1(G,p);}R.push(p1.name+"=\""+g(q1)+"\" ");}if(e===true){R.push("data-sap-ui-preserve"+"=\""+G.getId()+"\" ");if(!o1){R.push("id"+"=\""+G.getId()+"\" ");}}R.push(">");var r1=p;if(window.HTMLTemplateElement&&p instanceof HTMLTemplateElement&&p.content instanceof DocumentFragment){r1=p.content;}e1(r1,false,false,m1);R.push("</"+n1+">");}else if(n1==="FragmentDefinition"&&p.namespaceURI===s){e1(p,false,true,m1);}else{Q=Q.then(function(){return h1(p,m1).then(function(u1){for(var i=0;i<u1.length;i++){var v1=u1[i];if(G.getMetadata().hasAggregation("content")){G._epInfo=G._epInfo||{contentControlsCount:0,last:null,all:[]};if(v1._isExtensionPoint){v1.index=G._epInfo.contentControlsCount;v1.targetControl=G;v1.aggregationName="content";if(G._epInfo.last){G._epInfo.last._nextSibling=v1;}G._epInfo.last=v1;G._epInfo.all.push(v1);}else{G._epInfo.contentControlsCount++;G.addAggregation("content",v1);}}else if(G.getMetadata().hasAssociation(("content"))){G.addAssociation("content",v1);}}return u1;});});R.push(Q);}}else if(p.nodeType===3&&!j){var s1=p.textContent||p.text,t1=m(p.parentNode);if(s1){if(t1!="style"){s1=g(s1);}R.push(s1);}}}function e1(p,e,j,m1){var n1=p.childNodes;for(var i=0;i<n1.length;i++){d1(n1[i],e,j,m1);}}function f1(e,j){var m1;var n1=sap.ui.getCore().getLoadedLibraries();q.each(n1,function(r1,s1){if(e===s1.namespace||e===s1.name){m1=s1.name+"."+((s1.tagNames&&s1.tagNames[j])||j);}});m1=m1||e+"."+j;function o1(q1){if(!q1){L.error("Control '"+m1+"' did not return a class definition from sap.ui.define.","","XMLTemplateProcessor");q1=O.get(m1);}if(!q1){L.error("Can't find object class '"+m1+"' for XML-view","","XMLTemplateProcessor");}return q1;}var p1=m1.replace(/\./g,"/");var q1=sap.ui.require(p1);if(!q1){if(I){return new Promise(function(r1,s1){sap.ui.require([p1],function(q1){q1=o1(q1);r1(q1);},s1);});}else{q1=sap.ui.requireSync(p1);q1=o1(q1);}}return q1;}function g1(e,j,m1){if(e.namespaceURI===n||e.namespaceURI===r){var id=e.attributes['id']?e.attributes['id'].textContent||e.attributes['id'].text:null;if(H){return y.enrichTemplateIdsPromise(e,G,I).then(function(){return[];});}else{var o1=function(n1){var q1={id:id?k1(G,e,id):undefined,xmlNode:e,containingView:G._oContainingView,processingMode:G._sProcessingMode};if(G.fnScopedRunWithOwner){return G.fnScopedRunWithOwner(function(){return new n1(q1);});}return new n1(q1);};if(I){return new Promise(function(n1,q1){sap.ui.require(["sap/ui/core/mvc/XMLView"],function(p1){n1([o1(p1)]);},q1);});}else{var p1=sap.ui.requireSync("sap/ui/core/mvc/XMLView");return d.resolve([o1(p1)]);}}}else{return h1(e,j,m1);}}function h1(e,j,m1){if(m(e)==="ExtensionPoint"&&e.namespaceURI===s){if(H){return d.resolve([]);}else{var n1=G instanceof V?G._oContainingView:G;var o1=c._factory.bind(null,n1,e.getAttribute("name"),function(){var q1=d.resolve();var r1=[];var s1=e.childNodes;for(var i=0;i<s1.length;i++){var t1=s1[i];if(t1.nodeType===1){q1=q1.then(g1.bind(null,t1,j,m1));r1.push(q1);}}return d.all(r1).then(function(u1){var v1=[];u1.forEach(function(w1){v1=v1.concat(w1);});return v1;});});return d.resolve(G.fnScopedRunWithOwner?G.fnScopedRunWithOwner(o1):o1());}}else{var p1=f1(e.namespaceURI,m(e));if(p1&&typeof p1.then==='function'){return p1.then(function(q1){return i1(e,q1,j,m1);});}else{return i1(e,p1,j,m1);}}}function i1(m1,n1,o1,p1){var ns=m1.namespaceURI,r1={},s1={},t1="",u1=[],v1=null,w1=null,x1=m1.getAttribute("stashed")==="true";if(!H){m1.removeAttribute("stashed");}if(!n1){return d.resolve([]);}var y1=n1.getMetadata();var z1=y1.getAllSettings();var A1=A(m1,I);if(A1){o1=d.all([o1,A1]).then(function(e){return Object.assign({},e[0],e[1]);});}o1=o1.then(function(j){if(k(j)){j=null;}if(!H){for(var i=0;i<m1.attributes.length;i++){var q1=m1.attributes[i],F1=q1.name,G1=q1.namespaceURI,H1=z1[F1],I1=q1.value;if(F1==="id"){r1[F1]=k1(G,m1,I1);}else if(F1==="class"){t1+=I1;}else if(F1==="viewName"){r1[F1]=I1;}else if(F1==="fragmentName"){r1[F1]=I1;r1['containingView']=G._oContainingView;}else if((F1==="binding"&&!H1)||F1==='objectBindings'){if(!x1){var J1=M.bindingParser(I1,G._oContainingView.oController);if(J1){r1.objectBindings=r1.objectBindings||{};r1.objectBindings[J1.model||undefined]=J1;}}}else if(F1==='metadataContexts'){if(!x1){var K1=null;try{K1=y._calculatedModelMapping(I1,G._oContainingView.oController,true);}catch(e){L.error(G+":"+e.message);}if(K1){r1.metadataContexts=K1;if(y._preprocessMetadataContexts){y._preprocessMetadataContexts(n1.getMetadata().getName(),r1,G._oContainingView.oController);}}}}else if(F1.indexOf(":")>-1){G1=q1.namespaceURI;if(G1===t){var L1=m(q1);u1.push(new C({key:L1,value:l("any",I1,L1,G._oContainingView.oController)}));}else if(G1===u){w1=I1;}else if(G1&&G1.startsWith(P)){L.debug(G+": XMLView parser ignored preprocessor attribute '"+F1+"' (value: '"+I1+"')");}else if(G1===U&&m(q1)==="invisible"){H1=z1.visible;if(H1&&H1._iKind===0&&H1.type==="boolean"){r1.visible=false;}}else if(G1===s||G1===U||F1.startsWith("xmlns:")){}else{if(!v1){v1={};}if(!v1.hasOwnProperty(q1.namespaceURI)){v1[q1.namespaceURI]={};}v1[q1.namespaceURI][m(q1)]=q1.nodeValue;L.debug(G+": XMLView parser encountered unknown attribute '"+F1+"' (value: '"+I1+"') with unknown namespace, stored as sap-ui-custom-settings of customData");}}else if(H1&&H1._iKind===0){r1[F1]=l(H1.type,I1,F1,G._oContainingView.oController,j);}else if(H1&&H1._iKind===1&&H1.altTypes){if(!x1){r1[F1]=l(H1.altTypes[0],I1,F1,G._oContainingView.oController,j);}}else if(H1&&H1._iKind===2){if(!x1){var J1=M.bindingParser(I1,G._oContainingView.oController,false,false,false,false,j);if(J1){r1[F1]=J1;}else{L.error(G+": aggregations with cardinality 0..n only allow binding paths as attribute value (wrong value: "+F1+"='"+I1+"')");}}}else if(H1&&H1._iKind===3){if(!x1){r1[F1]=c1(I1);}}else if(H1&&H1._iKind===4){if(!x1){r1[F1]=I1.split(/[\s,]+/g).filter(b1).map(c1);}}else if(H1&&H1._iKind===5){if(!x1){var M1=[];E.parse(I1).forEach(function(N1){var O1=E.resolveEventHandler(N1,G._oContainingView.oController,j);if(O1){M1.push(O1);}else{L.warning(G+": event handler function \""+N1+"\" is not a function or does not exist in the controller.");}});if(M1.length){r1[F1]=M1;}}}else if(H1&&H1._iKind===-1){if(V.prototype.isPrototypeOf(n1.prototype)&&F1=="async"){r1[F1]=l(H1.type,I1,F1,G._oContainingView.oController,j);}else{L.warning(G+": setting '"+F1+"' for class "+y1.getName()+" (value:'"+I1+"') is not supported");}}else{f(F1==='xmlns',G+": encountered unknown setting '"+F1+"' for class "+y1.getName()+" (value:'"+I1+"')");if(y._supportInfo){y._supportInfo({context:m1,env:{caller:"createRegularControls",error:true,info:"unknown setting '"+F1+"' for class "+y1.getName()}});}}}if(v1){u1.push(new C({key:"sap-ui-custom-settings",value:v1}));}if(u1.length>0){r1.customData=u1;}}return j;}).catch(function(e){if(!e.isEnriched){var j=G.getMetadata().isA("sap.ui.core.mvc.View")?"View":"Fragment";var q1=m1&&m1.cloneNode(false).outerHTML;e=new Error("Error found in "+j+" (id: '"+G.getId()+"').\nXML node: '"+q1+"':\n"+e);e.isEnriched=true;L.error(e);}if(I&&G._sProcessingMode!==X.SequentialLegacy){throw e;}});var B1=x(I,C1);function C1(m1,D1,E1,e,q1,o1,p1){var F1,G1;if(e.nodeType===1){if(e.namespaceURI===w){r1[m(e)]=e.querySelector("*");return;}F1=e.namespaceURI===ns&&E1&&E1[m(e)];if(F1){return B1(e,F1,false,o1,p1);}else if(D1){if(!q1&&e.getAttribute("stashed")==="true"&&!H){var H1=e;e=e.cloneNode();H1.removeAttribute("stashed");G1=function(){var j=k1(G,e);S.createStashedControl({wrapperId:j,fnCreate:function(){var J1=I;I=false;try{return C1(m1,D1,E1,H1,true,o1,p1).unwrap();}finally{I=J1;}}});};if(G.fnScopedRunWithOwner){G.fnScopedRunWithOwner(G1);}else{G1();}e.removeAttribute("visible");j1(e,"invisible");}if(r1[D1.name]&&r1[D1.name].path&&typeof r1[D1.name].path==="string"){p1={aggregation:D1.name,id:r1.id};}return g1(e,o1,p1).then(function(J1){for(var j=0;j<J1.length;j++){var K1=J1[j];var L1=D1.name;if(K1._isExtensionPoint){if(!r1[L1]){r1[L1]=[];}var M1=s1[L1];if(!M1){M1=s1[L1]=[];}K1.index=r1[L1].length;K1.aggregationName=L1;K1.closestAggregationBindingCarrier=p1&&p1.id;K1.closestAggregationBinding=p1&&p1.aggregation;var N1=M1[M1.length-1];if(N1){N1._nextSibling=K1;}M1.push(K1);}else if(D1.multiple){if(!r1[L1]){r1[L1]=[];}if(typeof r1[L1].path==="string"){f(!r1[L1].template,"list bindings support only a single template object");r1[L1].template=K1;}else{r1[L1].push(K1);}}else{f(!r1[L1],"multiple aggregates defined for aggregation with cardinality 0..1");r1[L1]=K1;}}return J1;});}else if(m(m1)!=="FragmentDefinition"||m1.namespaceURI!==s){throw new Error("Cannot add direct child without default aggregation defined for control "+y1.getElementName());}}else if(e.nodeType===3){var I1=e.textContent||e.text;if(I1&&I1.trim()){throw new Error("Cannot add text nodes as direct child of an aggregation. For adding text to an aggregation, a surrounding html tag is needed: "+I1.trim());}}}var D1=y1.getDefaultAggregation();var E1=y1.getAllAggregations();return B1(m1,D1,E1,o1,p1).then(function(){var e;var j=d.resolve();var q1=d.resolve();var F1=m1.getAttribute("type");var G1=a.getOwnerComponentFor(G);var H1=G1&&G1.isA("sap.ui.core.IAsyncContentCreation");if(H&&m1.hasAttribute("id")){l1(G,m1);}else if(!H){if(n1.getMetadata().isA("sap.ui.core.mvc.View")){var I1=function(){if(!n1._sType&&!r1.viewName){r1.viewName="module:"+n1.getMetadata().getName().replace(/\./g,"/");}if(H1&&I){if(r1.async===false){throw new Error("A nested view contained in a Component implementing 'sap.ui.core.IAsyncContentCreation' is processed asynchronously by default and cannot be processed synchronously.\n"+"Affected Component '"+G1.getMetadata().getComponentName()+"' and View '"+r1.viewName+"'.");}r1.type=n1._sType||F1;q1=V.create(r1);}else{if(n1.getMetadata().isA("sap.ui.core.mvc.XMLView")&&G._sProcessingMode){r1.processingMode=G._sProcessingMode;}return V._create(r1,undefined,n1._sType||F1);}};if(G.fnScopedRunWithOwner){e=G.fnScopedRunWithOwner(I1);}else{e=I1();}}else if(n1.getMetadata().isA("sap.ui.core.Fragment")&&I){if(F1!==b.JS){r1.processingMode=G._sProcessingMode;}var J1="sap/ui/core/Fragment";var K1=sap.ui.require(J1);r1.name=r1.name||r1.fragmentName;if(K1){q1=K1.load(r1);}else{q1=new Promise(function(M1,N1){sap.ui.require([J1],function(K1){K1.load(r1).then(function(O1){M1(O1);});},N1);});}}else{var L1=function(){var M1;if(G.fnScopedRunWithOwner){M1=G.fnScopedRunWithOwner(function(){var M1=new n1(r1);return M1;});}else{M1=new n1(r1);}j=T(I,M1,s1);return M1;};if(K&&K.fnRunWithPreprocessor){e=K.fnRunWithPreprocessor(L1);}else{e=L1();}}}return q1.then(function(M1){return M1||e;}).then(function(M1){if(t1&&M1.addStyleClass){M1.addStyleClass(t1);}if(!M1){M1=[];}else if(!Array.isArray(M1)){M1=[M1];}if(y._supportInfo&&M1){for(var i=0,N1=M1.length;i<N1;i++){var O1=M1[i];if(O1&&O1.getId()){var P1=y._supportInfo({context:m1,env:{caller:"createRegularControls",nodeid:m1.getAttribute("id"),controlid:O1.getId()}}),Q1=w1?w1+",":"";Q1+=P1;y._supportInfo.addSupportInfo(O1.getId(),Q1);}}}if(W){M1.forEach(function(O1){if(y1.getCompositeAggregationName){var R1=m1.getElementsByTagName(O1.getMetadata().getCompositeAggregationName());for(var i=0;i<R1.length;i++){m1.removeChild(R1[0]);}}O1._sapui_declarativeSourceInfo={xmlNode:m1,xmlRootNode:G._sapui_declarativeSourceInfo.xmlRootNode,fragmentName:y1.getName()==='sap.ui.core.Fragment'?r1['fragmentName']:null};});}return j.then(function(){return M1;});});});}function j1(e,j){var m1=B(e,U,N);e.setAttributeNS(U,m1+":"+j,"true");}function k1(G,p,e){if(p.getAttributeNS(U,"id")){return p.getAttribute("id");}else{return c1(e?e:p.getAttribute("id"));}}function l1(G,p){p.setAttribute("id",c1(p.getAttribute("id")));j1(p,"id");}}y._preprocessMetadataContexts=null;y._calculatedModelMapping=function(e,j,p){var G,H={},I=M.bindingParser(e,j);function K(N){if(N.length%2===0){throw new Error("The last entry is no binding");}for(var i=1;i<=N.length;i=i+2){if(typeof N[i-1]=='string'){throw new Error("Binding expected not a string");}if(N[i]){if((typeof N[i]!='string')||(N[i]!=",")){throw new Error("Missing delimiter ','");}}}}if(I){if(!I.formatter){G=I;I={parts:[G]};}else{K(I.formatter.textFragments);}for(var i=0;i<I.parts.length;i++){G=I.parts[i];H[G.model]=H[G.model]||(p?[]:null);if(Array.isArray(H[G.model])){H[G.model].push(G);}else{H[G.model]=G;}}}return H;};return y;},true);
