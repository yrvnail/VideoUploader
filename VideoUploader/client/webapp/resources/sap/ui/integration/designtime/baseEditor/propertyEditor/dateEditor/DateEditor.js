/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/ui/core/format/DateFormat"],function(B,D){"use strict";var a=B.extend("sap.ui.integration.designtime.baseEditor.propertyEditor.dateEditor.DateEditor",{xmlFragment:"sap.ui.integration.designtime.baseEditor.propertyEditor.dateEditor.DateEditor",metadata:{library:"sap.ui.integration"},renderer:B.getMetadata().getRenderer().render});a.prototype.getDefaultValidators=function(){var c=this.getConfig();return Object.assign({},B.prototype.getDefaultValidators.call(this),{isValidBinding:{type:"isValidBinding",isEnabled:c.allowBindings},notABinding:{type:"notABinding",isEnabled:!c.allowBindings},isDate:{type:"isDate"}});};a.prototype.formatValue=function(v){var d=new Date(v);if(!this._isValidDate(d)){return v;}return this.getFormatterInstance().format(d);};a.configMetadata=Object.assign({},B.configMetadata,{allowBindings:{defaultValue:true}});a.prototype.onFragmentReady=function(){var d=this.getContent();d.onkeypress=function(e){if(!e.charCode||e.metaKey||e.ctrlKey){return;}};};a.prototype._onChange=function(e){var v=e.getParameter("newValue");var p=this._parse(v);this.setValue(p);};a.prototype._parse=function(v){if(v===""){return undefined;}var p=new Date(v);return this._isValidDate(p)?p.toISOString():v;};a.prototype._isValidDate=function(d){return d&&!isNaN(d.getTime());};a.prototype.getFormatterInstance=function(){return D.getDateInstance();};return a;});
