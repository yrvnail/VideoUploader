/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(C,a,B,b,m,P){"use strict";var c=C.extend("sap.ui.integration.designtime.editor.fields.viz.ColorSelect",{metadata:{properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},editable:{type:"boolean",defaultValue:true},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"},_button:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}},renderer:function(r,f){var g=f.getAggregation("_button");r.openStart("div");r.addClass("sapUiIntegrationColorSelect");r.writeClasses();r.writeStyles();r.writeElementData(f);r.openEnd();r.renderControl(g);r.close("div");}});var e={};function s(){e={"sap.m.AvatarColor":{"Accent1":P.get("sapUiAccent1"),"Accent2":P.get("sapUiAccent2"),"Accent3":P.get("sapUiAccent3"),"Accent4":P.get("sapUiAccent4"),"Accent5":P.get("sapUiAccent5"),"Accent6":P.get("sapUiAccent6"),"Accent7":P.get("sapUiAccent7"),"Accent8":P.get("sapUiAccent8"),"Accent9":P.get("sapUiAccent9"),"Accent10":P.get("sapUiAccent10"),"TileIcon":P.get("sapUiTileIconColor"),"Transparent":"transparent","Placeholder":P.get("sapUiContentImagePlaceholderBackground")}};}s();b.attachThemeChanged(s);var o,d=new a("oColorPalettePopoverFull",{colorSelect:function(E){var f=E.getParameter("value"),g=e[o.getColorEnum()],i=Object.values(g).indexOf(f);o.setEnumValue(Object.keys(g)[i]);o.setColorValue(f);o._colorValue=f;}});c.prototype.init=function(){this._oButton=new B({icon:"sap-icon://color-fill",press:function(){this._openPalette();}.bind(this)});this._colorValue="transparent";this.setAggregation("_button",this._oButton);};c.prototype.onBeforeRendering=function(){if(!this._oStyle){this._oStyle=document.createElement("style");this._oStyle.innerHTML="#"+this.getId()+" .sapUiIcon::before { color: "+this._colorValue+" !important}";document.body.appendChild(this._oStyle);}var r=this._oStyle.sheet.rules[0];if(!this._colorValue||this._colorValue==="transparent"){r.style.opacity="0.5";r.style.color="transparent";r.style.backgroundSize="10px 10px";r.style.backgroundPosition="0px 0px, 0px 10px, 10px -10px, -10px 10px";r.style.border="1px dashed #808080";r.style.padding="0px 0px";r.style.backgroundImage="linear-gradient(45deg, #ddd 25%, transparent 25%), linear-gradient(-45deg, #ddd 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ddd 75%), linear-gradient(-45deg, transparent 75%, #ddd 75%)";}else{r.style.textShadow="unset";r.style.opacity="unset";r.style.backgroundSize="unset";r.style.backgroundPosition="unset";r.style.border="unset";r.style.padding="unset";r.style.backgroundImage="unset";r.style.color=this._colorValue;}};c.prototype._openPalette=function(){o=this;d.setShowDefaultColorButton(true);d.setShowMoreColorsButton(false);d.setDefaultColor("");var E=e[this.getColorEnum()];if(E){var f=[];for(var n in E){f.push(E[n]);}d.setColors(f);}d.openBy(this._oButton);};c.prototype.setEnumValue=function(v){this.setProperty("enumValue",v,true);this._colorValue=e[this.getColorEnum()][v];this.rerender();};c.prototype.bindProperty=function(p,f){C.prototype.bindProperty.apply(this,arguments);if(p==="editable"){var g=m({},f);this._oButton.bindProperty("enabled",g);}return this;};return c;});
