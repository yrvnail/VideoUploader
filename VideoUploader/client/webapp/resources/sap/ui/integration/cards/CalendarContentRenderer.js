/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseContentRenderer","sap/ui/core/InvisibleText","sap/ui/unified/library","sap/ui/unified/CalendarLegendRenderer"],function(B,I,u,C){"use strict";var a=u.CalendarDayType;var b=B.extend("sap.ui.integration.cards.CalendarContentRenderer",{apiVersion:2});b.renderContent=function(r,c){var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.integration"),i=c.getId();r.openStart("div",i+"card-group");r.attr("role","group");r.attr("aria-label",R.getText("CARDS_CALENDAR"));r.class("sapFCalCard");r.openEnd();r.openStart("div",i+"card-layout");r.class("sapFCalCardLayout");r.openEnd();r.openStart("div",i+"left-side");r.class("sapFCalCardLeftSide");r.openEnd();r.renderControl(c._oCalendar);r.openStart("div",i+"card-legend");r.attr("aria-label",R.getText("CARDS_CALENDAR_LEGEND"));r.openEnd();r.renderControl(c._oLegend);r.close("div");r.openStart("div","card-line-separator");r.class("sapFCalCardLineSeparator");r.openEnd();r.close("div");r.close("div");r.openStart("div",i+"right-side");r.class("sapFCalCardRightSide");r.openEnd();b.renderAppointments(r,c);if(c._bNeedForMoreButton()){r.renderControl(c._getMoreButton());}r.close("div");r.close("div");r.close("div");};b.renderAppointments=function(r,c){var v=c._getVisibleAppointments(),o=c._getCurrentAppointment(),R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.integration");r.openStart("div",c.getId()+"appointments-list");r.attr("role","list");r.attr("aria-label",R.getText("CARDS_CALENDAR_APPOINTMENTS"));r.class("sapFCalCardAppList");r.openEnd();if(!v.length){r.openStart("div");r.class("sapFCalCardNoItemsText");r.openEnd();r.text(c.getNoAppointmentsText());r.close("div");}v.forEach(function(A){b.renderAppointment(r,c,A,o==A);});r.close("div");};b.renderAppointment=function(r,c,A,i){var s=c._oCalendar.getSelectedDates()[0].getStartDate();r.openStart("div");r.attr("role","listitem");r.class("sapUiCalendarAppContainer");if(i){r.class("sapUiCalendarAppCurrent");}r.openEnd();r.openStart("div");r.class("sapUiCalendarAppContainerLeft");r.openEnd();r.openStart("div");r.class("sapUiCalendarAppStart");r.openEnd();r.text(A._getDateRangeIntersectionText(s).start);r.close("div");r.openStart("div");r.class("sapUiCalendarAppEnd");r.openEnd();r.text(A._getDateRangeIntersectionText(s).end);r.close("div");r.close("div");r.openStart("div");r.class("sapUiCalendarAppContainerRight");r.openEnd();this._renderAppointment(r,c,A,s);r.close("div");b.renderAdditionalAriaLabel(r,c,A);r.close("div");};b._renderAppointment=function(r,c,A,s){var i=A.getId();var t=A.getTitle();var T=A.getText();var d=A.getType();var e=A.getIcon();var S=!t||!T;r.openStart("div",A);r.class("sapUiCalendarApp");if(A.getClickable()){r.attr("tabindex","0");}else{r.class("sapUiCalendarAppDisabled");}r.accessibilityState(A,b.getAccProps(A));if(d&&d!=a.None){r.class("sapUiCalendarApp"+d);}if(S){r.class("sapUiCalendarAppOneLine");}r.openEnd();r.openStart("div");r.class("sapUiCalendarAppCont");r.openEnd();if(e){var f=["sapUiCalendarAppIcon"];var m={};m["id"]=i+"-Icon";m["title"]=null;r.icon(e,f,m);}r.openStart("div");r.class("sapUiCalendarAppTitleWrapper");r.openEnd();if(t){r.openStart("span",i+"-Title");r.class("sapUiCalendarAppTitle");r.openEnd();r.text(t);r.close("span");}if(T){r.openStart("span",i+"-Text");r.class("sapUiCalendarAppText");r.openEnd();r.text(T);r.close("span");}r.close("div");r.close("div");r.close("div");};b.renderAdditionalAriaLabel=function(r,c,A){var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.unified"),f=c._oFormatAria,t=A.getType(),l=c._oLegend?c._oLegend.getAppointmentItems():[];var s=R.getText("CALENDAR_START_TIME")+": "+f.format(A.getStartDate());s=s+"; "+R.getText("CALENDAR_END_TIME")+": "+f.format(A.getEndDate());if(t&&t!=a.None){s=s+"; "+this.getAriaTextForType(t,l);}r.openStart("span",A.getId()+"-Descr");r.class("sapUiInvisibleText");r.openEnd();r.text(s);r.close("span");};b.getAriaTextForType=function(t,l){var T,s,o,i;if(l&&l.length){for(var i=0;i<l.length;i++){o=l[i];if(o.getType()===t){T=o.getText();break;}}}if(!T){s=C.getTypeAriaText(t);if(s){T=s.getText();}}return T;};b.getAccProps=function(A){var i=A.getId();var m={labelledby:{value:I.getStaticId("sap.ui.unified","APPOINTMENT")+" "+i+"-Descr",append:true},selected:null};if(A.getTitle()){m["labelledby"].value=m["labelledby"].value+" "+i+"-Title";}if(A.getText()){m["labelledby"].value=m["labelledby"].value+" "+i+"-Text";}if(A.getSelected()){m["labelledby"].value=m["labelledby"].value+" "+I.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED");}return m;};return b;});
