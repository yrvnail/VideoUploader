/*!
 * Column visibility buttons for Buttons and DataTables.
 * 2016 SpryMedia Ltd - datatables.net/license
 */
(function(f){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net','datatables.net-buttons'],function($){return f($,window,document);});}else if(typeof exports==='object'){module.exports=function(r,$){if(!r){r=window;}if(!$||!$.fn.dataTable){$=require('datatables.net')(r,$).$;}if(!$.fn.dataTable.Buttons){require('datatables.net-buttons')(r,$);}return f($,r,r.document);};}else{f(jQuery,window,document);}}(function($,w,d,u){'use strict';var D=$.fn.dataTable;$.extend(D.ext.buttons,{colvis:function(a,c){return{extend:'collection',text:function(a){return a.i18n('buttons.colvis','Column visibility');},className:'buttons-colvis',buttons:[{extend:'columnsToggle',columns:c.columns,columnText:c.columnText}]};},columnsToggle:function(a,c){var b=a.columns(c.columns).indexes().map(function(i){return{extend:'columnToggle',columns:i,columnText:c.columnText};}).toArray();return b;},columnToggle:function(a,c){return{extend:'columnVisibility',columns:c.columns,columnText:c.columnText};},columnsVisibility:function(a,c){var b=a.columns(c.columns).indexes().map(function(i){return{extend:'columnVisibility',columns:i,visibility:c.visibility,columnText:c.columnText};}).toArray();return b;},columnVisibility:{columns:u,text:function(a,b,c){return c._columnText(a,c);},className:'buttons-columnVisibility',action:function(e,a,b,c){var f=a.columns(c.columns);var g=f.visible();f.visible(c.visibility!==u?c.visibility:!(g.length?g[0]:false));},init:function(a,b,c){var t=this;a.on('column-visibility.dt'+c.namespace,function(e,s){if(!s.bDestroying&&s.nTable==a.settings()[0].nTable){t.active(a.column(c.columns).visible());}}).on('column-reorder.dt'+c.namespace,function(e,s,f){if(a.columns(c.columns).count()!==1){return;}if(typeof c.columns==='number'){c.columns=f.mapping[c.columns];}var g=a.column(c.columns);t.text(c._columnText(a,c));t.active(g.visible());});this.active(a.column(c.columns).visible());},destroy:function(a,b,c){a.off('column-visibility.dt'+c.namespace).off('column-reorder.dt'+c.namespace);},_columnText:function(a,c){var i=a.column(c.columns).index();var t=a.settings()[0].aoColumns[i].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return c.columnText?c.columnText(a,i,t):t;}},colvisRestore:{className:'buttons-colvisRestore',text:function(a){return a.i18n('buttons.colvisRestore','Restore visibility');},init:function(a,b,c){c._visOriginal=a.columns().indexes().map(function(i){return a.column(i).visible();}).toArray();},action:function(e,a,b,c){a.columns().every(function(i){var f=a.colReorder&&a.colReorder.transpose?a.colReorder.transpose(i,'toOriginal'):i;this.visible(c._visOriginal[f]);});}},colvisGroup:{className:'buttons-colvisGroup',action:function(e,a,b,c){a.columns(c.show).visible(true,false);a.columns(c.hide).visible(false,false);a.columns.adjust();},show:[],hide:[]}});return D.Buttons;}));
