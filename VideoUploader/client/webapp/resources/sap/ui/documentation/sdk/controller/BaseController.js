/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/documentation/library","sap/ui/core/Fragment","sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/model/resource/ResourceModel","sap/ui/Device","sap/m/library","sap/ui/documentation/sdk/controller/util/APIInfo","sap/base/strings/formatMessage","sap/ui/documentation/WebPageTitleUtil"],function(l,F,C,H,R,D,m,A,f,W){"use strict";var S=m.SplitAppMode;var _=new W();var b=[];return C.extend("sap.ui.documentation.sdk.controller.BaseController",{_oCore:sap.ui.getCore(),formatMessage:f,appendPageTitle:function(t){if(t===null){b=[];}else{if(b.indexOf(t)>=0){return this;}b.length===2?b[0]=t:b.unshift(t);}_.setTitle(b.join(" - "));return this;},onInit:function(){var M=new R({bundleName:"sap.ui.documentation.messagebundle"});this.setModel(M,"i18n");if(D.system.phone||D.system.tablet){this.getOwnerComponent().loadVersionInfo();}},hideMasterSide:function(){var s=this.getSplitApp();s.setMode(S.HideMode);},showMasterSide:function(){var s=this.getSplitApp();s.setMode(S.ShowHideMode);},getSplitApp:function(){return this.getView().getParent().getParent();},getRouter:function(){return this.getOwnerComponent().getRouter();},getModel:function(n){return this.getView().getModel(n);},setModel:function(M,n){return this.getView().setModel(M,n);},getConfig:function(){return this.getOwnerComponent().getMetadata().getConfig();},onNavBack:function(e){var p=H.getInstance().getPreviousHash();if(p!==undefined){if(p.indexOf("search/")===0){this.getRouter().navTo("search",{searchParam:p.split("/")[1]},false);}else{history.go(-1);}}else{var c=window.location.hash;if(c.indexOf("#/topic/")==0){this.getRouter().navTo("topic",{},true);}else if(c.indexOf("#/api/")==0){this.getRouter().navTo("api",{},true);}}},searchResultsButtonVisibilitySwitch:function(B){var p=H.getInstance().getPreviousHash();if(p&&p.indexOf("search/")===0){B.setVisible(true);}else{B.setVisible(false);}},getRootView:function(){var c=this.getOwnerComponent();return c.byId(c.getManifestEntry("/sap.ui5/rootView").id);},onDisclaimerLinkPress:function(e){var s=e.getSource?e.getSource():e.target;if(!this.oDisclaimerPopover){F.load({name:"sap.ui.documentation.sdk.view.LegalDisclaimerPopover"}).then(function(p){this.getView().addDependent(p);this.oDisclaimerPopover=p;p.openBy(s);}.bind(this));return;}else if(this.oDisclaimerPopover.isOpen()){this.oDisclaimerPopover.close();}this.oDisclaimerPopover.openBy(s);},_getControlComponent:function(c,o){var L=o.libComponentInfos,a=l._getLibraryInfoSingleton();return a._getActualComponent(L,c);},_onOrientationChange:function(e){var i=this.byId("phoneImage");if(D.system.phone&&i){i.toggleStyleClass("phoneHeaderImageLandscape",e.landscape);}},_registerOrientationChange:function(){D.orientation.attachHandler(this._onOrientationChange,this);},_deregisterOrientationChange:function(){D.orientation.detachHandler(this._onOrientationChange,this);},handleLandingImageLoad:function(){this.getView().byId("landingImageHeadline").setVisible(true);},getAPIReferenceCheckPromise:function(c){return A.getIndexJsonPromise().then(function(d){function e(a){return a.some(function(o){var g=o.name===c;if(!g&&o.nodes){return e(o.nodes);}return g;});}return e(d);});},onRouteNotFound:function(){var n=this.getModel("i18n").getProperty("NOT_FOUND_TITLE");this.getRouter().myNavToWithoutHash("sap.ui.documentation.sdk.view.NotFound","XML",false);setTimeout(this.appendPageTitle.bind(this,n));return;}});});
