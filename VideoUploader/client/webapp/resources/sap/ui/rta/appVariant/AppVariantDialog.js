/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Button","sap/m/Dialog","sap/m/DialogRenderer","sap/m/GenericTile","sap/m/ImageContent","sap/m/Input","sap/m/Label","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/TextArea","sap/m/TileContent","sap/m/VBox","sap/ui/core/library","sap/ui/core/IconPool","sap/ui/core/Title","sap/ui/layout/form/SimpleForm","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/layout/form/ResponsiveGridLayout"],function(B,D,a,G,I,b,L,S,c,T,d,V,e,f,g,h,F,i,J,R){"use strict";var j=e.ValueState;var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var o;var t;var k;var s;var l;var m;var n;var p;var q;var u;var v;var C;var w;function _(){o=new G("tile",{header:"{/title}",subheader:"{/subtitle}",ariaLabel:r.getText("APP_VARIANT_TILE_ARIA_LABEL"),tileContent:[new d({content:[new I({src:"{/icon}"})]})]}).addStyleClass("sapUiMediumMarginBegin").addStyleClass("sapUiTinyMarginTop").addStyleClass("sapUiTinyMarginBottom");}function x(M){var N=M.getParameter("value");var O=new F("name",i.Contains,N);var P=M.getSource().getBinding("items");P.filter([O]);}function y(M){var N=M.getParameter("selectedContexts");if(N&&N.length){N.forEach(function(O){var P=O.getObject().name;q.setValue(P);C.setProperty("/icon",O.getObject().icon);});}M.getSource().getBinding("items").filter([]);}function z(){if(!v){v=new S("selectDialog",{noDataText:r.getText("APP_VARIANT_ICON_NO_DATA"),title:r.getText("APP_VARIANT_ICON_SELECT_ICON"),search:function(N){x(N);},confirm:function(N){y(N);},cancel:function(N){y(N);}});}v.addStyleClass(R.getRtaStyleClassName());v.bindAggregation("items",{path:"/icons",template:new c({title:"{name}",description:"",icon:"{icon}",iconDensityAware:false,iconInset:false,type:"Active"})});var U=f.getIconNames();var M=[];U.forEach(function(N){M.push({icon:f.getIconInfo(N).uri,name:N.toLowerCase()});});w.setProperty("/icons",M);v.setModel(w);v.getBinding("items").filter([]);v.open();}function A(){t=new L({required:true,text:r.getText("APP_DIALOG_TITLE_TEXT"),textAlign:"Left"});k=new b("titleInput",{value:"{/title}",valueLiveUpdate:true,placeholder:r.getText("SAVE_AS_DIALOG_PLACEHOLDER_TITLE_TEXT"),liveChange:function(){var M=sap.ui.getCore().byId("saveButton");if(this.getValue()===""){this.setValueState(j.Error);M.setEnabled(false);}else{this.setValueState(j.None);M.setEnabled(true);}}});s=new L({text:r.getText("APP_DIALOG_SUB_TITLE_TEXT"),textAlign:"Left"});l=new b({value:"{/subtitle}",valueLiveUpdate:true});m=new L({text:r.getText("APP_DIALOG_DESCRIPTION_TEXT"),textAlign:"Left"});n=new T({rows:4});p=new L({text:r.getText("APP_DIALOG_ICON_TEXT"),textAlign:"Left"});q=new b("selectInput",{showValueHelp:true,liveChange:function(M){z(M);},valueHelpRequest:function(M){z(M);},value:"{/iconname}",valueLiveUpdate:true});}function E(){u=new h({editable:true,layout:"ResponsiveGridLayout",labelSpanXL:4,labelSpanL:4,labelSpanM:4,labelSpanS:4,adjustLabelSpan:false,emptySpanXL:0,emptySpanL:0,emptySpanM:0,emptySpanS:0,columnsXL:2,columnsL:2,columnsM:2,singleContainerFullSize:false,content:[new g("title1"),t,k,s,l,p,q,m,n,new g("title2"),o]});return u;}function H(){var M=new V({items:[E()]}).addStyleClass("sapUISmallMargin");return M;}var K=D.extend("sap.ui.rta.appVariant.AppVariantDialog",{metadata:{library:"sap.ui.rta",events:{create:{},cancel:{}}},init:function(){D.prototype.init.apply(this);this.setTitle(r.getText("CREATE_APP_VARIANT_DIALOG_TITLE"));this.setContentWidth("620px");this.setContentHeight("250px");C=new J({title:null,subtitle:null,icon:" ",iconname:null});w=new J({icons:null});sap.ui.getCore().setModel(C);_();A();this.addContent(H());this._createButtons();this.addStyleClass(R.getRtaStyleClassName());},onAfterRendering:function(){document.getElementById('title1').style.height="0px";document.getElementById('title2').style.height="0px";document.getElementById('tile').style.float="left";},_onCreate:function(){var M=k.getValue()||" ";var N=l.getValue()||" ";var O=n.getValue()||" ";var P=q.getValue()?f.getIconInfo(q.getValue()).uri:" ";this.fireCreate({title:M,subTitle:N,description:O,icon:P});this.close();this.destroy();},_createButtons:function(){this.addButton(new B("saveButton",{text:r.getText("APP_VARIANT_DIALOG_SAVE"),tooltip:r.getText("TOOLTIP_APP_VARIANT_DIALOG_SAVE"),enabled:false,press:function(){this._onCreate();}.bind(this)}));this.addButton(new B({text:r.getText("SAVE_AS_APP_VARIANT_DIALOG_CANCEL"),tooltip:r.getText("TOOLTIP_SAVE_AS_APP_VARIANT_DIALOG_CANCEL"),press:function(){this.fireCancel();this.close();this.destroy();}.bind(this)}));},destroy:function(){if(C){C.destroy();}D.prototype.destroy.apply(this,arguments);},renderer:a.render});return K;});
