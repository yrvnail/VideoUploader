/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/isPlainObject","sap/base/util/merge"],function(i,m){"use strict";function a(o,k){return o[k]&&typeof o[k]==="string";}function c(p){if(!p.appComponent.isA("sap.ui.core.Component")){return false;}if(!i(p.modifier)){return false;}if(p.modifier.targets==="xmlTree"&&!a(p.view,"nodeName")){return false;}if(p.payload&&!i(p.payload)){return false;}return["aggregationName","bindingPath"].every(a.bind(null,p));}var T={getPropertyInfo:function(p){return Promise.resolve().then(function(){var v=p.element.isA("sap.ui.core.Element")&&p.aggregationName&&typeof p.aggregationName==="string"&&(!p.payload||typeof p.payload==="object");if(v){return[];}});},createLabel:function(p){return Promise.resolve().then(function(){var P=c(p)&&a(p,"labelFor");if(P){return p.modifier.createControl("sap.m.Label",p.appComponent,p.view,p.labelFor+"-label",{labelFor:p.labelFor,text:p.bindingPath},true);}});},createControlForProperty:function(p){return Promise.resolve().then(function(){var P=c(p)&&(a(p.element,"nodeName")||p.element.isA("sap.ui.core.Element"))&&i(p.fieldSelector)&&a(p.fieldSelector,"id");if(P){var b=[p.modifier.createControl("sap.m.Text",p.appComponent,p.view,p.fieldSelector,{text:"{"+p.bindingPath+"}"},true)];if(p.payload.valueHelpId){var v=m({},p.fieldSelector,{id:p.fieldSelector.id+"-"+p.payload.valueHelpId});b.push(p.modifier.createControl("sap.ui.core.Element",p.appComponent,p.view,v,true));}return Promise.all(b).then(function(C){return{control:C[0],valueHelp:C[1]};});}});},createLayout:function(p){var P=c(p)&&p.fieldSelector&&typeof p.fieldSelector==="object"&&typeof p.fieldSelector.id==="string";if(P){return new Promise(function(r){if(!p.payload.useCreateLayout){return r();}var l;var v;var L=m({},p);L.fieldSelector.id+="-field";T.createControlForProperty(L).then(function(s){v=s.valueHelp;l=L.modifier.createControl(L.payload.layoutType,L.appComponent,L.view,p.fieldSelector);L.modifier.insertAggregation(l,L.payload.aggregation,s.control,0,L.view);if(L.payload.labelAggregation){var C=Object.assign({labelFor:L.modifier.getId(s.control)},L);return T.createLabel(C);}}).then(function(o){if(o){L.modifier.insertAggregation(l,L.payload.labelAggregation,o,0,L.view);}}).then(function(){r({control:l,valueHelp:v});});});}}};return T;});
