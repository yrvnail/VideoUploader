/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/layout/cssgrid/GridLayoutBase","sap/ui/layout/cssgrid/GridSettings","sap/ui/layout/cssgrid/GridBoxLayoutStyleHelper","sap/ui/Device","sap/ui/thirdparty/jquery"],function(G,a,b,D,q){"use strict";var S=/^([X][L](?:[1-9]|1[0-2]))? ?([L](?:[1-9]|1[0-2]))? ?([M](?:[1-9]|1[0-2]))? ?([S](?:[1-9]|1[0-2]))?$/i;var c=S.exec("XL7 L6 M4 S2");var s={"Phone":"sapUiLayoutCSSGridBoxLayoutSizeS","Tablet":"sapUiLayoutCSSGridBoxLayoutSizeM","Desktop":"sapUiLayoutCSSGridBoxLayoutSizeL","LargeDesktop":"sapUiLayoutCSSGridBoxLayoutSizeXL"};var d={"XL":"sapUiLayoutCSSGridBoxLayoutSpanXL7","L":"sapUiLayoutCSSGridBoxLayoutSpanL6","M":"sapUiLayoutCSSGridBoxLayoutSpanM4","S":"sapUiLayoutCSSGridBoxLayoutSpanS2"};var e="0.5rem";var f=G.extend("sap.ui.layout.cssgrid.GridBoxLayout",{metadata:{library:"sap.ui.layout",properties:{boxMinWidth:{type:"sap.ui.core.CSSSize",defaultValue:""},boxWidth:{type:"sap.ui.core.CSSSize",defaultValue:""},boxesPerRowConfig:{type:"sap.ui.layout.BoxesPerRowConfig",group:"Behavior",defaultValue:"XL7 L6 M4 S2"}}}});f.prototype.getActiveGridSettings=function(){return new a({gridTemplateColumns:this._getTemplateColumns(),gridGap:e+" "+e});};f.prototype._applySingleGridLayout=function(E){G.prototype._applySingleGridLayout.call(this,E);var g=sap.ui.getCore().byId(E.parentElement.id);if(g&&g.isA("sap.f.GridList")&&g.isGrouped()){this._flattenHeight(g);}};f.prototype.addGridStyles=function(r){G.prototype.addGridStyles.apply(this,arguments);this._addSpanClasses(r);r.class("sapUiLayoutCSSGridBoxLayoutContainer");};f.prototype.onGridAfterRendering=function(g){g.getGridDomRefs().forEach(function(o){if(o.children){for(var i=0;i<o.children.length;i++){if(!o.children[i].classList.contains("sapMGHLI")&&!o.children[i].classList.contains("sapUiBlockLayerTabbable")){o.children[i].classList.add("sapUiLayoutCSSGridItem");}}}});if(!this._hasBoxWidth()){this._applySizeClass(g);}if(g.isA("sap.f.GridList")&&g.getGrowing()){var C=g._oGrowingDelegate._onAfterPageLoaded;g._oGrowingDelegate._onAfterPageLoaded=function(){C.call(g._oGrowingDelegate);if(g.isA("sap.f.GridList")&&g.isGrouped()){this._flattenHeight(g);}}.bind(this);}};f.prototype.isResponsive=function(){return true;};f.prototype.onGridResize=function(E){if(E.control&&E.control.isA("sap.f.GridList")&&E.control.isGrouped()){this._flattenHeight(E.control);}if(E){if(!this._hasBoxWidth()){this._applySizeClass(E.control);}}};f.prototype._flattenHeight=function(C){var m=0;C.$().removeClass('sapUiLayoutCSSGridBoxLayoutFlattenHeight');this._loopOverGridItems(C,function(g){m=Math.max(q(g).outerHeight(),m);});b.setItemHeight(C.getId(),m);C.$().addClass('sapUiLayoutCSSGridBoxLayoutFlattenHeight');};f.prototype._applySizeClass=function(C){var r=D.media.getCurrentRange("StdExt",C.$().width()),g=s[r.name];C.getGridDomRefs().forEach(function(o){if(!o.classList.contains(g)){Object.keys(s).map(function(h){o.classList.remove(s[h]);});o.classList.add(g);}});};f.prototype._getTemplateColumns=function(){var t="";if(this.getBoxWidth()){t="repeat(auto-fit, "+this.getBoxWidth()+")";}else if(this.getBoxMinWidth()){t="repeat(auto-fit, minmax("+this.getBoxMinWidth()+", 1fr))";}return t;};f.prototype._hasBoxWidth=function(){if(this.getBoxWidth()||this.getBoxMinWidth()){return true;}else{return false;}};f.prototype._addSpanClasses=function(r){var g,h=this.getBoxesPerRowConfig(),j,k,l,m;if(this._hasBoxWidth()){return;}if(!h||!h.length===0){g=c;}else{g=S.exec(h);}if(g){for(var i=1;i<g.length;i++){var n=g[i];if(!n){continue;}n=n.toUpperCase();switch(n.substr(0,1)){case"X":if(n.substr(1,1)==="L"){j=this._getBoxesPerRowClass(n,2);}break;case"L":k=this._getBoxesPerRowClass(n,1);break;case"M":l=this._getBoxesPerRowClass(n,1);break;case"S":m=this._getBoxesPerRowClass(n,1);break;default:break;}}}j=j||d.XL;k=k||d.L;l=l||d.M;m=m||d.S;r.class(j).class(k).class(l).class(m);};f.prototype._getBoxesPerRowClass=function(g,i){var h=parseInt(g.substr(i,g.length));if(h&&h>0&&h<13){return"sapUiLayoutCSSGridBoxLayoutSpan"+g;}};f.prototype._loopOverGridItems=function(C,g){C.getGridDomRefs().forEach(function(o){if(o&&o.children){for(var i=0;i<o.children.length;i++){if(o.children[i].style.display!=="none"&&o.children[i].style.visibility!=="hidden"){g(o.children[i]);}}}});};return f;});
