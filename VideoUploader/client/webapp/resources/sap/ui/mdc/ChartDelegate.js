/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/AggregationBaseDelegate","sap/ui/base/SyncPromise","sap/ui/mdc/chart/MeasureItem","sap/ui/mdc/chart/DimensionItem","sap/ui/core/Core","sap/ui/mdc/util/FilterUtil"],function(A,S,M,D,C,F){"use strict";var a=Object.assign({},A);a.Metadata={items:[],properties:[],sortable:true,filterable:true};a.MetadataProperty={kind:"",role:"",contextDefiningProperties:[],className:"",aggregationMethod:"","default":true,custom:false,name:"",propertyPath:"",label:"",textProperty:"",sortable:true,sortDirection:"",filterable:true,allowedExpressions:[]};a.retrieveAllMetadata=function(c){return Promise.resolve(a.Metadata);};a.fetchProperties=function(c){var p=[this.MetadataProperty];return Promise.resolve(p);};a.retrieveAggregationItem=function(s,m){return{};};a.updateBindingInfo=function(m,b){if(m&&m.getAggregation("_chart")&&b){var f=C.byId(m.getFilter());if(f){var c=f.getConditions();if(c){if(!b){b={};}var p=f.getPropertyInfoSet?f.getPropertyInfoSet():null;var o=F.getFilterInfo(f,c,p);b.filters=o.filters;}}}};a.rebindChart=function(m,b){if(m&&m.getAggregation("_chart")&&b){m.getAggregation("_chart").bindData(b);}};a.createChartItem=function(n,c,r){return this.fetchProperties(c).then(function(p){var P=p.find(function(d){return d.name===n;});if(!P){return null;}var o=null,i=c.getId()+"--"+n,s="create"+P.kind+"Item",I=this[s];if(typeof I==="function"){var b=this.retrieveAggregationItem(P.kind,P).settings;o=I.call(this,i,b);if(r){o.setRole(r);}}return o;}.bind(this));};a.createDimensionItem=function(i,s){return new D(i,s);};a.createMeasureItem=function(i,s){return new M(i,s);};a.addItem=function(p,c,P,r){if(typeof c.getModel==="function"){return this.createChartItem(p,c,r);}return S.resolve(null);};a.removeItem=function(p,c,P){return S.resolve(true);};return a;});
