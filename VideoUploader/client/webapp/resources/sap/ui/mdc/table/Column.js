/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/m/Label","sap/ui/core/Core","sap/base/Log"],function(E,L,C,a){"use strict";var b=E.extend("sap.ui.mdc.table.Column",{metadata:{library:"sap.ui.mdc",defaultAggregation:"template",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minWidth:{type:"float",group:"Behavior",defaultValue:8},header:{type:"string"},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",defaultValue:"Begin"},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},initialIndex:{type:"int",defaultValue:-1},dataProperties:{type:"string[]",defaultValue:[]},dataProperty:{type:"string"}},events:{},aggregations:{template:{type:"sap.ui.core.Control",multiple:false},creationTemplate:{type:"sap.ui.core.Control",multiple:false}}}});b.prototype.init=function(){this.mSkipPropagation={template:true,creationTemplate:true};};b.prototype.setDataProperties=function(d){this.setProperty("dataProperties",d);if(!this.getDataProperty()){this.setProperty("dataProperty",this.getDataProperties()[0]);}a.error("The property 'dataProperties' is deprecated, please use the property 'dataProperty' instead",this);return this;};b.prototype.getTemplate=function(c){var t=this.getAggregation("template");if(c&&this._oTemplateClone&&this._oTemplateClone.bIsDestroyed){this._oTemplateClone=null;}if(!this._oTemplateClone&&t){this._oTemplateClone=t.clone();}return c?this._oTemplateClone:t;};b.prototype.getCreationTemplate=function(c){var o=this.getAggregation("creationTemplate");if(c&&this._oCreationTemplateClone&&this._oCreationTemplateClone.bIsDestroyed){this._oCreationTemplateClone=null;}if(!this._oCreationTemplateClone&&o){this._oCreationTemplateClone=o.clone();}return c?this._oCreationTemplateClone:o;};b.prototype.setHeaderVisible=function(h){if(this.getHeaderVisible()===h){return this;}this.setProperty("headerVisible",h,true);this._updateColumnHeaderControl();return this;};b.prototype.setHeader=function(h){this.setProperty("header",h,true);this._updateColumnHeaderControl();var l=document.getElementById(this.getId());if(l){l.textContent=this.getHeader();}return this;};b.prototype.setHAlign=function(h){this.setProperty("hAlign",h,true);this._updateColumnHeaderControl();return this;};b.prototype._updateColumnHeaderControl=function(){if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.setWidth(this.getHeaderVisible()?null:"0px");this._oColumnHeaderLabel.setWrapping(this._bMobileTable&&this.getHeaderVisible());this._oColumnHeaderLabel.setText(this.getHeader());this._oColumnHeaderLabel.setTextAlign(this.getHAlign());}};b.prototype.setParent=function(p){var P=this.getParent();E.prototype.setParent.apply(this,arguments);if(p&&p.isA("sap.ui.mdc.Table")){if(p.getDomRef()){this._addAriaStaticDom();}else{this.oAfterRenderingDelegate={onAfterRendering:function(){this._addAriaStaticDom();this.getParent().removeDelegate(this.oAfterRenderingDelegate);}};p.addDelegate(this.oAfterRenderingDelegate,this);}}else if(!p){P.removeDelegate(this.oAfterRenderingDelegate);this._removeAriaStaticDom();}};b.prototype.getColumnHeaderControl=function(m){if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.destroy();}this._oColumnHeaderLabel=new L(this.getId()+"-innerColumnHeader",{wrappingType:m?"Hyphenated":null});this._bMobileTable=m;this._updateColumnHeaderControl();return this._oColumnHeaderLabel;};b.prototype._removeAriaStaticDom=function(){var d=document.getElementById(this.getId());if(d){d.parentNode.removeChild(d);}};b.prototype._addAriaStaticDom=function(){var i=document.createElement("div");i.setAttribute("id",this.getId());i.setAttribute("class","sapUiInvisibleText");i.setAttribute("aria-hidden","true");var h=document.createTextNode(this.getHeader());i.appendChild(h);var s=C.getStaticAreaRef();if(i&&s){s.appendChild(i);}};b.prototype.exit=function(){if(this._oTemplateClone){this._oTemplateClone.destroy();this._oTemplateClone=null;}if(this._oCreationTemplateClone){this._oCreationTemplateClone.destroy();this._oCreationTemplateClone=null;}if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.destroy();this._oColumnHeaderLabel=null;}this._removeAriaStaticDom();};return b;});
