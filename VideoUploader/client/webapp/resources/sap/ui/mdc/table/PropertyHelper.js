/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../util/PropertyHelper"],function(P){"use strict";var a=P.extend("sap.ui.mdc.table.PropertyHelper",{constructor:function(p,e,o,E){var A=["filterable","sortable","groupable","key","unit","text","exportSettings","propertyInfos"];P.call(this,p,e,o,A,E);}});function i(C){return!!(C&&C.isA&&C.isA("sap.ui.mdc.table.Column"));}function g(w){if(w.indexOf("em")>0){return Math.round(parseFloat(w));}if(w.indexOf("px")>0){return Math.round(parseInt(w)/16);}return"";}a.prototype.prepareProperty=function(p){P.prototype.prepareProperty.apply(this,arguments);p.isAggregatable=function(){return false;};};a.prototype.getColumnExportSettings=function(C,s){if(!i(C)){return null;}var p=this.getProperty(C.getDataProperty());if(!p){return null;}s=s===true;var d=[];var e;var E=p.getExportSettings();var o;var f=[];var A;var h;var j;var k;if(p.isComplex()){e=p.getReferencedProperties();if(!s&&E){o=c(C,p,E,s);e.forEach(function(p){f.push(p.getPath());});o.property=f;d.push(o);}else{e.forEach(function(p,I){var l=p.getExportSettings(),m=c(C,p,l,s);m.property=p.getPath();if(I>0){m.columnId=C.getId()+"-additionalProperty"+I;}if(l||m.property){d.push(m);}},this);}}else if(!s&&E){o=c(C,p,E,s);o.property=p.getPath();d.push(o);}else{o=c(C,p,E,s);o.property=p.getPath();if(o.property){d.push(o);}A=s&&E&&E.unitProperty?E.unitProperty:null;if(A){h=b(this,A);j=h.getExportSettings();k=c(C,h,j,s);k.property=h.getPath();k.columnId=C.getId()+"-additionalProperty";if(j||k.property){d.push(k);}}}return d;};function b(p,s){var o=p.getProperty(s);if(!o){o=p.getProperties().find(function(o){return s===o.getPath();});}if(o.isComplex()){throw new Error("The 'unitProperty' points to a complex property");}return o;}function c(C,p,e,s){var E=Object.assign({columnId:C.getId(),label:p.getLabel(),width:g(C.getWidth()),textAlign:C.getHAlign(),type:"String"},e);if(s){E.displayUnit=false;}return E;}return a;});
