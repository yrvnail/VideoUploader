/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/mdc/p13n/PersistenceProvider"],function(B,P){"use strict";var E="DefaultProviderRegistry: This class is a singleton and should not be used without an AdaptationProvider. Please use 'sap.ui.mdc.p13n.Engine.getInstance().defaultProviderRegistry' instead";var d;var D=B.extend("sap.ui.mdc.p13n.DefaultProviderRegistry",{constructor:function(){if(d){throw Error(E);}B.call(this);this._mDefaultProviders={};}});D.prototype.destroy=function(){Object.keys(this._mDefaultProviders).forEach(function(p){this._mDefaultProviders[p].destroy();delete this._mDefaultProviders[p];}.bind(this));B.prototype.destroy.apply(this,arguments);};D.prototype.attach=function(c,p){if(c.getEngine().isRegisteredForModification(c)){throw new Error("DefaultProviderRegistry: You must not change the modificationSettings for an already registered control");}var o=this._retrieveDefaultProvider(p);var C=typeof c==="string"?c:c.getId();if(o.getFor().indexOf(C)===-1){o.addFor(c);}return o;};D.prototype.detach=function(c){Object.keys(this._mDefaultProviders).forEach(function(m){var o=this._mDefaultProviders[m];o.removeFor(c);}.bind(this));};D.prototype._retrieveDefaultProvider=function(p){this._mDefaultProviders[p]=this._mDefaultProviders[p]||new P({mode:p});return this._mDefaultProviders[p];};D.getInstance=function(){if(!d){d=new D();}return d;};return D;});
